%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 147383320_789097196
  Name: "VESTA.Санаторий.П.Документы.Бронирование.Интерфейс ч2"
  Caption: "VESTA.Санаторий.П.Документы.Бронирование.Интерфейс ч2"
  Version: "1.0.0.73"
  Optional: False
  Internal: True
  MD5: 41ACD2ED1E63C529419CE8A45CA1C61D
Uses: 
  - "147753062_69526485 GS.Общие.Хранилище"
  - "147364159_796152036 GS.Санаторий.Отдел продаж.Исследователь"
  - "147022903_800897192 GS.Санаторий.П.Документы.Бронирование.Интерфейс ч1"
  - "147753351_73094925 GS.Общие.Метаданные.Домены"
  - "147376588_789097196 VESTA.Заявка"
  - "147408052_815437717 VESTA.Счет-фактура для гостиничного проживания"
  - "147423859_809241643 VESTA.Скидки"
  - "147693018_71168484 GS.Санаторий.Общее.Скрипты"
  - "147378148_789097196 VESTA.Отдел продаж.Договор на заселение"
Objects: 
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147015771_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupDialog"
      COMMENT: ~
      EVENT: "ONSETUPDIALOG"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2019-09-04T10:39:28+03:00
      DISPLAYSCRIPT: | 
        GDC_DLGATTRUSERDEFINEDUSR_HT_RESERVATIONONSETUPDIALOG
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        option explicit
        sub gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupDialog(ByVal Sender)
          call   Inherited(Sender, "OnSetupDialog", Array(Sender))
        
        dim gdcObject, dsObject, I
        
          set gdcObject = Sender.gdcObject
          set dsObject = Sender.GetComponent("dsgdcBase")
        
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_REQUESTKEY").Transaction = gdcObject.Transaction
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_CONTROCCKEY").Transaction = gdcObject.Transaction
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_HTINVOICEKEY").Transaction = gdcObject.Transaction
          ' Установим рабочую транзакцию
          ' Услуги
          dim gdcServiceList
          set gdcServiceList = Sender.GetComponent("usrg_gdcServiceList")
          gdcServiceList.Close
          gdcServiceList.ReadTransaction = gdcObject.ReadTransaction
          gdcServiceList.Transaction = gdcObject.Transaction
          gdcServiceList.Open
        '  ' Все начисления
        '  dim gdcAllPostingList
        '  set gdcAllPostingList = Sender.GetComponent("usrg_gdcAllPostingList")
        '  gdcAllPostingList.Close
        '  gdcAllPostingList.ReadTransaction = gdcObject.ReadTransaction
        '  gdcAllPostingList.Transaction = gdcObject.Transaction
        '  gdcAllPostingList.Open
          
          dim gdcDisc
          set gdcDisc = Sender.GetComponent("usrg_gdcResDisc")
          gdcDisc.Close
          gdcDisc.ReadTransaction = gdcObject.ReadTransaction
          gdcDisc.Transaction = gdcObject.Transaction
          gdcDisc.SubSet = "ByReservKey"
          gdcDisc.Open
          
          dim gdcAdd
          set gdcAdd = Sender.GetComponent("usrg_gdcAdd")
          gdcAdd.Close
          gdcAdd.ReadTransaction = gdcObject.ReadTransaction
          gdcAdd.Transaction = gdcObject.Transaction
          gdcAdd.SubSet = "ByReservKey"
          gdcAdd.Open
          
          ' Начисления по счетам
          'заком. для ускорения загрузки и пока не используются платные услуги
          dim gdcDetailPosting
          'for I = 1 to 8
        '    set gdcDetailPosting = Sender.GetComponent("usrg_gdcDetailPosting_0" & I)
        '    gdcDetailPosting.Close
        '    gdcDetailPosting.ReadTransaction = gdcObject.ReadTransaction
        '    gdcDetailPosting.Transaction = gdcObject.Transaction
        '    gdcDetailPosting.ParamByName("folionumber").AsInteger = I
        '    gdcDetailPosting.Open
        '  next
          
          ' Сохраним ссылку на форму диалога
          if not gdcObject.ObjectExists("DialogForm") then
            call gdcObject.AddObjectItem("DialogForm")
          end if
          gdcObject.Objects("DialogForm") = Sender
          
          ' Уберем кнопку по умолчанию с ОК
          Sender.GetComponent("btnOK").Default = False
          
          dim IsUserAdmin
          IsUserAdmin = IBlogin.IsUserAdmin
          Sender.GetComponent("usrg_tbtService").Visible = IsUserAdmin
          
          Sender.GetComponent("usrg_actAllPostingEdit").Visible = False
          Sender.GetComponent("usrg_actAllPostingDelete").Visible = False
          for I = 1 to 8
            Sender.GetComponent("usrg_actDetailPostingAddEdit_0" & I).Visible = False
            Sender.GetComponent("usrg_actDetailPostingAddDelete_0" & I).Visible = False
          next
          
          ' в поле "Бронирование" выводим только брони (без путевок)
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_RESERVKEY").Condition = _
            " USR$STATEKEY IN ( " & HT_ReservationStateDict.GetPermitBookingState.Key & ")"
          
          
          'скрытие эл. управления.
          'если это бронирование путевки
          if not IsNull(gdcObject.FieldByName("USR$CONFIRMRESERVDATE").AsVariant) then
            Sender.Caption = "Добавление: Бронирование"
            Sender.GetComponent("usrg_gbDocBefore").Visible = False
            Sender.GetComponent("usrg_gbTarrif").Visible = False
            ' скрытие номера путевки для бронирования
            Sender.GetComponent("usrat_DBEdit_USR_NUMBER").Visible = True
            Sender.GetComponent("usrat_DBEdit_USR_NUMBER_Label").Visible = True
            Sender.GetComponent("usrat_xDateDBEdit_USR_CONFIRMRESERVDATE").Visible = True
            Sender.GetComponent("usrat_xDateDBEdit_USR_CONFIRMRESERVDATE_Label").Visible = True
            Sender.Height = Sender.Constraints.MaxHeight - Sender.GetComponent("usrg_gbTarrif").Height + 20
            ' делаем видимыми элементы выбора номера
            'Sender.GetComponent("usrat_gsIBLookupComboBox_USR_NUMBERKEY_Label").Visible = _
            '  True
            'Sender.GetComponent("usrg_lblNumberName").Visible = True
            'Sender.GetComponent("usrg_tbtSearchRoom").Visible = True
        
          else
            Sender.Caption = "Добавление: Путевка"
            Sender.GetComponent("usrg_gbDocBefore").Visible = True
            Sender.GetComponent("usrg_gbTarrif").Visible = True
            
            ' настройки размеров диалога в зависимости от Курортного сбора в настройках приложения
            if HT_Options.IncludeResortFee then
              Sender.Height = Sender.Constraints.MaxHeight
              Sender.GetComponent("usrg_gbResortFee").Visible = True
            else
              Sender.GetComponent("usrg_gbResortFee").Visible = False
              Sender.Height = Sender.Constraints.MaxHeight - Sender.GetComponent("usrg_gbResortFee").Height - 20
              Dim usrg_gbDocBefore
              Set usrg_gbDocBefore = Sender.GetComponent("usrg_gbDocBefore")
              usrg_gbDocBefore.Height = usrg_gbDocBefore.Constraints.MaxHeight - _
                Sender.GetComponent("usrg_gbResortFee").Height - 20
            end if
        
            ' добавлено скрытие даты подтверждения брони для выписки
            Sender.GetComponent("usrat_xDateDBEdit_USR_CONFIRMRESERVDATE").Visible = False
            Sender.GetComponent("usrat_xDateDBEdit_USR_CONFIRMRESERVDATE_Label").Visible = False
            ' скрываем элементы выбора номера
            'Sender.GetComponent("usrat_gsIBLookupComboBox_USR_NUMBERKEY_Label").Visible = _
            '  False
            'Sender.GetComponent("usrg_lblNumberName").Visible = False
            'Sender.GetComponent("usrg_tbtSearchRoom").Visible = False
          end if
        end sub
        
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147015769_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONSETUPDIALOG"
      FUNCTIONKEY: "147015771_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupDialog"
      OBJECTKEY: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: ~
      EDITIONDATE: 2019-03-11T11:51:27+03:00
  - 
    Properties: 
      Class: "TgdcStorageValue"
      RUID: 147023256_1705915908
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "154996723_1440956890 GLOBAL\\DFM\\Tgdc_dlgAttrUserDefined"
      NAME: "USR$HT_RESERVATION"
      CURR_DATA: ~
      DATA_TYPE: "B"
      DATETIME_DATA: ~
      INT_DATA: ~
      STR_DATA: ~
      EDITIONDATE: 2021-07-05T13:25:39+03:00
      BLOB_DATA: | 
        object gdc_dlgAttrUserDefinedUSR_HT_RESERVATION: Tgdc_dlgAttrUserDefined
          Left = 497
          Top = 190
          Width = 925
          Height = 700
          ActiveControl = nil
          AutoSize = False
          BorderIcons = [biSystemMenu]
          BorderStyle = bsSizeable
          Constraints.MaxHeight = 700
          Position = poScreenCenter
          Scaled = True
          ShowHint = True
          WindowState = wsNormal
          PixelsPerInch = 96
          TextHeight = 13
          object usrg_pnlBottom: TPanel
            Tag = 0
            Left = 0
            Top = 643
            Width = 917
            Height = 30
            Cursor = crDefault
            Hint = ''
            HelpContext = 0
            Align = alBottom
            Alignment = taCenter
            Anchors = [akLeft, akRight, akBottom]
            AutoSize = False
            BevelInner = bvNone
            BevelOuter = bvNone
            BevelWidth = 1
            BorderWidth = 0
            BorderStyle = bsNone
            Caption = ''
            Color = clBtnFace
            Constraints.MaxHeight = 0
            Constraints.MaxWidth = 0
            Constraints.MinHeight = 0
            Constraints.MinWidth = 0
            UseDockManager = True
            DockSite = False
            DragCursor = crDrag
            DragKind = dkDrag
            DragMode = dmManual
            Enabled = True
            FullRepaint = True
            Locked = False
            ParentBiDiMode = True
            ParentColor = False
            ParentCtl3D = True
            ParentFont = True
            ParentShowHint = True
            PopupMenu = nil
            TabOrder = 0
            TabStop = False
            Visible = True
            object usrg_pnlBottomLeft: TPanel
              Tag = 0
              Left = 0
              Top = 0
              Width = 229
              Height = 30
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              Align = alLeft
              Alignment = taCenter
              Anchors = [akLeft, akTop, akBottom]
              AutoSize = False
              BevelInner = bvNone
              BevelOuter = bvNone
              BevelWidth = 1
              BorderWidth = 0
              BorderStyle = bsNone
              Caption = ''
              Color = clBtnFace
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              UseDockManager = True
              DockSite = False
              DragCursor = crDrag
              DragKind = dkDrag
              DragMode = dmManual
              Enabled = True
              FullRepaint = True
              Locked = False
              ParentBiDiMode = True
              ParentColor = False
              ParentCtl3D = True
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabOrder = 0
              TabStop = False
              Visible = True
              object btnAccess: TButton
                Top = 5
                TabOrder = 0
              end
              object btnNew: TButton
                Top = 5
                TabOrder = 1
              end
              object btnHelp: TButton
                Top = 5
                TabOrder = 2
              end
            end
            object usrg_pnlBottomRight: TPanel
              Tag = 0
              Left = 732
              Top = 0
              Width = 185
              Height = 30
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              Align = alRight
              Alignment = taCenter
              Anchors = [akTop, akRight, akBottom]
              AutoSize = False
              BevelInner = bvNone
              BevelOuter = bvNone
              BevelWidth = 1
              BorderWidth = 0
              BorderStyle = bsNone
              Caption = ''
              Color = clBtnFace
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              UseDockManager = True
              DockSite = False
              DragCursor = crDrag
              DragKind = dkDrag
              DragMode = dmManual
              Enabled = True
              FullRepaint = True
              Locked = False
              ParentBiDiMode = True
              ParentColor = False
              ParentCtl3D = True
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabOrder = 1
              TabStop = False
              Visible = True
              object btnCancel: TButton
                Left = 112
                Top = 5
                ModalResult = 2
                TabOrder = 0
              end
              object btnOK: TButton
                Left = 40
                Top = 5
                ModalResult = 1
                TabOrder = 1
              end
            end
          end
          object usrg_pcMain: TPageControl
            Tag = 0
            Left = 0
            Top = 0
            Width = 917
            Height = 643
            Cursor = crDefault
            Hint = ''
            HelpContext = 0
            ActivePage = usrg_tshCommon
            Align = alClient
            Anchors = [akLeft, akTop, akRight, akBottom]
            Constraints.MaxHeight = 0
            Constraints.MaxWidth = 0
            Constraints.MinHeight = 0
            Constraints.MinWidth = 0
            DockSite = False
            DragCursor = crDrag
            DragKind = dkDrag
            DragMode = dmManual
            Enabled = True
            HotTrack = False
            Images = nil
            MultiLine = False
            OwnerDraw = False
            ParentBiDiMode = True
            ParentFont = True
            ParentShowHint = True
            PopupMenu = nil
            RaggedRight = False
            ScrollOpposite = False
            Style = tsTabs
            TabHeight = 0
            TabOrder = 2
            TabPosition = tpTop
            TabStop = True
            TabWidth = 0
            Visible = True
            object usrg_tshCommon: TTabSheet
              Tag = 0
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              BorderWidth = 0
              Caption = 'Основное'
              DragMode = dmManual
              Enabled = True
              Highlighted = False
              ImageIndex = 0
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabVisible = True
              object usrg_Panel1: TPanel
                Tag = 0
                Left = 0
                Top = 0
                Width = 359
                Height = 313
                Cursor = crDefault
                Hint = ''
                HelpContext = 0
                Align = alLeft
                Alignment = taCenter
                Anchors = [akLeft, akTop, akBottom]
                AutoSize = False
                BevelInner = bvNone
                BevelOuter = bvNone
                BevelWidth = 1
                BorderWidth = 0
                BorderStyle = bsNone
                Caption = ''
                Color = clBtnFace
                Constraints.MaxHeight = 0
                Constraints.MaxWidth = 0
                Constraints.MinHeight = 0
                Constraints.MinWidth = 0
                UseDockManager = True
                DockSite = False
                DragCursor = crDrag
                DragKind = dkDrag
                DragMode = dmManual
                Enabled = True
                FullRepaint = True
                Locked = False
                ParentBiDiMode = True
                ParentColor = False
                ParentCtl3D = True
                ParentFont = True
                ParentShowHint = True
                PopupMenu = nil
                TabOrder = 0
                TabStop = False
                Visible = True
                object usrg_gbReservation: TGroupBox
                  Tag = 0
                  Left = 0
                  Top = 49
                  Width = 359
                  Height = 264
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alClient
                  Anchors = [akLeft, akTop, akRight, akBottom]
                  Caption = 'Данные санаторной карты'
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  Font.Charset = RUSSIAN_CHARSET
                  Font.Color = clWindowText
                  Font.Height = -11
                  Font.Name = 'Tahoma'
                  Font.Pitch = fpDefault
                  Font.Style = [fsBold]
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentCtl3D = True
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 0
                  TabStop = False
                  Visible = True
                  object usrg_lblDateBeginName: TLabel
                    Tag = 0
                    Left = 165
                    Top = 18
                    Width = 67
                    Height = 13
                    Cursor = crDefault
                    Hint = ''
                    Align = alNone
                    Alignment = taLeftJustify
                    Anchors = [akLeft, akTop]
                    AutoSize = True
                    Caption = 'понедельник'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FocusControl = nil
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = [fsUnderline]
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    ShowAccelChar = True
                    Transparent = True
                    Layout = tlTop
                    Visible = True
                    WordWrap = False
                  end
                  object usrg_lblDateEndName: TLabel
                    Tag = 0
                    Left = 165
                    Top = 60
                    Width = 41
                    Height = 13
                    Cursor = crDefault
                    Hint = ''
                    Align = alNone
                    Alignment = taLeftJustify
                    Anchors = [akLeft, akTop]
                    AutoSize = True
                    Caption = 'четверг'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FocusControl = nil
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = [fsUnderline]
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    ShowAccelChar = True
                    Transparent = True
                    Layout = tlTop
                    Visible = True
                    WordWrap = False
                  end
                  object usrg_lblNumberName: TLabel
                    Tag = 0
                    Left = 122
                    Top = 145
                    Width = 104
                    Height = 21
                    Cursor = crDefault
                    Hint = ''
                    Align = alNone
                    Alignment = taCenter
                    Anchors = [akLeft, akTop]
                    AutoSize = False
                    Caption = '06'
                    Color = clWhite
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FocusControl = nil
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    ShowAccelChar = True
                    Transparent = False
                    Layout = tlCenter
                    Visible = True
                    WordWrap = False
                  end
                  object usrat_xDateDBEdit_USR_DATEBEGIN_Label: TLabel
                    Left = 11
                    Top = 17
                    Width = 68
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_xDateDBEdit_USR_DATEEND_Label: TLabel
                    Left = 8
                    Top = 62
                    Width = 71
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_NUMBERTYPEKEY_Label: TLabel
                    Left = 8
                    Top = 122
                    Width = 61
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_NUMBERKEY_Label: TLabel
                    Left = 8
                    Top = 149
                    Width = 35
                    Caption = 'Номер:'
                    Font.Style = []
                    ParentFont = False
                    Visible = True
                  end
                  object usrat_DBEdit_USR_COUNTNIGHT_Label: TLabel
                    Left = 42
                    Top = 39
                    Width = 34
                    Caption = 'ночей:'
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_REQUESTKEY_Label: TLabel
                    Top = 199
                    Width = 45
                  end
                  object usrat_gsIBLookupComboBox_USR_CONTROCCKEY_Label: TLabel
                    Top = 222
                    Width = 54
                    Caption = 'Договор:'
                  end
                  object usrat_DBEdit_Z_USR_TARRIFTYPEKEY_USR_NAME_Label: TLabel
                    Left = 8
                    Top = 98
                    Width = 87
                  end
                  object usrat_gsIBLookupComboBox_USR_PAYMENTMETHODKEY_Label: TLabel
                    Left = 167
                    Top = 199
                    Width = 92
                  end
                  object usrat_gsIBLookupComboBox_USR_HTINVOICEKEY_Label: TLabel
                    Left = 167
                    Top = 222
                    Width = 93
                    Caption = 'Счет (гост. пр.):'
                  end
                  object usrg_tbtSearchRoom: TTBToolbar
                    Tag = 0
                    Left = 230
                    Top = 145
                    Width = 69
                    Height = 22
                    Cursor = crDefault
                    HelpContext = 0
                    ActivateParent = True
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    AutoResize = True
                    BorderStyle = bsSingle
                    Caption = 'usrg_tbtSearchRoom'
                    ChevronMoveItems = True
                    ChevronPriorityForNewItems = tbcpHighest
                    CloseButton = False
                    CloseButtonWhenDocked = False
                    Color = clBtnFace
                    DefaultDock = nil
                    DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                    DockMode = dmCannotFloatOrChangeDocks
                    DockPos = -1
                    DockRow = 0
                    DragHandleStyle = dhSingle
                    FloatingMode = fmOnTopOfParentForm
                    FloatingWidth = 0
                    FullSize = False
                    HideWhenInactive = True
                    Images = usrg_ilUser_16
                    LastDock = nil
                    LinkSubitems = nil
                    MenuBar = False
                    Options = []
                    ParentFont = True
                    ParentShowHint = False
                    PopupMenu = nil
                    ProcessShortCuts = False
                    Resizable = True
                    ShowCaption = True
                    ShowHint = True
                    ShrinkMode = tbsmChevron
                    SmoothDrag = True
                    Stretch = False
                    SystemFont = True
                    TabOrder = 2
                    UpdateActions = True
                    UseLastDock = True
                    Visible = True
                    SavedAtRunTime = True
                    object usrg_TBItem44: TTBItem
                      Tag = 0
                      Action = usrg_actSearchAvailableRoom
                      AutoCheck = False
                      DisplayMode = nbdmDefault
                      GroupIndex = 0
                      Images = nil
                      InheritOptions = True
                      MaskOptions = []
                      Options = []
                      RadioItem = False
                    end
                    object usrg_tbiLockSelectedRoom: TTBItem
                      Tag = 0
                      Action = usrg_actLockSelectedRoom
                      AutoCheck = True
                      DisplayMode = nbdmDefault
                      GroupIndex = 0
                      Images = nil
                      InheritOptions = True
                      MaskOptions = []
                      Options = []
                      RadioItem = False
                    end
                    object usrg_TBItem84: TTBItem
                      Tag = 0
                      Action = usrg_actClearSelectedRoom
                      AutoCheck = False
                      DisplayMode = nbdmDefault
                      GroupIndex = 0
                      Images = nil
                      InheritOptions = True
                      MaskOptions = []
                      Options = []
                      RadioItem = False
                    end
                  end
                  object usrat_xDateDBEdit_USR_DATEBEGIN: TxDateDBEdit
                    Left = 85
                    Top = 14
                    Width = 75
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 0
                  end
                  object usrat_xDateDBEdit_USR_DATEEND: TxDateDBEdit
                    Left = 85
                    Top = 58
                    Width = 75
                    DragMode = dmManual
                    Enabled = True
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 1
                  end
                  object usrat_gsIBLookupComboBox_USR_NUMBERTYPEKEY: TgsIBLookupComboBox
                    Left = 122
                    Top = 118
                    Width = 83
                    ReadOnly = False
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 3
                  end
                  object usrat_DBCheckBox_USR_ISADDITIONALPLACE: TDBCheckBox
                    Left = 8
                    Top = 171
                    Width = 173
                    Action = usrg_actAddPlace
                    Font.Style = []
                    ParentFont = False
                    ReadOnly = True
                    TabOrder = 4
                  end
                  object usrat_DBEdit_USR_COUNTNIGHT: TxDBCalculatorEdit
                    Left = 85
                    Top = 36
                    Width = 75
                    Cursor = crIBeam
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 5
                  end
                  object usrat_DBCheckBox_USR_ISEARLY: TDBCheckBox
                    Left = 241
                    Top = 18
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 6
                  end
                  object usrat_DBCheckBox_USR_ISLATELY: TDBCheckBox
                    Left = 241
                    Top = 54
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 7
                  end
                  object usrat_gsIBLookupComboBox_USR_REQUESTKEY: TgsIBLookupComboBox
                    Left = 66
                    Top = 195
                    Width = 96
                    ListTable = 
                      'USR$SAN_REQUEST r LEFT JOIN GD_DOCUMENT d ON d.ID = r.DOCUMENTKE' +
                      'Y'
                    ListField = 'd.NUMBER'
                    KeyField = 'DOCUMENTKEY'
                    TabOrder = 8
                  end
                  object usrat_gsIBLookupComboBox_USR_CONTROCCKEY: TgsIBLookupComboBox
                    Left = 66
                    Top = 218
                    Width = 96
                    ListTable = 
                      'USR$SAN_CONTROCC inv join gd_document doc on doc.id = inv.docume' +
                      'ntkey'
                    ListField = 'doc.NUMBER'
                    KeyField = 'doc.ID'
                    TabOrder = 9
                  end
                  object usrat_gsIBLookupComboBox_USR_TARRIFTYPEKEY: TgsIBLookupComboBox
                    Left = 122
                    Top = 95
                    Width = 151
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 10
                  end
                  object usrat_gsIBLookupComboBox_USR_PAYMENTMETHODKEY: TgsIBLookupComboBox
                    Left = 263
                    Top = 195
                    Width = 92
                    TabOrder = 11
                  end
                  object usrat_gsIBLookupComboBox_USR_HTINVOICEKEY: TgsIBLookupComboBox
                    Left = 263
                    Top = 218
                    Width = 92
                    Fields = 'd.DOCUMENTDATE, c.NAME'
                    ListTable = 
                      'USR$HT_INVOICE inv LEFT JOIN GD_DOCUMENT d ON inv.DOCUMENTKEY  =' +
                      ' d.ID LEFT JOIN GD_CONTACT c ON c.ID = inv.USR$CONTACTKEY'
                    ListField = 'd.NUMBER'
                    KeyField = 'd.ID'
                    gdClassName = 'TgdcUserDocument'
                    SubType = '147408025_815437717'
                    TabOrder = 12
                  end
                  object usrat_DBCheckBox_USR_ISLATEARRIVAL: TDBCheckBox
                    Left = 241
                    Top = 36
                    Width = 114
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 13
                  end
                  object usrat_DBCheckBox_USR_ISEARLYDEP: TDBCheckBox
                    Left = 241
                    Top = 72
                    Width = 116
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 14
                  end
                end
                object usrg_Panel14: TPanel
                  Tag = 0
                  Left = 0
                  Top = 0
                  Width = 359
                  Height = 49
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alTop
                  Alignment = taCenter
                  Anchors = [akLeft, akTop, akRight]
                  AutoSize = False
                  BevelInner = bvNone
                  BevelOuter = bvNone
                  BevelWidth = 1
                  BorderWidth = 0
                  BorderStyle = bsNone
                  Caption = ''
                  Color = clBtnFace
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  UseDockManager = True
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FullRepaint = True
                  Locked = False
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 1
                  TabStop = False
                  Visible = True
                  object usrat_xDateDBEdit_USR_CREATIONDATE_Label: TLabel
                    Left = 5
                    Top = 6
                    Width = 80
                    Caption = 'Дата создания:'
                  end
                  object usrat_DBEdit_USR_NUMBER_Label: TLabel
                    Left = 5
                    Top = 31
                    Width = 35
                    Caption = 'Номер:'
                  end
                  object usrat_DBEdit_USR_PRINT_NUMBER_Label: TLabel
                    Left = 169
                    Top = 29
                  end
                  object usrat_gsIBLookupComboBox_USR_STATENUMBERKEY_Label: TLabel
                    Left = 208
                    Top = 6
                    Width = 57
                    Caption = 'Состояние:'
                    Visible = False
                  end
                  object usrat_xDateDBEdit_USR_CREATIONDATE: TxDateDBEdit
                    Left = 85
                    Top = 2
                    Width = 75
                    Kind = kDate
                    EditMask = '!99\.99\.9999;1;_'
                    MaxLength = 10
                    TabOrder = 0
                  end
                  object usrat_DBEdit_USR_NUMBER: TDBEdit
                    Left = 85
                    Top = 25
                    Width = 75
                    TabOrder = 1
                    Visible = True
                  end
                  object usrat_DBEdit_USR_PRINT_NUMBER: TDBEdit
                    Left = 267
                    Top = 25
                    Width = 87
                    TabOrder = 2
                  end
                  object usrat_gsIBLookupComboBox_USR_STATENUMBERKEY: TgsIBLookupComboBox
                    Left = 267
                    Top = 2
                    Width = 89
                    Condition = 'USR$TYPE = 2'
                    TabOrder = 3
                    Visible = False
                  end
                end
              end
              object usrg_Panel12: TPanel
                Tag = 0
                Left = 359
                Top = 0
                Width = 550
                Height = 313
                Cursor = crDefault
                Hint = ''
                HelpContext = 0
                Align = alClient
                Alignment = taCenter
                Anchors = [akLeft, akTop, akRight, akBottom]
                AutoSize = False
                BevelInner = bvNone
                BevelOuter = bvNone
                BevelWidth = 1
                BorderWidth = 0
                BorderStyle = bsNone
                Caption = ''
                Color = clBtnFace
                Constraints.MaxHeight = 0
                Constraints.MaxWidth = 0
                Constraints.MinHeight = 0
                Constraints.MinWidth = 0
                UseDockManager = True
                DockSite = False
                DragCursor = crDrag
                DragKind = dkDrag
                DragMode = dmManual
                Enabled = True
                FullRepaint = True
                Locked = False
                ParentBiDiMode = True
                ParentColor = False
                ParentCtl3D = True
                ParentFont = True
                ParentShowHint = True
                PopupMenu = nil
                TabOrder = 1
                TabStop = False
                Visible = True
                object usrg_gbContact: TGroupBox
                  Tag = 0
                  Left = 0
                  Top = 49
                  Width = 550
                  Height = 264
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alClient
                  Anchors = [akLeft, akTop, akRight, akBottom]
                  Caption = ' Контактные данные '
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  Font.Charset = RUSSIAN_CHARSET
                  Font.Color = clWindowText
                  Font.Height = -11
                  Font.Name = 'Tahoma'
                  Font.Pitch = fpDefault
                  Font.Style = [fsBold]
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentCtl3D = True
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 0
                  TabStop = False
                  Visible = True
                  object usrat_gsIBLookupComboBox_USR_CONTACTKEY_Label: TLabel
                    Left = 10
                    Top = 18
                    Width = 33
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrg_pnlGuestInfo: TPanel
                    Tag = 0
                    Left = 2
                    Top = 61
                    Width = 546
                    Height = 201
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alBottom
                    Alignment = taCenter
                    Anchors = [akLeft, akRight, akBottom]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvLowered
                    BevelWidth = 1
                    BorderWidth = 3
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = []
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 1
                    TabStop = False
                    Visible = True
                    object usrg_lblGuestInfo: TLabel
                      Tag = 0
                      Left = 4
                      Top = 4
                      Width = 538
                      Height = 193
                      Cursor = crDefault
                      Hint = ''
                      Align = alClient
                      Alignment = taLeftJustify
                      Anchors = [akLeft, akTop, akRight, akBottom]
                      AutoSize = False
                      Caption = 
                        'Гражданство: Израиль'#13#10'Адрес: Израиль, г. Явне'#13#10'Телефон: +3752916' +
                        '88734'#13#10'Номер паспорта: 31133787'#13#10'День рождения: 04.06.1949 Полны' +
                        'х лет на день заезда: 72'#13#10'Место работы: < не указано >'#13#10'Подразде' +
                        'ление: < не указано >'#13#10'ЧЕРНЫЙ СПИСОК: '
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FocusControl = nil
                      ParentBiDiMode = True
                      ParentColor = True
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      ShowAccelChar = True
                      Transparent = False
                      Layout = tlTop
                      Visible = True
                      WordWrap = True
                    end
                  end
                  object usrat_gsIBLookupComboBox_USR_CONTACTKEY: TgsIBLookupComboBox
                    Left = 150
                    Top = 14
                    Width = 244
                    Transaction = ibtrCommon
                    Fields = 'vi.DESCRIPTION'
                    ListTable = 
                      'GD_CONTACT c LEFT JOIN USR$VESTA_P_CONTACTINFO (c.ID) vi ON 1 = ' +
                      '1'
                    ListField = 'C.NAME'
                    KeyField = 'C.ID'
                    SortOrder = soNone
                    SortField = 'c.Parent, c.Name'
                    Condition = 
                      'c.contacttype = 2  and not exists (select 1 from gd_contact emp ' +
                      'join gd_contact con on emp.LB >= con.LB and emp.RB <= con.RB  wh' +
                      'ere con.ID = <companykey/> and  emp.id = c.ID)'
                    SubType = 'HT_GUEST'
                    ReadOnly = False
                    Enabled = True
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 0
                  end
                end
                object usrg_Panel13: TPanel
                  Tag = 0
                  Left = 0
                  Top = 0
                  Width = 550
                  Height = 49
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alTop
                  Alignment = taCenter
                  Anchors = [akLeft, akTop, akRight]
                  AutoSize = False
                  BevelInner = bvNone
                  BevelOuter = bvNone
                  BevelWidth = 1
                  BorderWidth = 0
                  BorderStyle = bsNone
                  Caption = ''
                  Color = clBtnFace
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  UseDockManager = True
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FullRepaint = True
                  Locked = False
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 1
                  TabStop = False
                  Visible = True
                  object usrat_gsIBLookupComboBox_USR_TYPE_PERMIT_Label: TLabel
                    Top = 29
                  end
                  object usrat_xDateDBEdit_USR_DATEBEGINFACT_Label: TLabel
                    Top = 7
                  end
                  object usrat_gsIBLookupComboBox_USR_TYPE_PERMIT: TgsIBLookupComboBox
                    Left = 149
                    Top = 26
                    Width = 245
                    Condition = #39'28.06.2021'#39' between usr$datebegin and usr$dateend'
                    TabOrder = 0
                  end
                  object usrat_gsIBLookupComboBox_USR_STATEKEY: TgsIBLookupComboBox
                    Left = 259
                    Top = 3
                    Width = 135
                    TabOrder = 1
                  end
                  object usrat_xDateDBEdit_USR_DATEBEGINFACT: TxDateDBEdit
                    Left = 149
                    Top = 3
                    Width = 69
                    TabStop = False
                    TabOrder = 2
                  end
                end
              end
              object usrg_USR_HT_RESERVATION_Panel1: TPanel
                Tag = 0
                Left = 0
                Top = 313
                Width = 909
                Height = 302
                Cursor = crDefault
                Hint = ''
                HelpContext = 0
                Align = alBottom
                Alignment = taCenter
                Anchors = [akLeft, akRight, akBottom]
                AutoSize = False
                BevelInner = bvNone
                BevelOuter = bvRaised
                BevelWidth = 1
                BorderWidth = 0
                BorderStyle = bsNone
                Caption = ''
                Color = clBtnFace
                Constraints.MaxHeight = 0
                Constraints.MaxWidth = 0
                Constraints.MinHeight = 0
                Constraints.MinWidth = 0
                UseDockManager = True
                DockSite = False
                DragCursor = crDrag
                DragKind = dkDrag
                DragMode = dmManual
                Enabled = True
                FullRepaint = True
                Locked = False
                ParentBiDiMode = True
                ParentColor = False
                ParentCtl3D = True
                ParentFont = True
                ParentShowHint = True
                PopupMenu = nil
                TabOrder = 2
                TabStop = False
                Visible = True
                object usrg_gbTarrif: TGroupBox
                  Tag = 0
                  Left = 1
                  Top = 0
                  Width = 907
                  Height = 301
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alBottom
                  Anchors = [akLeft, akTop, akRight]
                  Caption = 'Расчёт стоимости'
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  Font.Charset = RUSSIAN_CHARSET
                  Font.Color = clWindowText
                  Font.Height = -11
                  Font.Name = 'Tahoma'
                  Font.Pitch = fpDefault
                  Font.Style = [fsBold]
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentCtl3D = True
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 0
                  TabStop = False
                  Visible = True
                  object usrg_Label3: TLabel
                    Tag = 0
                    Left = 578
                    Top = 20
                    Width = 43
                    Height = 13
                    Cursor = crDefault
                    Hint = ''
                    Align = alNone
                    Alignment = taLeftJustify
                    Anchors = [akLeft, akTop]
                    AutoSize = True
                    Caption = 'Валюта:'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FocusControl = nil
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = []
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    ShowAccelChar = True
                    Transparent = True
                    Layout = tlTop
                    Visible = True
                    WordWrap = False
                  end
                  object usrg_lblCurrencyName: TLabel
                    Tag = 0
                    Left = 672
                    Top = 15
                    Width = 40
                    Height = 21
                    Cursor = crDefault
                    Hint = ''
                    Align = alNone
                    Alignment = taCenter
                    Anchors = [akLeft, akTop]
                    AutoSize = False
                    Caption = 'BYN'
                    Color = 11141119
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FocusControl = nil
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    ShowAccelChar = True
                    Transparent = False
                    Layout = tlCenter
                    Visible = True
                    WordWrap = False
                  end
                  object usrat_gsIBLookupComboBox_USR_CLIENTCATEGORYKEY_Label: TLabel
                    Left = 7
                    Top = 20
                    Width = 135
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_PERMITSUPPLYOUTLET_Label: TLabel
                    Left = 7
                    Top = 44
                    Width = 83
                    Caption = 'Место продажи:'
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_DBEdit_USR_TOTALPARTSUM_Label: TLabel
                    Left = 366
                    Top = 20
                    Width = 100
                    Caption = 'Цена со скидкой:'
                  end
                  object usrat_DBEdit_USR_SUMALL_Label: TLabel
                    Left = 366
                    Top = 44
                    Width = 98
                    Caption = 'Итоговая сумма:'
                  end
                  object usrg_tbtChooseCurrency: TTBToolbar
                    Tag = 0
                    Left = 715
                    Top = 14
                    Width = 23
                    Height = 22
                    Cursor = crDefault
                    HelpContext = 0
                    ActivateParent = True
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    AutoResize = True
                    BorderStyle = bsSingle
                    Caption = 'usrg_tbtSearchTarrif'
                    ChevronMoveItems = True
                    ChevronPriorityForNewItems = tbcpHighest
                    CloseButton = False
                    CloseButtonWhenDocked = False
                    Color = clBtnFace
                    DefaultDock = nil
                    DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                    DockMode = dmCannotFloatOrChangeDocks
                    DockPos = -1
                    DockRow = 0
                    DragHandleStyle = dhSingle
                    FloatingMode = fmOnTopOfParentForm
                    FloatingWidth = 0
                    FullSize = False
                    HideWhenInactive = True
                    Images = usrg_ilUser_16
                    LastDock = nil
                    LinkSubitems = nil
                    MenuBar = False
                    Options = []
                    ParentFont = True
                    ParentShowHint = False
                    PopupMenu = nil
                    ProcessShortCuts = False
                    Resizable = True
                    ShowCaption = True
                    ShowHint = True
                    ShrinkMode = tbsmChevron
                    SmoothDrag = True
                    Stretch = False
                    SystemFont = True
                    TabOrder = 2
                    UpdateActions = True
                    UseLastDock = True
                    Visible = True
                    SavedAtRunTime = True
                    object usrg_TBItem85: TTBItem
                      Tag = 0
                      Action = usrg_actChooseCurrency
                      AutoCheck = False
                      DisplayMode = nbdmDefault
                      GroupIndex = 0
                      Images = nil
                      InheritOptions = True
                      MaskOptions = []
                      Options = []
                      RadioItem = False
                    end
                  end
                  object usrg_gbResortFee: TGroupBox
                    Tag = 0
                    Left = 7
                    Top = 67
                    Width = 346
                    Height = 126
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    Caption = 'Курортный сбор'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = [fsBold]
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentCtl3D = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 3
                    TabStop = False
                    Visible = True
                    object usrat_DBEdit_USR_RESORTTAXRATE_Label: TLabel
                      Left = 7
                      Top = 49
                      Width = 47
                      Caption = '% сбора:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_RESORTTAXSUM_Label: TLabel
                      Left = 7
                      Top = 72
                      Width = 35
                      Caption = 'Сумма:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_xDateDBEdit_USR_DATEPAYRESORTTAX_Label: TLabel
                      Left = 188
                      Top = 49
                      Width = 71
                      Caption = 'Дата оплаты:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_RESORTTAXSUMNCU_Label: TLabel
                      Left = 188
                      Top = 72
                      Width = 66
                      Caption = 'Сумма в BYN:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_COMMENTTAX_Label: TLabel
                      Left = 7
                      Top = 95
                      Width = 71
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrg_USR_HT_RESERVATION_DBMemo2: TDBMemo
                      Tag = 0
                      Left = 83
                      Top = 91
                      Width = 251
                      Height = 25
                      Cursor = crDefault
                      Hint = 'Комментарий к кур. сбору'
                      HelpContext = 0
                      TabStop = True
                      Align = alNone
                      Alignment = taLeftJustify
                      Anchors = [akLeft, akTop]
                      AutoDisplay = True
                      BorderStyle = bsSingle
                      Color = clWindow
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DataField = 'USR$COMMENTTAX'
                      DataSource = dsgdcBase
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      Font.Style = []
                      ImeMode = imDontCare
                      ImeName = ''
                      MaxLength = 0
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      ReadOnly = False
                      ScrollBars = ssNone
                      TabOrder = 5
                      Visible = True
                      WantTabs = False
                      WordWrap = True
                    end
                    object usrat_DBCheckBox_USR_RESORT_TAX: TDBCheckBox
                      Left = 7
                      Top = 20
                      Width = 195
                      Action = nil
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 0
                    end
                    object usrat_DBEdit_USR_RESORTTAXRATE: TxDBCalculatorEdit
                      Left = 83
                      Top = 45
                      Width = 68
                      Cursor = crIBeam
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 1
                    end
                    object usrat_DBEdit_USR_RESORTTAXSUM: TxDBCalculatorEdit
                      Left = 83
                      Top = 68
                      Width = 68
                      Cursor = crIBeam
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 3
                    end
                    object usrat_xDateDBEdit_USR_DATEPAYRESORTTAX: TxDateDBEdit
                      Left = 267
                      Top = 45
                      Width = 68
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 2
                    end
                    object usrat_DBEdit_USR_RESORTTAXSUMNCU: TxDBCalculatorEdit
                      Left = 267
                      Top = 68
                      Width = 68
                      Cursor = crArrow
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 4
                    end
                  end
                  object usrg_USR_HT_RESERVATION_GroupBox1: TGroupBox
                    Tag = 0
                    Left = 358
                    Top = 67
                    Width = 210
                    Height = 126
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    Caption = 'Вознаграждение комиссионерам'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = [fsBold]
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentCtl3D = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 5
                    TabStop = False
                    Visible = True
                    object usrat_DBEdit_USR_PERCCOMMIS_Label: TLabel
                      Left = 8
                      Top = 26
                      Width = 103
                      Caption = '% вознаграждения:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_SUMCOMMIS_Label: TLabel
                      Left = 8
                      Top = 49
                      Width = 35
                      Caption = 'Сумма:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_PERCCOMMIS: TxDBCalculatorEdit
                      Left = 115
                      Top = 22
                      Width = 68
                      Cursor = crArrow
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 0
                    end
                    object usrat_DBEdit_USR_SUMCOMMIS: TxDBCalculatorEdit
                      Left = 115
                      Top = 45
                      Width = 68
                      Cursor = crIBeam
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 1
                    end
                    object usrat_DBCheckBox_USR_MANUALCOMPERC: TDBCheckBox
                      Left = 8
                      Top = 71
                      Width = 173
                      Caption = '% указывается вручную'
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 2
                    end
                  end
                  object usrg_USR_HT_RESERVATION_GroupBox2: TGroupBox
                    Tag = 0
                    Left = 574
                    Top = 67
                    Width = 175
                    Height = 228
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    Caption = 'Скидка'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    Font.Charset = RUSSIAN_CHARSET
                    Font.Color = clWindowText
                    Font.Height = -11
                    Font.Name = 'Tahoma'
                    Font.Pitch = fpDefault
                    Font.Style = [fsBold]
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentCtl3D = True
                    ParentFont = False
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 6
                    TabStop = False
                    Visible = True
                    object usrat_DBEdit_USR_PERCDISCOUNT_Label: TLabel
                      Left = 8
                      Top = 26
                      Width = 54
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_SUMDISCOUNT_Label: TLabel
                      Left = 8
                      Top = 72
                      Width = 35
                      Caption = 'Сумма:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrg_grResDisc: TgsIBGrid
                      Tag = 0
                      Left = 9
                      Top = 123
                      Width = 157
                      Height = 99
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      TabStop = True
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      BorderStyle = bsSingle
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DataSource = usrg_dsResDisc
                      DefaultDrawing = True
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      ImeMode = imDontCare
                      ImeName = ''
                      Options = [dgEditing, dgTitles, dgIndicator, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      ReadOnly = False
                      TabOrder = 2
                      Visible = True
                      TableFont.Height = -11
                      TableFont.Style = [fsBold]
                      TableColor = clWindow
                      SelectedFont.Height = -11
                      SelectedColor = clHighlight
                      TitleColor = clBtnFace
                      RefreshType = rtCloseOpen
                      Striped = True
                      StripeOdd = 15201271
                      StripeEven = 14084071
                      InternalMenuKind = imkWithSeparator
                      Expands = <>
                      ExpandsActive = False
                      ExpandsSeparate = False
                      TitlesExpanding = False
                      Conditions = <>
                      ConditionsActive = False
                      CheckBox.DisplayField = ''
                      CheckBox.FieldName = ''
                      CheckBox.Visible = False
                      CheckBox.FirstColumn = False
                      ScaleColumns = True
                      MinColWidth = 40
                      ToolBar = nil
                      FinishDrawing = True
                      RememberPosition = True
                      SaveSettings = True
                      ColumnEditors = <>
                      Aliases = <>
                      ShowFooter = False
                      ShowTotals = True
                      Columns = <
                        item
                          Expanded = False
                          FieldName = 'Z_USR$DISCOUNTKEY_USR$REASON'
                          Title.Caption = 'Основание'
                          Width = 140
                          Visible = True
                        end
                        item
                          Expanded = False
                          FieldName = 'ID'
                          ReadOnly = True
                          Title.Caption = 'Идентификатор'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'Z_USR$RESERVATIONKEY_USR$NUMBER'
                          Title.Caption = 'Номер подтверждения'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$DISCOUNTKEY'
                          Title.Caption = 'Скидка для бронирования'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'EDITIONDATE'
                          ReadOnly = True
                          Title.Caption = 'Дата модификации'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$RESERVATIONKEY'
                          Title.Caption = 'Hotel. Документ бронирования'
                          Width = -1
                          Visible = False
                        end>
                    end
                    object usrg_USR_HT_RESERVATION_Button1: TButton
                      Tag = 0
                      Left = 133
                      Top = 20
                      Width = 30
                      Height = 23
                      Cursor = crDefault
                      Action = usrg_addDisc
                      Anchors = [akLeft, akTop]
                      Cancel = False
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      Default = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Font.Style = []
                      ModalResult = 0
                      ParentBiDiMode = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 3
                      TabStop = True
                    end
                    object usrat_DBEdit_USR_PERCDISCOUNT: TxDBCalculatorEdit
                      Left = 75
                      Top = 22
                      Width = 52
                      Cursor = crIBeam
                      TabStop = True
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 0
                    end
                    object usrat_DBEdit_USR_SUMDISCOUNT: TxDBCalculatorEdit
                      Left = 75
                      Top = 68
                      Width = 90
                      Cursor = crArrow
                      TabStop = False
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 1
                    end
                    object usrat_DBCheckBox_USR_MANUALDISCSUM: TDBCheckBox
                      Left = 8
                      Top = 92
                      Width = 155
                      Caption = 'Сумма скидки вручную'
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 4
                    end
                    object usrat_DBEdit_USR_PERC_LOYALTY: TxDBCalculatorEdit
                      Left = 75
                      Top = 45
                      Width = 52
                      Cursor = crIBeam
                      Color = clMenu
                      Font.Style = []
                      ParentFont = False
                      ReadOnly = True
                      TabOrder = 5
                    end
                    object usrat_DBCheckBox_USR_CALCLOYALTYDISC: TDBCheckBox
                      Left = 8
                      Top = 47
                      Width = 57
                      Caption = 'Доп.%'
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 6
                    end
                  end
                  object usrg_grBoxAdd: TGroupBox
                    Tag = 0
                    Left = 7
                    Top = 194
                    Width = 562
                    Height = 101
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    Caption = 'Дополнительные услуги'
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    ParentBiDiMode = True
                    ParentColor = True
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 9
                    TabStop = False
                    Visible = True
                    object usrg_grAdd: TgsIBGrid
                      Tag = 0
                      Left = 6
                      Top = 16
                      Width = 445
                      Height = 80
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      TabStop = True
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      BorderStyle = bsSingle
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DataSource = usrg_dsAdd
                      DefaultDrawing = True
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      ImeMode = imDontCare
                      ImeName = ''
                      Options = [dgEditing, dgTitles, dgIndicator, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      ReadOnly = False
                      TabOrder = 0
                      Visible = True
                      TableFont.Charset = RUSSIAN_CHARSET
                      TableFont.Color = clWindowText
                      TableFont.Height = -11
                      TableFont.Name = 'Tahoma'
                      TableFont.Pitch = fpDefault
                      TableFont.Style = [fsBold]
                      TableColor = clWindow
                      SelectedFont.Charset = RUSSIAN_CHARSET
                      SelectedFont.Color = clHighlightText
                      SelectedFont.Height = -11
                      SelectedFont.Name = 'Tahoma'
                      SelectedFont.Pitch = fpDefault
                      SelectedFont.Style = [fsBold]
                      SelectedColor = clHighlight
                      TitleFont.Charset = RUSSIAN_CHARSET
                      TitleFont.Color = clWindowText
                      TitleFont.Height = -11
                      TitleFont.Name = 'Tahoma'
                      TitleFont.Pitch = fpDefault
                      TitleFont.Style = [fsBold]
                      TitleColor = clBtnFace
                      RefreshType = rtCloseOpen
                      Striped = True
                      StripeOdd = 15201271
                      StripeEven = 14084071
                      InternalMenuKind = imkWithSeparator
                      Expands = <>
                      ExpandsActive = False
                      ExpandsSeparate = False
                      TitlesExpanding = False
                      Conditions = <>
                      ConditionsActive = False
                      CheckBox.DisplayField = ''
                      CheckBox.FieldName = ''
                      CheckBox.Visible = False
                      CheckBox.FirstColumn = False
                      ScaleColumns = True
                      MinColWidth = 40
                      ToolBar = nil
                      FinishDrawing = True
                      RememberPosition = True
                      SaveSettings = True
                      ColumnEditors = <>
                      Aliases = <>
                      ShowFooter = False
                      ShowTotals = True
                      Columns = <
                        item
                          Expanded = False
                          FieldName = 'Z_USR$GOODKEY_NAME'
                          Title.Caption = 'Услуга'
                          Width = 106
                          Visible = True
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$SUM'
                          Title.Caption = 'RUR'
                          Width = 47
                          Visible = True
                          TotalType = ttSum
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$SUMCUR'
                          Title.Caption = 'VAL'
                          Width = 57
                          Visible = True
                          TotalType = ttSum
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$SUMNCU'
                          Title.Caption = 'BYN'
                          Width = 55
                          Visible = True
                          TotalType = ttSum
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$NDS'
                          Title.Caption = '% НДС'
                          Width = 41
                          Visible = True
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$SUMNDS'
                          Title.Caption = 'НДС VAL'
                          Width = 62
                          Visible = True
                          TotalType = ttSum
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$SUMNDSNCU'
                          Title.Caption = 'НДС BYN'
                          Width = 54
                          Visible = True
                          TotalType = ttSum
                        end
                        item
                          Expanded = False
                          FieldName = 'ID'
                          ReadOnly = True
                          Title.Caption = 'Идентификатор'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'Z_USR$RESERVATIONKEY_USR$NUMBER'
                          Title.Caption = 'Номер подтверждения'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'EDITIONDATE'
                          ReadOnly = True
                          Title.Caption = 'Дата модификации'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$RESERVATIONKEY'
                          Title.Caption = 'Hotel. Документ бронирования'
                          Width = -1
                          Visible = False
                        end
                        item
                          Expanded = False
                          FieldName = 'USR$GOODKEY'
                          Title.Caption = 'Доп. услуга'
                          Width = -1
                          Visible = False
                        end>
                    end
                    object usrg_USR_HT_RESERVATION_Button2: TButton
                      Tag = 0
                      Left = 458
                      Top = 16
                      Width = 94
                      Height = 23
                      Cursor = crDefault
                      Action = usrg_actAddAdd
                      Anchors = [akLeft, akTop]
                      Cancel = False
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      Default = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      ModalResult = 0
                      ParentBiDiMode = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 1
                      TabStop = True
                    end
                  end
                  object usrat_gsIBLookupComboBox_USR_CLIENTCATEGORYKEY: TgsIBLookupComboBox
                    Left = 146
                    Top = 16
                    Width = 208
                    SortField = 'USR$SORTNUMBER'
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 0
                  end
                  object usrat_gsIBLookupComboBox_USR_PERMITSUPPLYOUTLET: TgsIBLookupComboBox
                    Left = 146
                    Top = 40
                    Width = 208
                    ListTable = 'gd_contact'
                    ListField = 'name'
                    SortField = 'usr$san_sortnumber, name'
                    Condition = 'usr$san_ispermitsupplyplace = 1'
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 1
                  end
                  object usrat_DBEdit_USR_TOTALPARTSUM: TxDBCalculatorEdit
                    Left = 479
                    Top = 16
                    Width = 90
                    Cursor = crIBeam
                    TabStop = False
                    Color = clWindow
                    ReadOnly = True
                    TabOrder = 4
                  end
                  object usrat_DBCheckBox_USR_MANUALPRICE: TDBCheckBox
                    Left = 578
                    Top = 41
                    Width = 168
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 7
                  end
                  object usrat_DBEdit_USR_SUMALL: TxDBCalculatorEdit
                    Left = 479
                    Top = 40
                    Width = 90
                    Cursor = crArrow
                    TabStop = False
                    Color = clMenu
                    ReadOnly = True
                    TabOrder = 8
                  end
                end
              end
            end
            object usrg_tshParameters: TTabSheet
              Tag = 0
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              BorderWidth = 0
              Caption = 'Параметры'
              DragMode = dmManual
              Enabled = True
              Highlighted = False
              ImageIndex = 0
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabVisible = False
              object pnlMain: TPanel
                Left = 0
                Top = 0
                Width = 909
                Height = 615
                Align = alClient
                Anchors = [akLeft, akTop, akRight, akBottom]
                BevelOuter = bvRaised
                BorderWidth = 0
                object usrat_gsIBLookupComboBox_USR_DISCOUNTKEY_Label: TLabel
                  Left = 8
                  Top = 76
                  Width = 59
                  Caption = 'Основание:'
                  Font.Style = []
                  ParentFont = False
                end
                object usrg_pnlTopHelper: TPanel
                  Tag = 0
                  Left = 1
                  Top = 1
                  Width = 712
                  Height = 399
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  BevelInner = bvNone
                  BevelOuter = bvNone
                  BevelWidth = 1
                  BorderWidth = 3
                  BorderStyle = bsNone
                  Caption = ''
                  Color = clBtnFace
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  UseDockManager = True
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FullRepaint = True
                  Locked = False
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 0
                  TabStop = False
                  Visible = True
                  object usrg_pnlContactHelper: TPanel
                    Tag = 0
                    Left = 3
                    Top = 3
                    Width = 311
                    Height = 367
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alLeft
                    Alignment = taCenter
                    Anchors = [akLeft, akTop, akBottom]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 2
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 0
                    TabStop = False
                    Visible = True
                    object usrg_lblNightCount: TLabel
                      Tag = 0
                      Left = 315
                      Top = 46
                      Width = 35
                      Height = 13
                      Cursor = crDefault
                      Hint = ''
                      Align = alNone
                      Alignment = taLeftJustify
                      Anchors = [akLeft, akTop]
                      AutoSize = True
                      Caption = 'Ночей:'
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FocusControl = nil
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      ParentBiDiMode = True
                      ParentColor = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      ShowAccelChar = True
                      Transparent = True
                      Layout = tlTop
                      Visible = True
                      WordWrap = False
                    end
                    object usrg_lblTarrifTypeName: TLabel
                      Tag = 0
                      Left = 157
                      Top = -2
                      Width = 138
                      Height = 21
                      Cursor = crDefault
                      Hint = ''
                      Align = alNone
                      Alignment = taCenter
                      Anchors = [akLeft, akTop]
                      AutoSize = False
                      Caption = 'Взрослый (тип тарифа)'
                      Color = 11141119
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FocusControl = nil
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      ShowAccelChar = True
                      Transparent = False
                      Layout = tlCenter
                      Visible = True
                      WordWrap = False
                    end
                    object usrg_Bevel6: TBevel
                      Tag = 0
                      Left = 4
                      Top = 85
                      Width = 264
                      Height = 1
                      Cursor = crDefault
                      Hint = ''
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      ParentShowHint = True
                      Shape = bsBox
                      Style = bsLowered
                      Visible = True
                    end
                    object usrat_gsIBLookupComboBox_USR_TARRIFTYPEKEY_Label: TLabel
                      Left = 218
                      Top = 1
                      Width = 135
                      Caption = 'Тип тарифа (по возрасту):'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_gsIBLookupComboBox_USR_ROOMPLACEKEY_Label: TLabel
                      Left = 29
                      Top = 196
                      Width = 83
                    end
                    object usrat_gsIBLookupComboBox_USR_PAYTYPEKEY_Label: TLabel
                      Left = 165
                      Top = 198
                      Width = 63
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrg_xdeNightCount: TxDBCalculatorEdit
                      Tag = 0
                      Left = 390
                      Top = 42
                      Width = 50
                      Height = 21
                      Cursor = crIBeam
                      Hint = ''
                      HelpContext = 0
                      TabStop = True
                      Anchors = [akLeft, akTop]
                      AutoSelect = True
                      AutoSize = True
                      BorderStyle = bsSingle
                      CharCase = ecNormal
                      Color = clWindow
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      HideSelection = True
                      ImeMode = imDontCare
                      ImeName = ''
                      MaxLength = 0
                      OEMConvert = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PasswordChar = #0
                      PopupMenu = nil
                      ReadOnly = False
                      TabOrder = 0
                      Visible = True
                      DecDigits = -1
                      DataField = 'NIGHTCOUNT'
                      DataSource = dsgdcBase
                    end
                    object usrg_tbtSearchTarrif: TTBToolbar
                      Tag = 0
                      Left = 279
                      Top = 31
                      Width = 23
                      Height = 22
                      Cursor = crDefault
                      HelpContext = 0
                      ActivateParent = True
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      AutoResize = True
                      BorderStyle = bsSingle
                      Caption = 'usrg_tbtSearchTarrif'
                      ChevronMoveItems = True
                      ChevronPriorityForNewItems = tbcpHighest
                      CloseButton = False
                      CloseButtonWhenDocked = False
                      Color = clBtnFace
                      DefaultDock = nil
                      DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                      DockMode = dmCannotFloatOrChangeDocks
                      DockPos = -1
                      DockRow = 0
                      DragHandleStyle = dhSingle
                      FloatingMode = fmOnTopOfParentForm
                      FloatingWidth = 0
                      FullSize = False
                      HideWhenInactive = True
                      Images = usrg_ilUser_16
                      LastDock = nil
                      LinkSubitems = nil
                      MenuBar = False
                      Options = []
                      ParentFont = True
                      ParentShowHint = False
                      PopupMenu = nil
                      ProcessShortCuts = False
                      Resizable = True
                      ShowCaption = True
                      ShowHint = True
                      ShrinkMode = tbsmChevron
                      SmoothDrag = True
                      Stretch = False
                      SystemFont = True
                      TabOrder = 1
                      UpdateActions = True
                      UseLastDock = True
                      Visible = True
                      SavedAtRunTime = True
                      object usrg_TBItem81: TTBItem
                        Tag = 0
                        Action = usrg_actSearchTarrif
                        AutoCheck = False
                        DisplayMode = nbdmDefault
                        GroupIndex = 0
                        Images = nil
                        InheritOptions = True
                        MaskOptions = []
                        Options = []
                        RadioItem = False
                      end
                    end
                    object usrat_gsIBLookupComboBox_USR_ROOMPLACEKEY: TgsIBLookupComboBox
                      Left = 121
                      Top = 192
                      TabOrder = 2
                    end
                    object usrat_gsIBLookupComboBox_USR_PAYTYPEKEY: TgsIBLookupComboBox
                      Left = 232
                      Top = 194
                      Width = 123
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 3
                    end
                  end
                  object usrg_pnlReservationHelper: TPanel
                    Tag = 0
                    Left = 362
                    Top = 59
                    Width = 148
                    Height = 159
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Alignment = taCenter
                    Anchors = [akLeft, akTop]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 2
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 1
                    TabStop = False
                    Visible = True
                    object usrg_Bevel3: TBevel
                      Tag = 0
                      Left = 4
                      Top = 92
                      Width = 264
                      Height = 2
                      Cursor = crDefault
                      Hint = ''
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      ParentShowHint = True
                      Shape = bsBox
                      Style = bsLowered
                      Visible = True
                    end
                    object usrg_Bevel5: TBevel
                      Tag = 0
                      Left = 4
                      Top = 136
                      Width = 264
                      Height = 2
                      Cursor = crDefault
                      Hint = ''
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      ParentShowHint = True
                      Shape = bsBox
                      Style = bsLowered
                      Visible = True
                    end
                    object usrat_DBEdit_USR_COUNT_ADULT_Label: TLabel
                      Left = 10
                      Top = 101
                      Width = 52
                      Caption = 'Взрослых:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_COUNT_CHILD_Label: TLabel
                      Left = 170
                      Top = 101
                      Width = 36
                      Caption = 'Детей:'
                      Font.Style = []
                      ParentFont = False
                    end
                    object usrat_DBEdit_USR_COUNT_ADULT: TxDBCalculatorEdit
                      Left = 85
                      Top = 97
                      Width = 50
                      Cursor = crIBeam
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 0
                    end
                    object usrat_DBEdit_USR_COUNT_CHILD: TxDBCalculatorEdit
                      Left = 214
                      Top = 97
                      Width = 50
                      Cursor = crArrow
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 1
                    end
                    object usrat_DBCheckBox_USR_USECREATIONDATEFORCOST: TDBCheckBox
                      Left = 8
                      Top = 118
                      Width = 254
                      Caption = 'Тариф на дату создания (15.06.2021)'
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 2
                    end
                    object usrat_DBCheckBox_USR_CANTADDFRONTPAY: TDBCheckBox
                      Left = 8
                      Top = 162
                      Width = 217
                      Font.Style = []
                      ParentFont = False
                      TabOrder = 3
                    end
                  end
                  object usrg_pnlPaymentHelper: TPanel
                    Tag = 0
                    Left = 370
                    Top = 75
                    Width = 220
                    Height = 143
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alNone
                    Alignment = taCenter
                    Anchors = [akLeft, akTop]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 2
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 2
                    TabStop = False
                    Visible = True
                    object usrg_gbOther: TGroupBox
                      Tag = 0
                      Left = 34
                      Top = 114
                      Width = 240
                      Height = 99
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      Caption = ' Дополнительно '
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = [fsBold]
                      ParentBiDiMode = True
                      ParentColor = True
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 0
                      TabStop = False
                      Visible = True
                    end
                  end
                  object usrg_tbdBookActions: TTBDock
                    Tag = 0
                    Left = 3
                    Top = 370
                    Width = 706
                    Height = 26
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    AllowDrag = True
                    Background = nil
                    BackgroundOnToolbars = True
                    BoundLines = []
                    Color = clBtnFace
                    FixAlign = False
                    LimitToOneRow = False
                    PopupMenu = nil
                    Position = dpBottom
                    Visible = True
                    object usrg_tbtBookActions: TTBToolbar
                      Tag = 0
                      Left = 0
                      Top = 0
                      Cursor = crDefault
                      HelpContext = 0
                      ActivateParent = True
                      Align = alNone
                      Anchors = [akLeft, akTop]
                      AutoResize = True
                      BorderStyle = bsSingle
                      Caption = 'usrg_tbtBookActions'
                      ChevronMoveItems = True
                      ChevronPriorityForNewItems = tbcpHighest
                      CloseButton = False
                      CloseButtonWhenDocked = False
                      Color = clBtnFace
                      DefaultDock = nil
                      DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                      DockMode = dmCannotFloatOrChangeDocks
                      DockPos = 88
                      DockRow = 0
                      DragHandleStyle = dhNone
                      FloatingMode = fmOnTopOfParentForm
                      FloatingWidth = 0
                      Font.Height = -13
                      Font.Name = 'Calibri'
                      FullSize = True
                      HideWhenInactive = True
                      Images = usrg_ilUser_16
                      LinkSubitems = nil
                      MenuBar = False
                      Options = []
                      ParentFont = False
                      ParentShowHint = False
                      PopupMenu = nil
                      ProcessShortCuts = False
                      Resizable = True
                      ShowCaption = True
                      ShowHint = True
                      ShrinkMode = tbsmChevron
                      SmoothDrag = True
                      Stretch = False
                      SystemFont = True
                      TabOrder = 0
                      UpdateActions = True
                      UseLastDock = True
                      Visible = True
                      SavedAtRunTime = True
                      object usrg_TBItem50: TTBItem
                        Tag = 0
                        Action = usrg_actSaveHeader
                        AutoCheck = False
                        DisplayMode = nbdmImageAndText
                        GroupIndex = 0
                        Images = nil
                        InheritOptions = True
                        MaskOptions = []
                        Options = []
                        RadioItem = False
                      end
                      object usrg_TBSeparatorItem11: TTBSeparatorItem
                        Tag = 0
                        Blank = False
                        Hint = ''
                        Visible = True
                      end
                      object usrg_TBSubmenuItem1: TTBSubmenuItem
                        Tag = 0
                        Action = nil
                        AutoCheck = False
                        Caption = 'Дополнительные действия'
                        Checked = False
                        DisplayMode = nbdmImageAndText
                        DropdownCombo = False
                        Enabled = True
                        GroupIndex = 0
                        HelpContext = 0
                        Hint = 'Дополнительные действия'
                        ImageIndex = 14
                        Images = nil
                        InheritOptions = True
                        LinkSubitems = nil
                        MaskOptions = []
                        Options = []
                        RadioItem = False
                        ShortCut = 0
                        SubMenuImages = nil
                        Visible = True
                        object usrg_TBItem48: TTBItem
                          Tag = 0
                          Action = usrg_actCheckIn
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                        object usrg_TBItem47: TTBItem
                          Tag = 0
                          Action = usrg_actCheckOut
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                        object usrg_TBSeparatorItem24: TTBSeparatorItem
                          Tag = 0
                          Blank = False
                          Hint = ''
                          Visible = True
                        end
                        object usrg_TBItem83: TTBItem
                          Tag = 0
                          Action = usrg_actGetTelephoneRecords
                          AutoCheck = False
                          DisplayMode = nbdmDefault
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                        object usrg_TBSeparatorItem9: TTBSeparatorItem
                          Tag = 0
                          Blank = False
                          Hint = ''
                          Visible = True
                        end
                        object usrg_TBItem49: TTBItem
                          Tag = 0
                          Action = usrg_actPostDayService
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                        object usrg_TBItem46: TTBItem
                          Tag = 0
                          Action = usrg_actPostAllService
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                      end
                      object usrg_TBSeparatorItem10: TTBSeparatorItem
                        Tag = 0
                        Blank = False
                        Hint = ''
                        Visible = True
                      end
                      object usrg_TBSubmenuItem2: TTBSubmenuItem
                        Tag = 0
                        Action = nil
                        AutoCheck = False
                        Caption = 'Отчеты'
                        Checked = False
                        DisplayMode = nbdmImageAndText
                        DropdownCombo = False
                        Enabled = True
                        GroupIndex = 0
                        HelpContext = 0
                        Hint = 'Отчеты'
                        ImageIndex = 15
                        Images = nil
                        InheritOptions = True
                        LinkSubitems = nil
                        MaskOptions = []
                        Options = []
                        RadioItem = False
                        ShortCut = 0
                        SubMenuImages = nil
                        Visible = True
                        object usrg_TBItem79: TTBItem
                          Tag = 0
                          Action = usrg_actPrintConfirmation
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                        object usrg_TBItem45: TTBItem
                          Tag = 0
                          Action = usrg_actPrintRegistrationCard
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                      end
                      object usrg_TBSeparatorItem13: TTBSeparatorItem
                        Tag = 0
                        Blank = False
                        Hint = ''
                        Visible = True
                      end
                      object usrg_TBItem69: TTBItem
                        Tag = 0
                        Action = usrg_actShowLog
                        AutoCheck = False
                        DisplayMode = nbdmImageAndText
                        GroupIndex = 0
                        Images = nil
                        InheritOptions = True
                        MaskOptions = []
                        Options = []
                        RadioItem = False
                      end
                    end
                  end
                  object usrg_pnlStateHelper: TPanel
                    Tag = 0
                    Left = 564
                    Top = 3
                    Width = 145
                    Height = 367
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alRight
                    Alignment = taCenter
                    Anchors = [akTop, akRight, akBottom]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 2
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 4
                    TabStop = False
                    Visible = True
                    object usrg_gbState: TGroupBox
                      Tag = 0
                      Left = 2
                      Top = 2
                      Width = 141
                      Height = 363
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alClient
                      Anchors = [akLeft, akTop, akRight, akBottom]
                      Caption = ' Состояние '
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = [fsBold]
                      ParentBiDiMode = True
                      ParentColor = True
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 0
                      TabStop = False
                      Visible = True
                      object usrg_DBText1: TDBText
                        Tag = 0
                        Left = 8
                        Top = 17
                        Width = 125
                        Height = 52
                        Cursor = crDefault
                        Hint = ''
                        Align = alNone
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DataField = 'Z_USR$STATEKEY_USR$NAME'
                        DataSource = dsgdcBase
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        Font.Charset = RUSSIAN_CHARSET
                        Font.Color = clWindowText
                        Font.Height = -16
                        Font.Name = 'Calibri'
                        Font.Pitch = fpDefault
                        Font.Style = [fsBold]
                        ParentBiDiMode = True
                        ParentColor = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        Transparent = False
                        Visible = True
                        WordWrap = True
                      end
                      object usrg_Bevel1: TBevel
                        Tag = 0
                        Left = 4
                        Top = 75
                        Width = 132
                        Height = 2
                        Cursor = crDefault
                        Hint = ''
                        Align = alNone
                        Anchors = [akLeft, akTop, akRight]
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        ParentShowHint = True
                        Shape = bsBox
                        Style = bsLowered
                        Visible = True
                      end
                      object usrg_Bevel2: TBevel
                        Tag = 0
                        Left = 4
                        Top = 150
                        Width = 132
                        Height = 2
                        Cursor = crDefault
                        Hint = ''
                        Align = alNone
                        Anchors = [akLeft, akTop, akRight]
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        ParentShowHint = True
                        Shape = bsBox
                        Style = bsLowered
                        Visible = True
                      end
                      object usrg_Label2: TLabel
                        Tag = 0
                        Left = 10
                        Top = 166
                        Width = 122
                        Height = 13
                        Cursor = crDefault
                        Hint = ''
                        Align = alNone
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        Caption = 'Общий баланс'
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FocusControl = nil
                        Font.Charset = RUSSIAN_CHARSET
                        Font.Color = clWindowText
                        Font.Height = -11
                        Font.Name = 'Tahoma'
                        Font.Pitch = fpDefault
                        Font.Style = []
                        ParentBiDiMode = True
                        ParentColor = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        ShowAccelChar = True
                        Transparent = False
                        Layout = tlTop
                        Visible = True
                        WordWrap = False
                      end
                      object usrg_lblResultBalance: TLabel
                        Tag = 0
                        Left = 8
                        Top = 182
                        Width = 125
                        Height = 22
                        Cursor = crDefault
                        Hint = ''
                        Align = alNone
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        Caption = '0 BYR'
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FocusControl = nil
                        Font.Charset = RUSSIAN_CHARSET
                        Font.Color = clWindowText
                        Font.Height = -19
                        Font.Name = 'Calibri'
                        Font.Pitch = fpDefault
                        Font.Style = [fsBold]
                        ParentBiDiMode = True
                        ParentColor = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        ShowAccelChar = True
                        Transparent = False
                        Layout = tlCenter
                        Visible = True
                        WordWrap = False
                      end
                    end
                  end
                  object usrg_pnlCommentHelper: TPanel
                    Tag = 0
                    Left = 314
                    Top = 3
                    Width = 250
                    Height = 367
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alClient
                    Alignment = taCenter
                    Anchors = [akLeft, akTop, akRight, akBottom]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 5
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 5
                    TabStop = False
                    Visible = True
                    object usrg_mTraceList: TMemo
                      Tag = 0
                      Left = 5
                      Top = 28
                      Width = 240
                      Height = 228
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      TabStop = True
                      Align = alClient
                      Alignment = taLeftJustify
                      Anchors = [akLeft, akTop, akRight, akBottom]
                      BorderStyle = bsSingle
                      Color = clBtnFace
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      HideSelection = True
                      ImeMode = imDontCare
                      ImeName = ''
                      Lines.Strings = (
                        '< примечания не выбраны >')
                      MaxLength = 0
                      OEMConvert = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      ReadOnly = True
                      ScrollBars = ssVertical
                      TabOrder = 0
                      Visible = True
                      WantReturns = True
                      WantTabs = False
                      WordWrap = True
                    end
                    object usrg_pnlTraceHelper: TPanel
                      Tag = 0
                      Left = 5
                      Top = 5
                      Width = 240
                      Height = 23
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alTop
                      Alignment = taCenter
                      Anchors = [akLeft, akTop, akRight]
                      AutoSize = False
                      BevelInner = bvNone
                      BevelOuter = bvNone
                      BevelWidth = 1
                      BorderWidth = 0
                      BorderStyle = bsNone
                      Caption = ''
                      Color = clBtnFace
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      UseDockManager = True
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FullRepaint = True
                      Locked = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 1
                      TabStop = False
                      Visible = True
                      object usrg_lblTrace: TLabel
                        Tag = 0
                        Left = 0
                        Top = 0
                        Width = 74
                        Height = 23
                        Cursor = crDefault
                        Hint = ''
                        Align = alLeft
                        Alignment = taLeftJustify
                        Anchors = [akLeft, akTop, akBottom]
                        AutoSize = False
                        Caption = 'Примечания:'
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FocusControl = nil
                        Font.Charset = RUSSIAN_CHARSET
                        Font.Color = clWindowText
                        Font.Height = -11
                        Font.Name = 'Tahoma'
                        Font.Pitch = fpDefault
                        Font.Style = []
                        ParentBiDiMode = True
                        ParentColor = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        ShowAccelChar = True
                        Transparent = True
                        Layout = tlCenter
                        Visible = True
                        WordWrap = False
                      end
                      object usrg_TBToolbar1: TTBToolbar
                        Tag = 0
                        Left = 77
                        Top = 0
                        Width = 73
                        Height = 22
                        Cursor = crDefault
                        HelpContext = 0
                        ActivateParent = True
                        Align = alNone
                        Anchors = [akLeft, akTop]
                        AutoResize = True
                        BorderStyle = bsSingle
                        Caption = 'usrg_TBToolbar1'
                        ChevronMoveItems = True
                        ChevronPriorityForNewItems = tbcpHighest
                        CloseButton = False
                        CloseButtonWhenDocked = False
                        Color = clBtnFace
                        DefaultDock = nil
                        DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                        DockMode = dmCannotFloatOrChangeDocks
                        DockPos = -1
                        DockRow = 0
                        DragHandleStyle = dhSingle
                        FloatingMode = fmOnTopOfParentForm
                        FloatingWidth = 0
                        FullSize = False
                        HideWhenInactive = True
                        Images = dmImages.il16x16
                        LastDock = nil
                        LinkSubitems = nil
                        MenuBar = False
                        Options = []
                        ParentFont = True
                        ParentShowHint = True
                        PopupMenu = nil
                        ProcessShortCuts = False
                        Resizable = True
                        ShowCaption = True
                        ShrinkMode = tbsmChevron
                        SmoothDrag = True
                        Stretch = False
                        SystemFont = True
                        TabOrder = 0
                        UpdateActions = True
                        UseLastDock = True
                        Visible = True
                        SavedAtRunTime = True
                        object usrg_TBItem80: TTBItem
                          Tag = 0
                          Action = usrg_actChooseTrace
                          AutoCheck = False
                          DisplayMode = nbdmImageAndText
                          GroupIndex = 0
                          Images = nil
                          InheritOptions = True
                          MaskOptions = []
                          Options = []
                          RadioItem = False
                        end
                      end
                    end
                    object usrg_pnlDescriptionHelper: TPanel
                      Tag = 0
                      Left = 5
                      Top = 256
                      Width = 240
                      Height = 106
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alBottom
                      Alignment = taCenter
                      Anchors = [akLeft, akRight, akBottom]
                      AutoSize = False
                      BevelInner = bvNone
                      BevelOuter = bvNone
                      BevelWidth = 1
                      BorderWidth = 0
                      BorderStyle = bsNone
                      Caption = ''
                      Color = clBtnFace
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      UseDockManager = True
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FullRepaint = True
                      Locked = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 2
                      TabStop = False
                      Visible = True
                      object usrat_DBMemo_USR_DESCRIPTION_Label: TLabel
                        Left = 0
                        Top = 0
                        Width = 240
                        Height = 20
                        Align = alTop
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        Caption = 'Произвольное примечание:'
                        Font.Style = []
                        ParentFont = False
                        Layout = tlCenter
                      end
                      object usrat_DBMemo_USR_DESCRIPTION: TDBMemo
                        Left = 0
                        Top = 20
                        Width = 240
                        Height = 86
                        Align = alClient
                        Anchors = [akLeft, akTop, akRight, akBottom]
                        Font.Style = []
                        ParentFont = False
                        ScrollBars = ssVertical
                        TabOrder = 0
                      end
                    end
                  end
                end
                object usrg_pnlMiddle: TPanel
                  Tag = 0
                  Left = 33
                  Top = -15
                  Width = 676
                  Height = 112
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  BevelInner = bvNone
                  BevelOuter = bvNone
                  BevelWidth = 1
                  BorderWidth = 0
                  BorderStyle = bsNone
                  Caption = ''
                  Color = clBtnFace
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  UseDockManager = True
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FullRepaint = True
                  Locked = False
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 1
                  TabStop = False
                  Visible = True
                  object usrat_gsIBLookupComboBox_USR_STATEKEY_Label: TLabel
                    Left = 5
                    Top = 88
                  end
                  object usrat_DBEdit_Z_USR_STATEKEY_USR_NAME_Label: TLabel
                    Left = 5
                    Top = 111
                  end
                  object usrg_pnlMiddleLeftHelper: TPanel
                    Tag = 0
                    Left = 0
                    Top = 0
                    Width = 424
                    Height = 112
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    Align = alLeft
                    Alignment = taCenter
                    Anchors = [akLeft, akTop, akBottom]
                    AutoSize = False
                    BevelInner = bvNone
                    BevelOuter = bvNone
                    BevelWidth = 1
                    BorderWidth = 0
                    BorderStyle = bsNone
                    Caption = ''
                    Color = clBtnFace
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 100
                    UseDockManager = True
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    FullRepaint = True
                    Locked = False
                    ParentBiDiMode = True
                    ParentColor = False
                    ParentCtl3D = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    TabOrder = 0
                    TabStop = False
                    Visible = True
                    object usrg_splMiddleLeft: TSplitter
                      Tag = 0
                      Left = 0
                      Top = 0
                      Width = 424
                      Height = 4
                      Cursor = crVSplit
                      Hint = ''
                      Align = alTop
                      AutoSnap = True
                      Beveled = False
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      MinSize = 30
                      ParentColor = True
                      ResizeStyle = rsPattern
                      Visible = True
                    end
                    object usrg_pnlServiceHelper: TPanel
                      Tag = 0
                      Left = 0
                      Top = 0
                      Width = 424
                      Height = 272
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alNone
                      Alignment = taCenter
                      Anchors = [akLeft, akTop]
                      AutoSize = False
                      BevelInner = bvNone
                      BevelOuter = bvNone
                      BevelWidth = 1
                      BorderWidth = 1
                      BorderStyle = bsNone
                      Caption = ''
                      Color = clGray
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 100
                      Constraints.MinWidth = 0
                      UseDockManager = True
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FullRepaint = True
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      Locked = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 0
                      TabStop = False
                      Visible = True
                      object usrg_ibgrServiceList: TgsIBGrid
                        Tag = 0
                        Left = 1
                        Top = 28
                        Width = 422
                        Height = 243
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        TabStop = True
                        Align = alClient
                        Anchors = [akLeft, akTop, akRight, akBottom]
                        BorderStyle = bsNone
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DataSource = usrg_dsServiceList
                        DefaultDrawing = True
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        ImeMode = imDontCare
                        ImeName = ''
                        Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                        ParentBiDiMode = True
                        ParentColor = False
                        ParentCtl3D = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        ReadOnly = True
                        TabOrder = 0
                        Visible = True
                        TableFont.Style = []
                        TableColor = clWindow
                        SelectedFont.Style = []
                        SelectedColor = clHighlight
                        TitleFont.Style = []
                        TitleColor = clBtnFace
                        RefreshType = rtCloseOpen
                        Striped = True
                        StripeOdd = 15201271
                        StripeEven = 14084071
                        InternalMenuKind = imkWithSeparator
                        Expands = <>
                        ExpandsActive = False
                        ExpandsSeparate = False
                        TitlesExpanding = False
                        Conditions = <>
                        ConditionsActive = False
                        CheckBox.DisplayField = ''
                        CheckBox.FieldName = ''
                        CheckBox.Visible = False
                        CheckBox.FirstColumn = False
                        ScaleColumns = False
                        MinColWidth = 40
                        ToolBar = nil
                        FinishDrawing = True
                        RememberPosition = True
                        SaveSettings = True
                        ColumnEditors = <>
                        Aliases = <>
                        ShowFooter = False
                        ShowTotals = True
                        Columns = <
                          item
                            Expanded = False
                            FieldName = 'USR$SORTNUMBER'
                            ReadOnly = False
                            Title.Caption = '№'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                            ReadOnly = False
                            Title.Caption = 'Услуга'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$COSTNCU'
                            ReadOnly = False
                            Title.Caption = 'Цена'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$COSTCURR'
                            ReadOnly = False
                            Title.Caption = 'Цена'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$QUANTITY'
                            ReadOnly = False
                            Title.Caption = 'Кол-во'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SUMNCU'
                            ReadOnly = False
                            Title.Caption = 'Сумма'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                            TotalType = ttSum
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SUMCURR'
                            ReadOnly = False
                            Title.Caption = 'Сумма'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SERVICEKEY'
                            ReadOnly = False
                            Title.Caption = 'Услуга'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                            ReadOnly = False
                            Title.Caption = 'Номер подтверждения'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'ID'
                            Title.Caption = 'Идентификатор'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'DISABLED'
                            Title.Caption = 'Не активно'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'EDITIONDATE'
                            Title.Caption = 'Дата модификации'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'EDITORKEY'
                            Title.Caption = 'Кто модифицировал'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DOCUMENTKEY'
                            ReadOnly = False
                            Title.Caption = 'Документ бронирования'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DATEBEGIN'
                            ReadOnly = False
                            Title.Caption = 'Дата начала'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DATEEND'
                            ReadOnly = False
                            Title.Caption = 'Дата окончания'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$TIMEBEGIN'
                            ReadOnly = False
                            Title.Caption = 'Время начала'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$TIMEEND'
                            ReadOnly = False
                            Title.Caption = 'Время окончания'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$FREQUENCYKEY'
                            ReadOnly = False
                            Title.Caption = 'Периодичность'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$FREQUENCYKEY_USR$NAME'
                            ReadOnly = False
                            Title.Caption = 'Период.'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$TARRIFTYPEKEY'
                            ReadOnly = False
                            Title.Caption = 'Тариф'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$TARRIFTYPEKEY_USR$NAME'
                            ReadOnly = False
                            Title.Caption = 'Тариф'
                            Width = 130
                            Visible = True
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'DATETIME_BEGIN'
                            Title.Caption = 'DATETIME_BEGIN'
                            Width = -1
                            Visible = False
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'DATETIME_END'
                            Title.Caption = 'DATETIME_END'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'NUMBERTYPEKEY'
                            ReadOnly = False
                            Title.Caption = 'Тип номера'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$CURRKEY'
                            ReadOnly = False
                            Title.Caption = 'Валюта'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$CURRKEY_CODE'
                            ReadOnly = False
                            Title.Caption = 'Код валюты'
                            Width = 52
                            Visible = True
                          end>
                      end
                      object usrg_pnlServiceTop: TPanel
                        Tag = 0
                        Left = 1
                        Top = 1
                        Width = 422
                        Height = 27
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        Align = alTop
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        BevelInner = bvNone
                        BevelOuter = bvRaised
                        BevelWidth = 1
                        BorderWidth = 0
                        BorderStyle = bsNone
                        Caption = 'usrg_pnlServiceTop'
                        Color = clBtnFace
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        UseDockManager = True
                        DockSite = False
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FullRepaint = True
                        Locked = False
                        ParentBiDiMode = True
                        ParentColor = False
                        ParentCtl3D = True
                        ParentFont = True
                        ParentShowHint = True
                        PopupMenu = nil
                        TabOrder = 1
                        TabStop = False
                        Visible = True
                        object usrg_pnlServiceTopRight: TPanel
                          Tag = 0
                          Left = 236
                          Top = 1
                          Width = 185
                          Height = 25
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alRight
                          Alignment = taCenter
                          Anchors = [akTop, akRight, akBottom]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvNone
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = '- Услуги -'
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Font.Charset = RUSSIAN_CHARSET
                          Font.Color = clWindowText
                          Font.Height = -11
                          Font.Name = 'Tahoma'
                          Font.Pitch = fpDefault
                          Font.Style = [fsBold]
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = False
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 0
                          TabStop = False
                          Visible = True
                        end
                        object usrg_pnlServiceTopLeft: TPanel
                          Tag = 0
                          Left = 1
                          Top = 1
                          Width = 235
                          Height = 25
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alClient
                          Alignment = taCenter
                          Anchors = [akLeft, akTop, akRight, akBottom]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvNone
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 1
                          TabStop = False
                          Visible = True
                          object usrg_tbdService: TTBDock
                            Tag = 0
                            Left = 0
                            Top = 0
                            Width = 235
                            Height = 26
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            AllowDrag = True
                            Background = nil
                            BackgroundOnToolbars = True
                            BoundLines = []
                            Color = clBtnFace
                            FixAlign = False
                            LimitToOneRow = False
                            PopupMenu = nil
                            Position = dpTop
                            Visible = True
                            object usrg_tbtService: TTBToolbar
                              Tag = 0
                              Left = 0
                              Top = 0
                              Cursor = crDefault
                              HelpContext = 0
                              ActivateParent = True
                              Align = alNone
                              Anchors = [akLeft, akTop]
                              AutoResize = True
                              BorderStyle = bsNone
                              Caption = 'usrg_tbtService'
                              ChevronMoveItems = True
                              ChevronPriorityForNewItems = tbcpHighest
                              CloseButton = False
                              CloseButtonWhenDocked = False
                              Color = clBtnFace
                              DefaultDock = nil
                              DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                              DockMode = dmCannotFloatOrChangeDocks
                              DockPos = 0
                              DockRow = 1
                              DragHandleStyle = dhNone
                              FloatingMode = fmOnTopOfParentForm
                              FloatingWidth = 0
                              Font.Charset = RUSSIAN_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'Tahoma'
                              Font.Pitch = fpDefault
                              Font.Style = []
                              FullSize = True
                              HideWhenInactive = True
                              Images = dmImages.il16x16
                              LinkSubitems = nil
                              MenuBar = False
                              Options = []
                              ParentFont = False
                              ParentShowHint = False
                              PopupMenu = nil
                              ProcessShortCuts = False
                              Resizable = True
                              ShowCaption = True
                              ShowHint = True
                              ShrinkMode = tbsmChevron
                              SmoothDrag = True
                              Stretch = False
                              SystemFont = True
                              TabOrder = 0
                              UpdateActions = True
                              UseLastDock = True
                              Visible = True
                              SavedAtRunTime = True
                              object usrg_TBItem3: TTBItem
                                Tag = 0
                                Action = usrg_actServiceAdd
                                AutoCheck = False
                                DisplayMode = nbdmDefault
                                GroupIndex = 0
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                              end
                              object usrg_TBItem2: TTBItem
                                Tag = 0
                                Action = usrg_actServiceEdit
                                AutoCheck = False
                                DisplayMode = nbdmDefault
                                GroupIndex = 0
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                              end
                              object usrg_TBItem1: TTBItem
                                Tag = 0
                                Action = usrg_actServiceDelete
                                AutoCheck = False
                                DisplayMode = nbdmDefault
                                GroupIndex = 0
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                              end
                            end
                          end
                        end
                      end
                    end
                    object usrg_pnlGuestHelper: TPanel
                      Tag = 0
                      Left = 0
                      Top = 4
                      Width = 424
                      Height = 108
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      Align = alClient
                      Alignment = taCenter
                      Anchors = [akLeft, akTop, akRight, akBottom]
                      AutoSize = False
                      BevelInner = bvNone
                      BevelOuter = bvNone
                      BevelWidth = 1
                      BorderWidth = 1
                      BorderStyle = bsNone
                      Caption = ''
                      Color = clGray
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      UseDockManager = True
                      DockSite = False
                      DragCursor = crDrag
                      DragKind = dkDrag
                      DragMode = dmManual
                      Enabled = True
                      FullRepaint = True
                      Font.Charset = RUSSIAN_CHARSET
                      Font.Color = clWindowText
                      Font.Height = -11
                      Font.Name = 'Tahoma'
                      Font.Pitch = fpDefault
                      Font.Style = []
                      Locked = False
                      ParentBiDiMode = True
                      ParentColor = False
                      ParentCtl3D = True
                      ParentFont = False
                      ParentShowHint = True
                      PopupMenu = nil
                      TabOrder = 1
                      TabStop = False
                      Visible = True
                      object usrg_Panel9: TPanel
                        Tag = 0
                        Left = 1
                        Top = 1
                        Width = 422
                        Height = 27
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        Align = alTop
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight]
                        AutoSize = False
                        BevelInner = bvNone
                        BevelOuter = bvRaised
                        BevelWidth = 1
                        BorderWidth = 0
                        BorderStyle = bsNone
                        Caption = 'usrg_pnlServiceTop'
                        Color = clBtnFace
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        UseDockManager = True
                        DockSite = False
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FullRepaint = True
                        Locked = False
                        ParentBiDiMode = True
                        ParentColor = False
                        ParentCtl3D = True
                        ParentFont = True
                        ParentShowHint = True
                        PopupMenu = nil
                        TabOrder = 0
                        TabStop = False
                        Visible = True
                        object usrg_Panel10: TPanel
                          Tag = 0
                          Left = 236
                          Top = 1
                          Width = 185
                          Height = 25
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alRight
                          Alignment = taCenter
                          Anchors = [akTop, akRight, akBottom]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvNone
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = '- Гости -'
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Font.Charset = RUSSIAN_CHARSET
                          Font.Color = clWindowText
                          Font.Height = -11
                          Font.Name = 'Tahoma'
                          Font.Pitch = fpDefault
                          Font.Style = [fsBold]
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = False
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 0
                          TabStop = False
                          Visible = True
                        end
                        object usrg_Panel11: TPanel
                          Tag = 0
                          Left = 1
                          Top = 1
                          Width = 235
                          Height = 25
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alClient
                          Alignment = taCenter
                          Anchors = [akLeft, akTop, akRight, akBottom]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvNone
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 1
                          TabStop = False
                          Visible = True
                          object usrg_tbdGuest: TTBDock
                            Tag = 0
                            Left = 0
                            Top = 0
                            Width = 235
                            Height = 26
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            AllowDrag = True
                            Background = nil
                            BackgroundOnToolbars = True
                            BoundLines = []
                            Color = clBtnFace
                            FixAlign = False
                            LimitToOneRow = False
                            PopupMenu = nil
                            Position = dpTop
                            Visible = True
                            object usrg_tbtGuest: TTBToolbar
                              Tag = 0
                              Left = 0
                              Top = 0
                              Cursor = crDefault
                              HelpContext = 0
                              ActivateParent = True
                              Align = alNone
                              Anchors = [akLeft, akTop]
                              AutoResize = True
                              BorderStyle = bsNone
                              Caption = 'usrg_tbtGuest'
                              ChevronMoveItems = True
                              ChevronPriorityForNewItems = tbcpHighest
                              CloseButton = False
                              CloseButtonWhenDocked = False
                              Color = clBtnFace
                              DefaultDock = nil
                              DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                              DockMode = dmCannotFloatOrChangeDocks
                              DockPos = 0
                              DockRow = 1
                              DragHandleStyle = dhNone
                              FloatingMode = fmOnTopOfParentForm
                              FloatingWidth = 0
                              Font.Charset = RUSSIAN_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'Tahoma'
                              Font.Pitch = fpDefault
                              Font.Style = []
                              FullSize = True
                              HideWhenInactive = True
                              Images = dmImages.il16x16
                              LinkSubitems = nil
                              MenuBar = False
                              Options = []
                              ParentFont = False
                              ParentShowHint = False
                              PopupMenu = nil
                              ProcessShortCuts = False
                              Resizable = True
                              ShowCaption = True
                              ShowHint = True
                              ShrinkMode = tbsmChevron
                              SmoothDrag = True
                              Stretch = False
                              SystemFont = True
                              TabOrder = 0
                              UpdateActions = True
                              UseLastDock = True
                              Visible = True
                              SavedAtRunTime = True
                              object usrg_TBItem6: TTBItem
                                Tag = 0
                                Action = nil
                                AutoCheck = False
                                Caption = 'Добавить'
                                Checked = False
                                DisplayMode = nbdmDefault
                                Enabled = True
                                GroupIndex = 0
                                HelpContext = 0
                                Hint = 'Добавить гостя в список'
                                ImageIndex = 0
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                                ShortCut = 0
                                Visible = True
                              end
                              object usrg_TBItem5: TTBItem
                                Tag = 0
                                Action = nil
                                AutoCheck = False
                                Caption = 'Изменить'
                                Checked = False
                                DisplayMode = nbdmDefault
                                Enabled = True
                                GroupIndex = 0
                                HelpContext = 0
                                Hint = 'Изменить гостя в списке'
                                ImageIndex = 1
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                                ShortCut = 0
                                Visible = True
                              end
                              object usrg_TBItem4: TTBItem
                                Tag = 0
                                Action = nil
                                AutoCheck = False
                                Caption = 'Удалить'
                                Checked = False
                                DisplayMode = nbdmDefault
                                Enabled = True
                                GroupIndex = 0
                                HelpContext = 0
                                Hint = 'Удалить гостя из списка'
                                ImageIndex = 2
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                                ShortCut = 0
                                Visible = True
                              end
                              object usrg_TBSeparatorItem23: TTBSeparatorItem
                                Tag = 0
                                Blank = False
                                Hint = ''
                                Visible = True
                              end
                              object usrg_TBItem82: TTBItem
                                Tag = 0
                                Action = nil
                                AutoCheck = False
                                Caption = 'Изменить'
                                Checked = False
                                DisplayMode = nbdmDefault
                                Enabled = True
                                GroupIndex = 0
                                HelpContext = 0
                                Hint = 'Изменить профайл гостя'
                                ImageIndex = 33
                                Images = nil
                                InheritOptions = True
                                MaskOptions = []
                                Options = []
                                RadioItem = False
                                ShortCut = 0
                                Visible = True
                              end
                            end
                          end
                        end
                      end
                    end
                  end
                  object usrg_pcCharge: TPageControl
                    Tag = 0
                    Left = 428
                    Top = 136
                    Width = 248
                    Height = 216
                    Cursor = crDefault
                    Hint = ''
                    HelpContext = 0
                    ActivePage = usrg_tbsDetailPostings
                    Align = alNone
                    Anchors = [akLeft, akTop]
                    Constraints.MaxHeight = 0
                    Constraints.MaxWidth = 0
                    Constraints.MinHeight = 0
                    Constraints.MinWidth = 0
                    DockSite = False
                    DragCursor = crDrag
                    DragKind = dkDrag
                    DragMode = dmManual
                    Enabled = True
                    HotTrack = False
                    Images = nil
                    MultiLine = False
                    OwnerDraw = False
                    ParentBiDiMode = True
                    ParentFont = True
                    ParentShowHint = True
                    PopupMenu = nil
                    RaggedRight = False
                    ScrollOpposite = False
                    Style = tsTabs
                    TabHeight = 0
                    TabOrder = 1
                    TabPosition = tpTop
                    TabStop = True
                    TabWidth = 0
                    Visible = True
                    object usrg_tbsDetailPostings: TTabSheet
                      Tag = 0
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      BorderWidth = 0
                      Caption = 'Начисления по счетам'
                      DragMode = dmManual
                      Enabled = True
                      Highlighted = False
                      ImageIndex = 0
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      TabVisible = True
                      object usrg_pnlDetailPostingsHelper: TPanel
                        Tag = 0
                        Left = 0
                        Top = 0
                        Width = 160
                        Height = 188
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        Align = alClient
                        Alignment = taCenter
                        Anchors = [akLeft, akTop, akRight, akBottom]
                        AutoSize = False
                        BevelInner = bvNone
                        BevelOuter = bvNone
                        BevelWidth = 1
                        BorderWidth = 0
                        BorderStyle = bsNone
                        Caption = ''
                        Color = clBtnFace
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        UseDockManager = True
                        DockSite = False
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        FullRepaint = True
                        Font.Charset = RUSSIAN_CHARSET
                        Font.Color = clWindowText
                        Font.Height = -11
                        Font.Name = 'Tahoma'
                        Font.Pitch = fpDefault
                        Font.Style = []
                        Locked = False
                        ParentBiDiMode = True
                        ParentColor = False
                        ParentCtl3D = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        TabOrder = 0
                        TabStop = False
                        Visible = True
                        object usrg_pnlDetailPosting_01: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 160
                          Height = 188
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alClient
                          Alignment = taCenter
                          Anchors = [akLeft, akTop, akRight, akBottom]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 0
                          TabStop = False
                          Visible = True
                          object usrg_pnlDetailPostingTop_01: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 158
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 0
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_01: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 158
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 1'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_01: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 158
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_01: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 158
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_01: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem13: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem52: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem15: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem61: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem71: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem12: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem11: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem1: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem10: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_01
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                          object usrg_ibgrDetailPosting_01: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 158
                            Height = 131
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_01
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 1
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                        end
                        object usrg_pnlDetailPosting_08: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 1340
                          Height = 742
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 1
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_08: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 1338
                            Height = 685
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_08
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel8: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 1338
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_08: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 1338
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 8'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_08: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 1338
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_08: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 1338
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_08: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem43: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem59: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem22: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem68: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem78: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem42: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem41: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem8: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem40: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_08
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_07: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 168
                          Height = 742
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 2
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_07: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 166
                            Height = 685
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_07
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel7: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 166
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_07: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 7'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_07: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_07: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 166
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_07: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem37: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem58: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem21: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem67: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem77: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem36: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem39: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem7: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem38: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_07
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_06: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 168
                          Height = 742
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 3
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_06: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 166
                            Height = 685
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_06
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel6: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 166
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_06: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 6'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_06: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_06: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 166
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_06: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem35: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem57: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem20: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem66: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem76: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem34: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem33: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem6: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem32: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_06
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_05: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 168
                          Height = 742
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 4
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_05: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 166
                            Height = 685
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_05
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel5: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 166
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_05: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 5'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_05: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_05: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 166
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_05: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem31: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem56: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem19: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem65: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem75: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem30: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem29: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem5: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem28: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_05
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_04: TPanel
                          Tag = 0
                          Left = 0
                          Top = 0
                          Width = 168
                          Height = 742
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 5
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_04: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 166
                            Height = 685
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_04
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel4: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 166
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_04: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 4'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_04: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 166
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_04: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 166
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_04: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem27: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem55: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem18: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem64: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem74: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem26: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem25: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem4: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem24: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_04
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_03: TPanel
                          Tag = 0
                          Left = 894
                          Top = 0
                          Width = 446
                          Height = 751
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 6
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_03: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 444
                            Height = 694
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_03
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel3: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 444
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_03: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 444
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 3'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_03: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 444
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_03: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 444
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_03: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem23: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem54: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem17: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem63: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem73: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem22: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem21: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem3: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem20: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_03
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                        object usrg_pnlDetailPosting_02: TPanel
                          Tag = 0
                          Left = 447
                          Top = 0
                          Width = 447
                          Height = 751
                          Cursor = crDefault
                          Hint = ''
                          HelpContext = 0
                          Align = alNone
                          Alignment = taCenter
                          Anchors = [akLeft, akTop]
                          AutoSize = False
                          BevelInner = bvNone
                          BevelOuter = bvLowered
                          BevelWidth = 1
                          BorderWidth = 0
                          BorderStyle = bsNone
                          Caption = ''
                          Color = clBtnFace
                          Constraints.MaxHeight = 0
                          Constraints.MaxWidth = 0
                          Constraints.MinHeight = 0
                          Constraints.MinWidth = 0
                          UseDockManager = True
                          DockSite = False
                          DragCursor = crDrag
                          DragKind = dkDrag
                          DragMode = dmManual
                          Enabled = True
                          FullRepaint = True
                          Locked = False
                          ParentBiDiMode = True
                          ParentColor = False
                          ParentCtl3D = True
                          ParentFont = True
                          ParentShowHint = True
                          PopupMenu = nil
                          TabOrder = 7
                          TabStop = False
                          Visible = False
                          object usrg_ibgrDetailPosting_02: TgsIBGrid
                            Tag = 0
                            Left = 1
                            Top = 56
                            Width = 445
                            Height = 694
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            TabStop = True
                            Align = alClient
                            Anchors = [akLeft, akTop, akRight, akBottom]
                            BorderStyle = bsSingle
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            DataSource = usrg_dsDetailPosting_02
                            DefaultDrawing = True
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            ImeMode = imDontCare
                            ImeName = ''
                            Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = True
                            ParentShowHint = True
                            PopupMenu = nil
                            ReadOnly = True
                            TabOrder = 0
                            Visible = True
                            TableColor = clWindow
                            SelectedColor = clHighlight
                            TitleColor = clBtnFace
                            RefreshType = rtCloseOpen
                            Striped = True
                            StripeOdd = 15201271
                            StripeEven = 14084071
                            InternalMenuKind = imkWithSeparator
                            Expands = <>
                            ExpandsActive = False
                            ExpandsSeparate = False
                            TitlesExpanding = False
                            Conditions = <
                              item
                                ConditionName = 'Оплата'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clGreen
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 8454016
                                Expression1 = '2'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Корректировка'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clBlack
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8553215
                                Expression1 = '3'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Возврат'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'USR$TYPE'
                                Font.Charset = DEFAULT_CHARSET
                                Font.Color = clBlue
                                Font.Height = -11
                                Font.Name = 'MS Sans Serif'
                                Font.Style = [fsBold]
                                Color = 16760704
                                Expression1 = '4'
                                ConditionKind = ckEqual
                                DisplayOptions = [doColor]
                                EvaluateFormula = False
                                UserCondition = False
                              end
                              item
                                ConditionName = 'Скорректированная запись'
                                DisplayFields = 
                                  'DATETIME;ABS_SUMNCU;ABS_SUMCURR;CORRECTEDBY;POST_COMMENT;POST_GU' +
                                  'EST;POST_ROOM;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVICEKEY;Z' +
                                  '_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDOCKEY_I' +
                                  'D;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;USR$FO' +
                                  'LIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z_USR$P' +
                                  'AYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$CORRECTKE' +
                                  'Y_ID;USR$TYPE;USR$CREATORKEY;Z_USR$CREATORKEY_NAME;USR$CREATORTY' +
                                  'PE;USR$DESCRIPTION;USR$SUMCURR;USR$CURRKEY;Z_USR$CURRKEY_CODE;'
                                FieldName = 'CORRECTEDBY'
                                Font.Charset = RUSSIAN_CHARSET
                                Font.Color = clSilver
                                Font.Height = -11
                                Font.Name = 'Tahoma'
                                Font.Style = []
                                Color = 8421631
                                ConditionKind = ckExist
                                DisplayOptions = [doColor, doFont]
                                EvaluateFormula = False
                                UserCondition = False
                              end>
                            ConditionsActive = True
                            CheckBox.DisplayField = ''
                            CheckBox.FieldName = ''
                            CheckBox.Visible = False
                            CheckBox.FirstColumn = False
                            ScaleColumns = False
                            MinColWidth = 40
                            ToolBar = nil
                            FinishDrawing = True
                            RememberPosition = True
                            SaveSettings = True
                            ColumnEditors = <>
                            Aliases = <>
                            ShowFooter = True
                            ShowTotals = False
                            Columns = <
                              item
                                Expanded = False
                                FieldName = 'USR$SORTNUMBER'
                                ReadOnly = False
                                Title.Caption = '№'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = -1
                                Visible = False
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taRightJustify
                                Expanded = False
                                FieldName = 'ABS_SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 72
                                Visible = True
                                DisplayFormat = '#,##0.##'
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'DATETIME'
                                Title.Caption = 'Дата, время'
                                Width = 110
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                                ReadOnly = False
                                Title.Caption = 'Тип оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_GUEST'
                                Title.Caption = 'Гость'
                                Width = 66
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_ROOM'
                                Title.Caption = 'Номер'
                                Width = 36
                                Visible = True
                              end
                              item
                                Alignment = taLeftJustify
                                Expanded = False
                                FieldName = 'POST_COMMENT'
                                Title.Caption = 'Комментарий'
                                Width = 90
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DATE'
                                ReadOnly = False
                                Title.Caption = 'Дата'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$LOGICDATE'
                                ReadOnly = False
                                Title.Caption = 'Бизнес-дата'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMNCU'
                                ReadOnly = False
                                Title.Caption = 'Сумма'
                                Width = 130
                                Visible = True
                                DisplayFormat = '#,##0.##'
                                TotalType = ttSum
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер подтверждения'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEKEY'
                                ReadOnly = False
                                Title.Caption = 'Услуга'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DOCUMENTKEY'
                                ReadOnly = False
                                Title.Caption = 'Ссылка на документ'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'ID'
                                Title.Caption = 'Идентификатор'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'DISABLED'
                                Title.Caption = 'Не активно'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITIONDATE'
                                Title.Caption = 'Дата модификации'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'EDITORKEY'
                                Title.Caption = 'Кто модифицировал'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$FOLIONUMBER'
                                ReadOnly = False
                                Title.Caption = 'Номер счета'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SERVICEDOCKEY'
                                ReadOnly = False
                                Title.Caption = 'Документ предоставления услуги'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TIME'
                                ReadOnly = False
                                Title.Caption = 'Время'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$PAYTYPEKEY'
                                ReadOnly = False
                                Title.Caption = 'Вид оплаты'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CORRECTKEY'
                                ReadOnly = False
                                Title.Caption = 'Корр. начисление'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$TYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип начисления'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'CORRECTEDBY'
                                Title.Caption = 'CORRECTEDBY'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORKEY'
                                ReadOnly = False
                                Title.Caption = 'Кто создал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_NAME'
                                ReadOnly = False
                                Title.Caption = 'Наименование'
                                Width = -1
                                Visible = False
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CREATORTYPE'
                                ReadOnly = False
                                Title.Caption = 'Тип создателя'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$DESCRIPTION'
                                ReadOnly = False
                                Title.Caption = 'Комментарий'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$SUMCURR'
                                ReadOnly = False
                                Title.Caption = 'Сумма, вал'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'USR$CURRKEY'
                                ReadOnly = False
                                Title.Caption = 'Валюта'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CURRKEY_CODE'
                                ReadOnly = False
                                Title.Caption = 'Код валюты'
                                Width = 52
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                                Title.Caption = 'Адрес'
                                Width = 260
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                                Title.Caption = '№ для сортировки'
                                Width = 130
                                Visible = True
                              end
                              item
                                Expanded = False
                                FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                                Title.Caption = '№ для сортировки (Hotel. Начисления)'
                                Width = 130
                                Visible = True
                              end>
                          end
                          object usrg_Panel2: TPanel
                            Tag = 0
                            Left = 1
                            Top = 1
                            Width = 445
                            Height = 55
                            Cursor = crDefault
                            Hint = ''
                            HelpContext = 0
                            Align = alTop
                            Alignment = taLeftJustify
                            Anchors = [akLeft, akTop, akRight]
                            AutoSize = False
                            BevelInner = bvNone
                            BevelOuter = bvNone
                            BevelWidth = 1
                            BorderWidth = 0
                            BorderStyle = bsNone
                            Caption = ''
                            Color = clBtnFace
                            Constraints.MaxHeight = 0
                            Constraints.MaxWidth = 0
                            Constraints.MinHeight = 0
                            Constraints.MinWidth = 0
                            UseDockManager = True
                            DockSite = False
                            DragCursor = crDrag
                            DragKind = dkDrag
                            DragMode = dmManual
                            Enabled = True
                            FullRepaint = True
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clWindowText
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Pitch = fpDefault
                            Font.Style = [fsBold]
                            Locked = False
                            ParentBiDiMode = True
                            ParentColor = False
                            ParentCtl3D = True
                            ParentFont = False
                            ParentShowHint = True
                            PopupMenu = nil
                            TabOrder = 1
                            TabStop = False
                            Visible = True
                            object usrg_lblDetailPostingAccount_02: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 445
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taLeftJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = 'Счет 2'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold, fsUnderline]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = False
                              Layout = tlTop
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_lblDetailPostingSum_02: TLabel
                              Tag = 0
                              Left = 0
                              Top = 0
                              Width = 445
                              Height = 29
                              Cursor = crDefault
                              Hint = ''
                              Align = alClient
                              Alignment = taRightJustify
                              Anchors = [akLeft, akTop, akRight, akBottom]
                              AutoSize = True
                              Caption = '0 BYR'
                              Constraints.MaxHeight = 0
                              Constraints.MaxWidth = 0
                              Constraints.MinHeight = 0
                              Constraints.MinWidth = 0
                              DragCursor = crDrag
                              DragKind = dkDrag
                              DragMode = dmManual
                              Enabled = True
                              FocusControl = nil
                              Font.Charset = DEFAULT_CHARSET
                              Font.Color = clWindowText
                              Font.Height = -11
                              Font.Name = 'MS Sans Serif'
                              Font.Pitch = fpDefault
                              Font.Style = [fsBold]
                              ParentBiDiMode = True
                              ParentColor = True
                              ParentFont = False
                              ParentShowHint = True
                              PopupMenu = nil
                              ShowAccelChar = True
                              Transparent = True
                              Layout = tlBottom
                              Visible = True
                              WordWrap = False
                            end
                            object usrg_tbdDetailPosting_02: TTBDock
                              Tag = 0
                              Left = 0
                              Top = 29
                              Width = 445
                              Height = 26
                              Cursor = crDefault
                              Hint = ''
                              HelpContext = 0
                              AllowDrag = True
                              Background = nil
                              BackgroundOnToolbars = True
                              BoundLines = []
                              Color = clBtnFace
                              FixAlign = False
                              LimitToOneRow = False
                              PopupMenu = nil
                              Position = dpBottom
                              Visible = True
                              object usrg_tbtDetailPosting_02: TTBToolbar
                                Tag = 0
                                Left = 0
                                Top = 0
                                Cursor = crDefault
                                HelpContext = 0
                                ActivateParent = True
                                Align = alNone
                                Anchors = [akLeft, akTop]
                                AutoResize = True
                                BorderStyle = bsSingle
                                Caption = 'usrg_tbtDetailPosting_01'
                                ChevronMoveItems = True
                                ChevronPriorityForNewItems = tbcpHighest
                                CloseButton = False
                                CloseButtonWhenDocked = False
                                Color = clBtnFace
                                DefaultDock = nil
                                DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                                DockMode = dmCannotFloatOrChangeDocks
                                DockPos = 0
                                DockRow = 1
                                DragHandleStyle = dhNone
                                FloatingMode = fmOnTopOfParentForm
                                FloatingWidth = 0
                                FullSize = True
                                HideWhenInactive = True
                                Images = usrg_ilUser_16
                                LinkSubitems = nil
                                MenuBar = False
                                Options = []
                                ParentFont = True
                                ParentShowHint = False
                                PopupMenu = nil
                                ProcessShortCuts = False
                                Resizable = True
                                ShowCaption = True
                                ShowHint = True
                                ShrinkMode = tbsmChevron
                                SmoothDrag = True
                                Stretch = False
                                SystemFont = True
                                TabOrder = 0
                                UpdateActions = True
                                UseLastDock = True
                                Visible = True
                                SavedAtRunTime = True
                                object usrg_TBItem17: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAdd_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem53: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddPayment_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem16: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem62: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddCorrect_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem72: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddReturn_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem16: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddEdit_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBItem15: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingAddDelete_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                                object usrg_TBSeparatorItem2: TTBSeparatorItem
                                  Tag = 0
                                  Blank = False
                                  Hint = ''
                                  Visible = True
                                end
                                object usrg_TBItem14: TTBItem
                                  Tag = 0
                                  Action = usrg_actDetailPostingPrint_02
                                  AutoCheck = False
                                  DisplayMode = nbdmDefault
                                  GroupIndex = 0
                                  Images = nil
                                  InheritOptions = True
                                  MaskOptions = []
                                  Options = []
                                  RadioItem = False
                                end
                              end
                            end
                          end
                        end
                      end
                      object usrg_tbdDetailPostings: TTBDock
                        Tag = 0
                        Left = 160
                        Top = 0
                        Width = 80
                        Height = 188
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        AllowDrag = True
                        Background = nil
                        BackgroundOnToolbars = True
                        BoundLines = []
                        Color = clBtnFace
                        FixAlign = False
                        LimitToOneRow = True
                        PopupMenu = nil
                        Position = dpRight
                        Visible = True
                        object usrg_tbtDetailPostingsAccounts: TTBToolbar
                          Tag = 0
                          Left = 0
                          Top = 0
                          Cursor = crDefault
                          HelpContext = 0
                          ActivateParent = True
                          Align = alNone
                          Anchors = [akLeft, akTop]
                          AutoResize = True
                          BorderStyle = bsNone
                          Caption = 'usrg_tbtDetailPostingsAccounts'
                          ChevronMoveItems = True
                          ChevronPriorityForNewItems = tbcpHighest
                          CloseButton = False
                          CloseButtonWhenDocked = False
                          Color = clBtnFace
                          DefaultDock = nil
                          DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                          DockMode = dmCannotFloatOrChangeDocks
                          DockPos = 0
                          DockRow = 0
                          DragHandleStyle = dhNone
                          FloatingMode = fmOnTopOfParentForm
                          FloatingWidth = 0
                          Font.Charset = DEFAULT_CHARSET
                          Font.Color = clWindowText
                          Font.Height = -19
                          Font.Name = 'Tahoma'
                          Font.Pitch = fpDefault
                          Font.Style = [fsBold]
                          FullSize = False
                          HideWhenInactive = True
                          Images = nil
                          LinkSubitems = nil
                          MenuBar = False
                          Options = [tboImageAboveCaption, tboNoRotation, tboSameWidth]
                          ParentFont = False
                          ParentShowHint = False
                          PopupMenu = nil
                          ProcessShortCuts = False
                          Resizable = True
                          ShowCaption = True
                          ShowHint = True
                          ShrinkMode = tbsmChevron
                          SmoothDrag = True
                          Stretch = False
                          SystemFont = False
                          TabOrder = 0
                          UpdateActions = True
                          UseLastDock = True
                          Visible = True
                          SavedAtRunTime = True
                          object usrg_tbiToggleDetailPosting_01: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_01
                            AutoCheck = True
                            Checked = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_02: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_02
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_03: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_03
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_04: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_04
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_05: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_05
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_06: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_06
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_07: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_07
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                          object usrg_tbiToggleDetailPosting_08: TTBItem
                            Tag = 0
                            Action = usrg_actTogglePostings_08
                            AutoCheck = True
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboNoRotation]
                            RadioItem = False
                          end
                        end
                        object usrg_tbtDetailPostingsOptions: TTBToolbar
                          Tag = 0
                          Left = 0
                          Top = 137
                          Cursor = crDefault
                          HelpContext = 0
                          ActivateParent = True
                          Align = alNone
                          Anchors = [akLeft, akTop]
                          AutoResize = True
                          BorderStyle = bsNone
                          Caption = 'usrg_tbtDetailPostingsOptions'
                          ChevronMoveItems = True
                          ChevronPriorityForNewItems = tbcpHighest
                          CloseButton = False
                          CloseButtonWhenDocked = False
                          Color = clBtnFace
                          DefaultDock = nil
                          DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                          DockMode = dmCannotFloatOrChangeDocks
                          DockPos = 248
                          DockRow = 0
                          DragHandleStyle = dhNone
                          FloatingMode = fmOnTopOfParentForm
                          FloatingWidth = 0
                          Font.Charset = DEFAULT_CHARSET
                          Font.Color = clWindowText
                          Font.Height = -11
                          Font.Name = 'Tahoma'
                          Font.Pitch = fpDefault
                          Font.Style = []
                          FullSize = False
                          HideWhenInactive = True
                          Images = dmImages.il16x16
                          LinkSubitems = nil
                          MenuBar = False
                          Options = [tboDefault, tboNoRotation, tboSameWidth]
                          ParentFont = False
                          ParentShowHint = False
                          PopupMenu = nil
                          ProcessShortCuts = False
                          Resizable = True
                          ShowCaption = True
                          ShowHint = True
                          ShrinkMode = tbsmChevron
                          SmoothDrag = True
                          Stretch = False
                          SystemFont = False
                          TabOrder = 1
                          UpdateActions = True
                          UseLastDock = True
                          Visible = True
                          SavedAtRunTime = True
                          object usrg_TBItem18: TTBItem
                            Tag = 0
                            Action = usrg_actShowAllPostings
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboImageAboveCaption]
                            RadioItem = False
                          end
                          object usrg_TBItem19: TTBItem
                            Tag = 0
                            Action = usrg_actShowNotEmptyPostings
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = [tboImageAboveCaption]
                            RadioItem = False
                          end
                        end
                      end
                    end
                    object usrg_tbsAllPostings: TTabSheet
                      Tag = 0
                      Cursor = crDefault
                      Hint = ''
                      HelpContext = 0
                      BorderWidth = 0
                      Caption = 'Все начисления'
                      DragMode = dmManual
                      Enabled = True
                      Highlighted = False
                      ImageIndex = 0
                      Constraints.MaxHeight = 0
                      Constraints.MaxWidth = 0
                      Constraints.MinHeight = 0
                      Constraints.MinWidth = 0
                      ParentFont = True
                      ParentShowHint = True
                      PopupMenu = nil
                      TabVisible = True
                      object usrg_tbdAllPostings: TTBDock
                        Tag = 0
                        Left = 0
                        Top = 0
                        Width = 240
                        Height = 26
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        AllowDrag = True
                        Background = nil
                        BackgroundOnToolbars = True
                        BoundLines = []
                        Color = clBtnFace
                        FixAlign = False
                        LimitToOneRow = False
                        PopupMenu = nil
                        Position = dpTop
                        Visible = True
                        object usrg_tbtAllPostings: TTBToolbar
                          Tag = 0
                          Left = 0
                          Top = 0
                          Cursor = crDefault
                          HelpContext = 0
                          ActivateParent = True
                          Align = alNone
                          Anchors = [akLeft, akTop]
                          AutoResize = True
                          BorderStyle = bsNone
                          Caption = 'usrg_tbtAllPostings'
                          ChevronMoveItems = True
                          ChevronPriorityForNewItems = tbcpHighest
                          CloseButton = False
                          CloseButtonWhenDocked = False
                          Color = clBtnFace
                          DefaultDock = nil
                          DockableTo = [dpTop, dpBottom, dpLeft, dpRight]
                          DockMode = dmCannotFloatOrChangeDocks
                          DockPos = 0
                          DockRow = 1
                          DragHandleStyle = dhNone
                          FloatingMode = fmOnTopOfParentForm
                          FloatingWidth = 0
                          Font.Charset = RUSSIAN_CHARSET
                          Font.Color = clWindowText
                          Font.Height = -11
                          Font.Name = 'Tahoma'
                          Font.Pitch = fpDefault
                          Font.Style = []
                          FullSize = True
                          HideWhenInactive = True
                          Images = usrg_ilUser_16
                          LinkSubitems = nil
                          MenuBar = False
                          Options = []
                          ParentFont = False
                          ParentShowHint = True
                          PopupMenu = nil
                          ProcessShortCuts = False
                          Resizable = True
                          ShowCaption = True
                          ShrinkMode = tbsmChevron
                          SmoothDrag = True
                          Stretch = False
                          SystemFont = True
                          TabOrder = 0
                          UpdateActions = True
                          UseLastDock = True
                          Visible = True
                          SavedAtRunTime = True
                          object usrg_TBItem9: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingAdd
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                          object usrg_TBItem51: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingAddPayment
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                          object usrg_TBSeparatorItem14: TTBSeparatorItem
                            Tag = 0
                            Blank = False
                            Hint = ''
                            Visible = True
                          end
                          object usrg_TBItem60: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingAddCorrect
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                          object usrg_TBItem70: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingAddReturn
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                          object usrg_TBSeparatorItem12: TTBSeparatorItem
                            Tag = 0
                            Blank = False
                            Hint = ''
                            Visible = True
                          end
                          object usrg_TBItem8: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingEdit
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                          object usrg_TBItem7: TTBItem
                            Tag = 0
                            Action = usrg_actAllPostingDelete
                            AutoCheck = False
                            DisplayMode = nbdmImageAndText
                            GroupIndex = 0
                            Images = nil
                            InheritOptions = True
                            MaskOptions = []
                            Options = []
                            RadioItem = False
                          end
                        end
                      end
                      object usrg_ibgrAllPostingList: TgsIBGrid
                        Tag = 0
                        Left = 0
                        Top = 26
                        Width = 240
                        Height = 162
                        Cursor = crDefault
                        Hint = ''
                        HelpContext = 0
                        TabStop = True
                        Align = alClient
                        Anchors = [akLeft, akTop, akRight, akBottom]
                        BorderStyle = bsSingle
                        Constraints.MaxHeight = 0
                        Constraints.MaxWidth = 0
                        Constraints.MinHeight = 0
                        Constraints.MinWidth = 0
                        DataSource = usrg_dsAllPostingList
                        DefaultDrawing = True
                        DragCursor = crDrag
                        DragKind = dkDrag
                        DragMode = dmManual
                        Enabled = True
                        ImeMode = imDontCare
                        ImeName = ''
                        Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgConfirmDelete, dgCancelOnExit]
                        ParentBiDiMode = True
                        ParentColor = False
                        ParentCtl3D = True
                        ParentFont = False
                        ParentShowHint = True
                        PopupMenu = nil
                        ReadOnly = True
                        TabOrder = 1
                        Visible = True
                        TableFont.Style = []
                        TableColor = clWindow
                        SelectedFont.Style = []
                        SelectedColor = clHighlight
                        TitleFont.Style = []
                        TitleColor = clBtnFace
                        RefreshType = rtCloseOpen
                        Striped = True
                        StripeOdd = 15201271
                        StripeEven = 14084071
                        InternalMenuKind = imkWithSeparator
                        Expands = <>
                        ExpandsActive = False
                        ExpandsSeparate = False
                        TitlesExpanding = False
                        Conditions = <
                          item
                            ConditionName = 'Оплата'
                            DisplayFields = 
                              'DATETIME;ABS_SUMNCU;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVIC' +
                              'EKEY;Z_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDO' +
                              'CKEY_ID;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;' +
                              'USR$FOLIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z' +
                              '_USR$PAYTYPEKEY_USR$NAME;'
                            FieldName = 'USR$TYPE'
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clGreen
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Style = [fsBold]
                            Color = clWhite
                            Expression1 = '2'
                            ConditionKind = ckEqual
                            DisplayOptions = [doFont]
                            EvaluateFormula = False
                            UserCondition = False
                          end
                          item
                            ConditionName = 'Корректировка'
                            DisplayFields = 
                              'DATETIME;ABS_SUMNCU;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVIC' +
                              'EKEY;Z_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDO' +
                              'CKEY_ID;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;' +
                              'USR$FOLIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z' +
                              '_USR$PAYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$COR' +
                              'RECTKEY_ID;'
                            FieldName = 'USR$TYPE'
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clRed
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Style = [fsBold]
                            Color = clWhite
                            Expression1 = '3'
                            ConditionKind = ckEqual
                            DisplayOptions = [doFont]
                            EvaluateFormula = False
                            UserCondition = False
                          end
                          item
                            ConditionName = 'Возврат'
                            DisplayFields = 
                              'DATETIME;ABS_SUMNCU;ID;DISABLED;EDITIONDATE;EDITORKEY;USR$SERVIC' +
                              'EKEY;Z_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_USR$SERVICEDO' +
                              'CKEY_ID;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY_USR$NUMBER;' +
                              'USR$FOLIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$PAYTYPEKEY;Z' +
                              '_USR$PAYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTKEY;Z_USR$COR' +
                              'RECTKEY_ID;USR$TYPE;'
                            FieldName = 'USR$TYPE'
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clBlue
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Style = [fsBold]
                            Color = clWhite
                            Expression1 = '4'
                            ConditionKind = ckEqual
                            DisplayOptions = [doFont]
                            EvaluateFormula = False
                            UserCondition = False
                          end
                          item
                            ConditionName = 'Скорректированная запись'
                            DisplayFields = 
                              'DATETIME;ABS_SUMNCU;CORRECTEDBY;ID;DISABLED;EDITIONDATE;EDITORKE' +
                              'Y;USR$SERVICEKEY;Z_USR$SERVICEKEY_USR$NAME;USR$SERVICEDOCKEY;Z_U' +
                              'SR$SERVICEDOCKEY_ID;USR$SUMNCU;USR$DOCUMENTKEY;Z_USR$DOCUMENTKEY' +
                              '_USR$NUMBER;USR$FOLIONUMBER;USR$DATE;USR$TIME;USR$LOGICDATE;USR$' +
                              'PAYTYPEKEY;Z_USR$PAYTYPEKEY_USR$NAME;USR$SORTNUMBER;USR$CORRECTK' +
                              'EY;Z_USR$CORRECTKEY_ID;USR$TYPE;'
                            FieldName = 'CORRECTEDBY'
                            Font.Charset = DEFAULT_CHARSET
                            Font.Color = clRed
                            Font.Height = -11
                            Font.Name = 'MS Sans Serif'
                            Font.Style = []
                            Color = clWhite
                            ConditionKind = ckExist
                            DisplayOptions = [doFont]
                            EvaluateFormula = False
                            UserCondition = False
                          end>
                        ConditionsActive = True
                        CheckBox.DisplayField = ''
                        CheckBox.FieldName = ''
                        CheckBox.Visible = False
                        CheckBox.FirstColumn = False
                        ScaleColumns = False
                        MinColWidth = 40
                        ToolBar = nil
                        FinishDrawing = True
                        RememberPosition = True
                        SaveSettings = True
                        ColumnEditors = <>
                        Aliases = <>
                        ShowFooter = False
                        ShowTotals = True
                        Columns = <
                          item
                            Expanded = False
                            FieldName = 'USR$SORTNUMBER'
                            ReadOnly = False
                            Title.Caption = '№'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$SERVICEKEY_USR$NAME'
                            ReadOnly = False
                            Title.Caption = 'Услуга'
                            Width = 130
                            Visible = True
                          end
                          item
                            Alignment = taRightJustify
                            Expanded = False
                            FieldName = 'ABS_SUMNCU'
                            Title.Caption = 'Сумма, руб'
                            Width = 90
                            Visible = True
                            DisplayFormat = '#,##0.##'
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'DATETIME'
                            Title.Caption = 'Дата, время'
                            Width = 126
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$PAYTYPEKEY_USR$NAME'
                            ReadOnly = False
                            Title.Caption = 'Тип оплаты'
                            Width = 130
                            Visible = True
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'POST_COMMENT'
                            Title.Caption = 'Комментарий'
                            Width = 90
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SUMNCU'
                            ReadOnly = False
                            Title.Caption = 'Сумма, руб'
                            Width = 130
                            Visible = True
                            DisplayFormat = '#,##0.##'
                            TotalType = ttSum
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SERVICEKEY'
                            ReadOnly = False
                            Title.Caption = 'Услуга'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$DOCUMENTKEY_USR$NUMBER'
                            ReadOnly = False
                            Title.Caption = 'Номер подтверждения'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'ID'
                            Title.Caption = 'Идентификатор'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'DISABLED'
                            Title.Caption = 'Не активно'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'EDITIONDATE'
                            Title.Caption = 'Дата модификации'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'EDITORKEY'
                            Title.Caption = 'Кто модифицировал'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SERVICEDOCKEY'
                            ReadOnly = False
                            Title.Caption = 'Документ предоставления услуги'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DOCUMENTKEY'
                            ReadOnly = False
                            Title.Caption = 'Документ бронирования'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$FOLIONUMBER'
                            ReadOnly = False
                            Title.Caption = 'Номер счета'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DATE'
                            ReadOnly = False
                            Title.Caption = 'Дата'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$TIME'
                            ReadOnly = False
                            Title.Caption = 'Время'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$LOGICDATE'
                            ReadOnly = False
                            Title.Caption = 'Бизнес-дата'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$PAYTYPEKEY'
                            ReadOnly = False
                            Title.Caption = 'Вид оплаты'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$CORRECTKEY'
                            ReadOnly = False
                            Title.Caption = 'Корр. начисление'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$TYPE'
                            ReadOnly = False
                            Title.Caption = 'Тип начисления'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'CORRECTEDBY'
                            Title.Caption = 'CORRECTEDBY'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$CREATORKEY'
                            ReadOnly = False
                            Title.Caption = 'Кто создал'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$CREATORKEY_NAME'
                            ReadOnly = False
                            Title.Caption = 'Наименование'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$CREATORTYPE'
                            ReadOnly = False
                            Title.Caption = 'Тип создателя'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$DESCRIPTION'
                            ReadOnly = False
                            Title.Caption = 'Комментарий'
                            Width = 130
                            Visible = True
                          end
                          item
                            Alignment = taRightJustify
                            Expanded = False
                            FieldName = 'ABS_SUMCURR'
                            Title.Caption = 'ABS_SUMCURR'
                            Width = -1
                            Visible = False
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'POST_GUEST'
                            Title.Caption = 'POST_GUEST'
                            Width = -1
                            Visible = False
                          end
                          item
                            Alignment = taLeftJustify
                            Expanded = False
                            FieldName = 'POST_ROOM'
                            Title.Caption = 'POST_ROOM'
                            Width = -1
                            Visible = False
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$SUMCURR'
                            ReadOnly = False
                            Title.Caption = 'Сумма, вал'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'USR$CURRKEY'
                            ReadOnly = False
                            Title.Caption = 'Валюта'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$CURRKEY_CODE'
                            ReadOnly = False
                            Title.Caption = 'Код валюты'
                            Width = 52
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$CREATORKEY_ADDRESS'
                            Title.Caption = 'Адрес'
                            Width = 260
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$SERVICEDOCKEY_US479893728'
                            Title.Caption = '№ для сортировки'
                            Width = 130
                            Visible = True
                          end
                          item
                            Expanded = False
                            FieldName = 'Z_USR$CORRECTKEY_USR$SORTNUMBER'
                            Title.Caption = '№ для сортировки (Hotel. Начисления)'
                            Width = 130
                            Visible = True
                          end>
                      end
                    end
                  end
                  object usrat_DBEdit_Z_USR_STATEKEY_USR_NAME: TDBEdit
                    Left = 516
                    Top = 43
                    TabOrder = 2
                  end
                end
                object usrat_gsIBLookupComboBox_USR_DISCOUNTKEY: TgsIBLookupComboBox
                  Left = 85
                  Top = 72
                  Width = 68
                  Fields = 'USR$PERCENT'
                  ListTable = 
                    'USR$HT_DISCOUNT disc LEFT JOIN GD_DOCUMENT d ON d.ID = disc.DOCU' +
                    'MENTKEY'
                  ListField = 'disc.USR$REASON'
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 2
                end
                object usrat_DBEdit_USR_COMMENTTAX: TDBEdit
                  Left = 83
                  Top = 91
                  Width = 251
                  TabOrder = 3
                end
              end
            end
            object usrg_TabSheet1: TTabSheet
              Tag = 0
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              BorderWidth = 0
              Caption = 'usrg_TabSheet1'
              DragMode = dmManual
              Enabled = True
              Highlighted = False
              ImageIndex = 0
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabVisible = False
              object atAttributes: TatContainer
                Left = 0
                Top = 0
                Width = 909
                Height = 615
                HorzScrollBar.Position = 0
                VertScrollBar.Position = 75
                Align = alClient
                Anchors = [akLeft, akTop, akRight, akBottom]
                BorderStyle = bsSingle
                TabOrder = 0
                Visible = True
                object usrg_lblTotalPartSumValue: TLabel
                  Tag = 0
                  Left = 145
                  Top = 66
                  Width = 90
                  Height = 21
                  Cursor = crDefault
                  Hint = ''
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  Caption = '3 817,67'
                  Color = clWhite
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  Font.Charset = RUSSIAN_CHARSET
                  Font.Color = clWindowText
                  Font.Height = -11
                  Font.Name = 'Tahoma'
                  Font.Pitch = fpDefault
                  Font.Style = [fsBold]
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  Transparent = False
                  Layout = tlCenter
                  Visible = True
                  WordWrap = False
                end
                object usrg_lblDayRateSumValue: TLabel
                  Tag = 0
                  Left = 145
                  Top = 91
                  Width = 90
                  Height = 21
                  Cursor = crDefault
                  Hint = ''
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  Caption = '2 683,62'
                  Color = clWhite
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  Transparent = False
                  Layout = tlCenter
                  Visible = True
                  WordWrap = False
                end
                object usrg_lblResortTaxCost: TLabel
                  Tag = 0
                  Left = 303
                  Top = 12
                  Width = 90
                  Height = 21
                  Cursor = crDefault
                  Hint = ''
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  Caption = '114,53'
                  Color = clWhite
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  Transparent = False
                  Layout = tlCenter
                  Visible = True
                  WordWrap = False
                end
                object usrg_lblResortTaxPercent: TLabel
                  Tag = 0
                  Left = 103
                  Top = 12
                  Width = 66
                  Height = 21
                  Cursor = crDefault
                  Hint = ''
                  Align = alNone
                  Alignment = taCenter
                  Anchors = [akLeft, akTop]
                  AutoSize = False
                  Caption = '3'
                  Color = clWhite
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  Transparent = False
                  Layout = tlCenter
                  Visible = True
                  WordWrap = False
                end
                object usrg_USR_HT_RESERVATION_Label1: TLabel
                  Tag = 0
                  Left = 593
                  Top = 42
                  Width = 68
                  Height = 13
                  Cursor = crDefault
                  Hint = ''
                  Align = alNone
                  Alignment = taLeftJustify
                  Anchors = [akLeft, akTop]
                  AutoSize = True
                  Caption = 'Не оплачено:'
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  Transparent = False
                  Layout = tlTop
                  Visible = True
                  WordWrap = False
                end
                object usrat_DBEdit_Z_USR_RACEKEY_USR_NAME_Label: TLabel
                  Left = 109
                  Top = 46
                end
                object usrat_DBEdit_Z_USR_TYPE_PERMIT_USR_NAME_Label: TLabel
                  Left = 5
                  Top = 32
                end
                object usrat_DBEdit_Z_USR_PAYMENTMETHODKEY_USR_NAME_Label: TLabel
                  Left = 5
                  Top = 1135
                end
                object usrat_DBEdit_Z_USR_CLIENTCATEGORYK2852576560_Label: TLabel
                  Left = 65
                  Top = 1603
                end
                object usrat_DBEdit_Z_USR_ROOMPLACEKEY_USR_NAME_Label: TLabel
                  Left = 45
                  Top = 1575
                end
                object usrat_gsIBLookupComboBox_USR_COMPANYKEY_Label: TLabel
                  Left = 298
                  Top = 114
                  Width = 70
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_gsIBLookupComboBox_USR_TRAVELAGENTKEY_Label: TLabel
                  Left = 298
                  Top = 139
                  Width = 55
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_Z_USR_RESERVKEY_USR_NUMBER_Label: TLabel
                  Left = 36
                  Top = 367
                end
                object usrat_gsIBLookupComboBox_USR_CREATORKEY_Label: TLabel
                  Left = 5
                  Top = 821
                end
                object usrat_DBEdit_USR_DAYRATESUM_Label: TLabel
                  Left = 366
                  Top = 68
                  Width = 68
                  Caption = 'Полная цена:'
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_gsIBLookupComboBox_USR_CURRKEY_Label: TLabel
                  Left = 10
                  Top = 1766
                  Width = 43
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_xDateDBEdit_USR_CONFIRMRESERVDATE_Label: TLabel
                  Left = -11
                  Top = 1418
                end
                object usrat_DBEdit_USR_DAYRATE_Label: TLabel
                  Left = 5
                  Top = 998
                end
                object usrat_DBEdit_USR_DAYRATEPART_Label: TLabel
                  Left = 5
                  Top = 1021
                end
                object usrat_DBEdit_USR_INCOMETAX_Label: TLabel
                  Left = 80
                  Top = 202
                  Width = 101
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_USR_PARTPRICEDAYNUMBER_Label: TLabel
                  Left = 5
                  Top = 1906
                end
                object usrat_gsIBLookupComboBox_USR_RACEKEY_Label: TLabel
                  Left = 40
                  Top = 139
                  Width = 34
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_USR_ID_PLACE_Label: TLabel
                  Left = 5
                  Top = 1055
                end
                object usrat_DBEdit_USR_DAYRATENCU_Label: TLabel
                  Left = 5
                  Top = 1273
                end
                object usrat_DBEdit_USR_DAYRATESUMNCU_Label: TLabel
                  Left = 590
                  Top = 68
                  Width = 61
                  Caption = 'Цена в BYN:'
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_USR_SUMNCU_Label: TLabel
                  Left = 583
                  Top = 42
                  Width = 66
                  Caption = 'Сумма в BYN:'
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_xDateDBEdit_USR_DATEPAY_Label: TLabel
                  Left = 583
                  Top = 19
                  Width = 71
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_USR_SUMDISCNCU_Label: TLabel
                  Left = 8
                  Top = 76
                  Width = 66
                  Caption = 'Сумма в BYN:'
                  Font.Style = []
                  ParentFont = False
                end
                object usrat_DBEdit_USR_SUMRUR_Label: TLabel
                  Left = 12
                  Top = 1545
                end
                object usrat_DBEdit_USR_NUM_Label: TLabel
                  Left = 12
                  Top = 1568
                end
                object usrat_gsIBLookupComboBox_USR_TARIFKEY_Label: TLabel
                  Left = 593
                  Top = 19
                  Width = 36
                end
                object usrat_DBEdit_USR_REQUESTLINEKEY_Label: TLabel
                  Left = 12
                  Top = 1614
                end
                object usrat_DBEdit_USR_DAYRATERUR_Label: TLabel
                  Left = 27
                  Top = 1721
                end
                object usrat_DBEdit_USR_DAYRATECUR_Label: TLabel
                  Left = 27
                  Top = 1744
                end
                object usrat_DBEdit_USR_SUMCUR_Label: TLabel
                  Left = 27
                  Top = 1767
                end
                object usrat_DBEdit_USR_PERC_LOYALTY_Label: TLabel
                  Left = 8
                  Top = 49
                  Width = 42
                  Height = 13
                  AutoSize = False
                  Caption = '% доп:'
                  Font.Style = []
                  ParentFont = False
                  WordWrap = True
                end
                object usrat_xDateDBEdit_USR_DATECURR_Label: TLabel
                  Top = 1935
                end
                object usrat_xDateDBEdit_USR_DATEENDPLANNED_Label: TLabel
                  Top = 1935
                end
                object usrat_DBEdit_Z_USR_PAYTYPEKEY_USR_NAME_Label: TLabel
                  Left = 5
                  Top = 2
                end
                object usrat_DBEdit_Z_USR_NUMBERTYPEKEY_U3773178371_Label: TLabel
                  Left = 42
                  Top = 1731
                end
                object usrat_DBEdit_Z_USR_STATENUMBERKEY_USR_NAME_Label: TLabel
                  Top = 3527
                end
                object usrat_DBEdit_Z_USR_NUMBERKEY_USR_NAME_Label: TLabel
                  Left = 5
                  Top = 48
                end
                object usrat_DBEdit_Z_USR_DISCOUNTKEY_USR_PERCENT_Label: TLabel
                  Left = 30
                  Top = 77
                  Width = 61
                  Caption = 'Тип скидки:'
                  ParentFont = False
                end
                object usrg_gbDocBefore: TGroupBox
                  Tag = 0
                  Left = 0
                  Top = 3544
                  Width = 889
                  Height = 174
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alBottom
                  Anchors = [akLeft, akTop, akRight]
                  Caption = 'Если предварительно был выписан документ'
                  Constraints.MaxHeight = 174
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DockSite = False
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  Font.Charset = RUSSIAN_CHARSET
                  Font.Color = clWindowText
                  Font.Height = -11
                  Font.Name = 'Tahoma'
                  Font.Pitch = fpDefault
                  Font.Style = [fsBold]
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentCtl3D = True
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  TabOrder = 18
                  TabStop = False
                  Visible = True
                  object usrat_gsIBLookupComboBox_USR_APPLICATIONKEY_Label: TLabel
                    Left = 9
                    Top = 33
                    Width = 40
                    Caption = 'Заявка:'
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_RESERVKEY_Label: TLabel
                    Left = 9
                    Top = 57
                    Width = 76
                    Font.Style = []
                    ParentFont = False
                  end
                  object usrat_gsIBLookupComboBox_USR_APPLICATIONKEY: TgsIBLookupComboBox
                    Left = 157
                    Top = 28
                    Fields = 'C.NAME'
                    ListTable = 
                      'USR$SAN_PERSONAL_APPLICATION a join gd_document d on d.id = a.do' +
                      'cumentkey left join gd_contact c on c.id = a.usr$contactkey'
                    ListField = 'D.NUMBER'
                    KeyField = 'DOCUMENTKEY'
                    Enabled = True
                    Font.Style = []
                    ItemHeight = 13
                    ParentFont = False
                    TabOrder = 0
                    Visible = True
                  end
                  object usrat_gsIBLookupComboBox_USR_RESERVKEY: TgsIBLookupComboBox
                    Left = 157
                    Top = 57
                    SubType = 'USR$HT_RESERVATION'
                    Font.Style = []
                    ParentFont = False
                    TabOrder = 1
                  end
                end
                object usrg_Check_INCOMETAX: TCheckBox
                  Tag = 0
                  Left = 187
                  Top = 200
                  Width = 17
                  Height = 17
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  TabStop = True
                  Action = nil
                  Alignment = taRightJustify
                  AllowGrayed = False
                  Anchors = [akLeft, akTop]
                  Caption = ''
                  Checked = False
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  State = cbUnchecked
                  TabOrder = 20
                  Visible = True
                end
                object usrg_StaticText2: TStaticText
                  Tag = 0
                  Left = 237
                  Top = 14
                  Width = 39
                  Height = 17
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alNone
                  Alignment = taLeftJustify
                  Anchors = [akLeft, akTop]
                  AutoSize = True
                  BorderStyle = sbsNone
                  Caption = 'Сумма:'
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  Font.Style = []
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentFont = False
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  TabOrder = 28
                  TabStop = False
                  Visible = True
                end
                object usrg_StaticText1: TStaticText
                  Tag = 0
                  Left = 176
                  Top = 14
                  Width = 15
                  Height = 17
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  Align = alNone
                  Alignment = taLeftJustify
                  Anchors = [akLeft, akTop]
                  AutoSize = True
                  BorderStyle = sbsNone
                  Caption = '%'
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  FocusControl = nil
                  ParentBiDiMode = True
                  ParentColor = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ShowAccelChar = True
                  TabOrder = 29
                  TabStop = False
                  Visible = True
                end
                object usrg_USR_HT_RESERVATION_DBEdit1: TDBEdit
                  Tag = 0
                  Left = 667
                  Top = 40
                  Width = 83
                  Height = 21
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  TabStop = True
                  Anchors = [akLeft, akTop]
                  AutoSelect = True
                  AutoSize = True
                  BorderStyle = bsSingle
                  CharCase = ecNormal
                  Color = clMenu
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DataField = 'REMAINS'
                  DataSource = dsgdcBase
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  ImeMode = imDontCare
                  ImeName = ''
                  MaxLength = 0
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PasswordChar = #0
                  PopupMenu = nil
                  ReadOnly = False
                  TabOrder = 36
                  Visible = True
                end
                object usrat_DBEdit_Z_USR_RACEKEY_USR_NAME: TDBEdit
                  Left = 242
                  Top = 34
                  TabOrder = 1
                end
                object usrat_DBEdit_Z_USR_TYPE_PERMIT_USR_NAME: TDBEdit
                  Left = 242
                  Top = 28
                  TabOrder = 19
                end
                object usrat_DBCheckBox_USR_PRICEFORPERMIT: TDBCheckBox
                  Left = 584
                  Top = 43
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 35
                end
                object usrat_DBEdit_Z_USR_PAYMENTMETHODKEY_USR_NAME: TDBEdit
                  Left = 242
                  Top = 1131
                  TabOrder = 26
                end
                object usrat_DBEdit_Z_USR_CLIENTCATEGORYK2852576560: TDBEdit
                  Left = 264
                  Top = 1611
                  TabOrder = 4
                end
                object usrat_DBEdit_Z_USR_TARRIFTYPEKEY_USR_NAME: TDBEdit
                  Left = 85
                  Top = 1810
                  Width = 151
                  Color = 11141119
                  Enabled = False
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 7
                end
                object usrat_DBEdit_Z_USR_ROOMPLACEKEY_USR_NAME: TDBEdit
                  Left = 136
                  Top = 282
                  TabOrder = 9
                end
                object usrat_gsIBLookupComboBox_USR_COMPANYKEY: TgsIBLookupComboBox
                  Left = 377
                  Top = 110
                  Width = 210
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 24
                end
                object usrat_gsIBLookupComboBox_USR_TRAVELAGENTKEY: TgsIBLookupComboBox
                  Left = 377
                  Top = 135
                  Width = 210
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 22
                end
                object usrat_gsIBLookupComboBox_USR_NUMBERKEY: TgsIBLookupComboBox
                  Left = 85
                  Top = 67
                  Width = 100
                  SortOrder = soAsc
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 3
                end
                object usrat_DBEdit_Z_USR_RESERVKEY_USR_NUMBER: TDBEdit
                  Left = 235
                  Top = 363
                  TabOrder = 13
                end
                object usrat_gsIBLookupComboBox_USR_CREATORKEY: TgsIBLookupComboBox
                  Left = 204
                  Top = 817
                  TabOrder = 2
                end
                object usrat_DBEdit_USR_DAYRATESUM: TxDBCalculatorEdit
                  Left = 473
                  Top = 64
                  Width = 90
                  Cursor = crIBeam
                  TabStop = False
                  Color = clMenu
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 30
                end
                object usrat_DBCheckBox_USR_ISNUMBERLOCKED: TDBCheckBox
                  Left = 76
                  Top = 1846
                  TabOrder = 8
                end
                object usrat_gsIBLookupComboBox_USR_CURRKEY: TgsIBLookupComboBox
                  Left = 132
                  Top = 1762
                  Width = 140
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 5
                end
                object usrat_xDateDBEdit_USR_CONFIRMRESERVDATE: TxDateDBEdit
                  Left = 133
                  Top = 1414
                  Width = 84
                  TabOrder = 45
                end
                object usrat_DBEdit_USR_DAYRATE: TxDBCalculatorEdit
                  Left = 242
                  Top = 994
                  Cursor = crArrow
                  TabOrder = 10
                end
                object usrat_DBEdit_USR_DAYRATEPART: TxDBCalculatorEdit
                  Left = 242
                  Top = 1017
                  Cursor = crIBeam
                  TabOrder = 11
                end
                object usrat_DBEdit_USR_INCOMETAX: TxDBCalculatorEdit
                  Left = 217
                  Top = 198
                  Width = 90
                  Cursor = crIBeam
                  TabOrder = 21
                end
                object usrat_DBEdit_USR_PARTPRICEDAYNUMBER: TxDBCalculatorEdit
                  Left = 242
                  Top = 1902
                  Cursor = crIBeam
                  TabOrder = 12
                end
                object usrat_gsIBLookupComboBox_USR_RACEKEY: TgsIBLookupComboBox
                  Left = 117
                  Top = 135
                  SortField = 'usr$datefrom ASC, usr$dateto ASC'
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 17
                end
                object usrat_DBCheckBox_USR_EXTENSION_OF_STAY: TDBCheckBox
                  Left = 5
                  Top = 1868
                  TabOrder = 15
                end
                object usrat_DBCheckBox_USR_EARLY_EVICTION: TDBCheckBox
                  Left = 13
                  Top = 1887
                  TabOrder = 16
                end
                object usrat_DBEdit_USR_ID_PLACE: TxDBCalculatorEdit
                  Left = 242
                  Top = 1051
                  Cursor = crIBeam
                  TabOrder = 23
                end
                object usrat_DBCheckBox_USR_ISQUOTA: TDBCheckBox
                  Left = 5
                  Top = 1181
                  TabOrder = 25
                end
                object usrat_DBEdit_USR_DAYRATENCU: TxDBCalculatorEdit
                  Left = 242
                  Top = 1269
                  Cursor = crIBeam
                  TabOrder = 27
                end
                object usrat_DBEdit_USR_DAYRATESUMNCU: TxDBCalculatorEdit
                  Left = 669
                  Top = 64
                  Width = 68
                  Cursor = crIBeam
                  TabStop = False
                  Color = clMenu
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 31
                end
                object usrat_DBEdit_USR_SUMNCU: TxDBCalculatorEdit
                  Left = 662
                  Top = 40
                  Width = 68
                  Cursor = crIBeam
                  TabStop = False
                  Color = clMenu
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 32
                end
                object usrat_xDateDBEdit_USR_DATEPAY: TxDateDBEdit
                  Left = 662
                  Top = 15
                  Width = 68
                  Font.Style = []
                  ParentFont = False
                  TabOrder = 33
                end
                object usrat_DBEdit_USR_SUMDISCNCU: TxDBCalculatorEdit
                  Left = 85
                  Top = 72
                  Width = 68
                  Cursor = crIBeam
                  TabStop = False
                  Color = clMenu
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 34
                end
                object usrat_DBEdit_USR_SUMRUR: TxDBCalculatorEdit
                  Left = 249
                  Top = 1541
                  Cursor = crIBeam
                end
                object usrat_DBEdit_USR_NUM: TxDBCalculatorEdit
                  Left = 249
                  Top = 1564
                  Cursor = crIBeam
                end
                object usrat_gsIBLookupComboBox_USR_TARIFKEY: TgsIBLookupComboBox
                  Left = 673
                  Top = 15
                  Width = 84
                  Fields = 
                    'l.USR$COSTNCU, l.USR$COSTNCU_JOIN, l.USR$COSTRUR, l.USR$COSTRUR_' +
                    'JOIN'
                  ListTable = 
                    'USR$HT_TARRIFLINE l LEFT JOIN GD_DOCUMENT d ON d.ID = l.DOCUMENT' +
                    'KEY LEFT JOIN USR$HT_SERVICE s ON s.ID = l.USR$SERVICEKEY'
                  ListField = 's.USR$NAME'
                  KeyField = 'l.DOCUMENTKEY'
                  TabOrder = 37
                end
                object usrat_DBEdit_USR_REQUESTLINEKEY: TxDBCalculatorEdit
                  Left = 249
                  Top = 1610
                  Cursor = crIBeam
                end
                object usrat_DBEdit_USR_DAYRATERUR: TxDBCalculatorEdit
                  Left = 274
                  Top = 1717
                  Cursor = crIBeam
                end
                object usrat_DBEdit_USR_DAYRATECUR: TxDBCalculatorEdit
                  Left = 274
                  Top = 1740
                  Cursor = crIBeam
                end
                object usrat_DBEdit_USR_SUMCUR: TxDBCalculatorEdit
                  Left = 274
                  Top = 1763
                  Cursor = crIBeam
                end
                object usrat_xDateDBEdit_USR_DATECURR: TxDateDBEdit
                  Top = 1931
                end
                object usrat_xDateDBEdit_USR_DATEENDPLANNED: TxDateDBEdit
                  Top = 1931
                end
                object usrat_DBEdit_Z_USR_PAYTYPEKEY_USR_NAME: TDBEdit
                  Left = 204
                  Top = -2
                  TabOrder = 0
                end
                object usrat_DBEdit_Z_USR_NUMBERTYPEKEY_U3773178371: TDBEdit
                  Left = 280
                  Top = 1727
                  TabOrder = 14
                end
                object usrat_DBEdit_Z_USR_STATENUMBERKEY_USR_NAME: TDBEdit
                  Top = 3523
                  TabOrder = 48
                end
                object usrat_DBEdit_Z_USR_NUMBERKEY_USR_NAME: TDBEdit
                  Left = 85
                  Top = 1785
                  Width = 104
                  Enabled = False
                  Font.Style = []
                  ParentFont = False
                  ReadOnly = True
                  TabOrder = 6
                end
                object usrat_DBEdit_Z_USR_DISCOUNTKEY_USR_PERCENT: TxDBCalculatorEdit
                  Left = 107
                  Top = 73
                  Width = 68
                  Cursor = crIBeam
                  TabOrder = 38
                end
              end
            end
            object usrg_USR_HT_RESERVATION_TabSheet1: TTabSheet
              Tag = 0
              Cursor = crDefault
              Hint = ''
              HelpContext = 0
              BorderWidth = 0
              Caption = 'История'
              DragMode = dmManual
              Enabled = True
              Highlighted = False
              ImageIndex = 0
              Constraints.MaxHeight = 0
              Constraints.MaxWidth = 0
              Constraints.MinHeight = 0
              Constraints.MinWidth = 0
              ParentFont = True
              ParentShowHint = True
              PopupMenu = nil
              TabVisible = True
              object usrg_USR_HT_RESERVATION_Panel2: TPanel
                Tag = 0
                Left = 0
                Top = 0
                Width = 909
                Height = 615
                Cursor = crDefault
                Hint = ''
                HelpContext = 0
                Align = alClient
                Alignment = taCenter
                Anchors = [akLeft, akTop, akRight, akBottom]
                AutoSize = False
                BevelInner = bvNone
                BevelOuter = bvNone
                BevelWidth = 1
                BorderWidth = 2
                BorderStyle = bsNone
                Caption = ''
                Color = clBtnFace
                Constraints.MaxHeight = 0
                Constraints.MaxWidth = 0
                Constraints.MinHeight = 0
                Constraints.MinWidth = 0
                UseDockManager = True
                DockSite = False
                DragCursor = crDrag
                DragKind = dkDrag
                DragMode = dmManual
                Enabled = True
                FullRepaint = True
                Locked = False
                ParentBiDiMode = True
                ParentColor = False
                ParentCtl3D = True
                ParentFont = True
                ParentShowHint = True
                PopupMenu = nil
                TabOrder = 0
                TabStop = False
                Visible = True
                object usrg_USR_HT_RESERVATION_Splitter1: TSplitter
                  Tag = 0
                  Left = 572
                  Top = 2
                  Width = 3
                  Height = 611
                  Cursor = crHSplit
                  Hint = ''
                  Align = alLeft
                  AutoSnap = True
                  Beveled = False
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  MinSize = 30
                  ParentColor = True
                  ResizeStyle = rsPattern
                  Visible = True
                end
                object usrg_ibgrLog: TgsIBGrid
                  Tag = 0
                  Left = 2
                  Top = 2
                  Width = 570
                  Height = 611
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  TabStop = True
                  Align = alLeft
                  Anchors = [akLeft, akTop, akBottom]
                  BorderStyle = bsSingle
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DataSource = usrg_dsLog
                  DefaultDrawing = True
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  ImeMode = imDontCare
                  ImeName = ''
                  Options = [dgTitles, dgColumnResize, dgColLines, dgTabs, dgRowSelect, dgConfirmDelete, dgCancelOnExit]
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ReadOnly = True
                  TabOrder = 0
                  Visible = True
                  TableColor = clWindow
                  SelectedColor = clHighlight
                  TitleColor = clBtnFace
                  RefreshType = rtCloseOpen
                  Striped = True
                  StripeOdd = 15201271
                  StripeEven = 14084071
                  InternalMenuKind = imkWithSeparator
                  Expands = <>
                  ExpandsActive = False
                  ExpandsSeparate = False
                  TitlesExpanding = False
                  Conditions = <>
                  ConditionsActive = False
                  CheckBox.DisplayField = ''
                  CheckBox.FieldName = ''
                  CheckBox.Visible = False
                  CheckBox.FirstColumn = False
                  ScaleColumns = False
                  MinColWidth = 40
                  ToolBar = nil
                  FinishDrawing = True
                  RememberPosition = True
                  SaveSettings = True
                  ColumnEditors = <>
                  Aliases = <>
                  ShowFooter = True
                  ShowTotals = False
                  Columns = <
                    item
                      Expanded = False
                      FieldName = 'USR$DATETIME'
                      ReadOnly = False
                      Title.Caption = 'Дата записи'
                      Width = 130
                      Visible = True
                    end
                    item
                      Expanded = False
                      FieldName = 'Z_USR$USERKEY_NAME'
                      ReadOnly = False
                      Title.Caption = 'Пользователь'
                      Width = 93
                      Visible = True
                    end
                    item
                      Expanded = False
                      FieldName = 'Z_USR$STATEKEY_USR$NAME'
                      ReadOnly = False
                      Title.Caption = 'Состояние'
                      Width = 114
                      Visible = True
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$DESCRIPTION'
                      ReadOnly = False
                      Title.Caption = 'Описание'
                      Width = 389
                      Visible = True
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$CANCELREASONKEY'
                      ReadOnly = False
                      Title.Caption = 'Причина отмены'
                      Width = 130
                      Visible = True
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$USERKEY'
                      ReadOnly = False
                      Title.Caption = 'Пользователь'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$STATEKEY'
                      ReadOnly = False
                      Title.Caption = 'Состояние брони'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$DOCUMENTKEY'
                      ReadOnly = False
                      Title.Caption = 'ИД документа'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$ACTIONTYPE'
                      ReadOnly = False
                      Title.Caption = 'Тип действия'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'ID'
                      Title.Caption = 'Идентификатор'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'EDITIONDATE'
                      Title.Caption = 'Дата модификации'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'USR$ISDININGROOMSHOW'
                      ReadOnly = False
                      Title.Caption = 'Отобразить диет-сестре'
                      Width = -1
                      Visible = False
                    end
                    item
                      Expanded = False
                      FieldName = 'Z_USR$CANCELREASONKEY_USR$NAME'
                      ReadOnly = False
                      Title.Caption = 'Наименование (Hotel. Причина отмены)'
                      Width = 130
                      Visible = True
                    end>
                end
                object usrg_USR_HT_RESERVATION_DBMemo1: TDBMemo
                  Tag = 0
                  Left = 575
                  Top = 2
                  Width = 332
                  Height = 611
                  Cursor = crDefault
                  Hint = ''
                  HelpContext = 0
                  TabStop = True
                  Align = alClient
                  Alignment = taLeftJustify
                  Anchors = [akLeft, akTop, akRight, akBottom]
                  AutoDisplay = True
                  BorderStyle = bsSingle
                  Color = clWindow
                  Constraints.MaxHeight = 0
                  Constraints.MaxWidth = 0
                  Constraints.MinHeight = 0
                  Constraints.MinWidth = 0
                  DataField = 'USR$DESCRIPTION'
                  DataSource = usrg_dsLog
                  DragCursor = crDrag
                  DragKind = dkDrag
                  DragMode = dmManual
                  Enabled = True
                  ImeMode = imDontCare
                  ImeName = ''
                  MaxLength = 0
                  ParentBiDiMode = True
                  ParentColor = False
                  ParentCtl3D = True
                  ParentFont = True
                  ParentShowHint = True
                  PopupMenu = nil
                  ReadOnly = True
                  ScrollBars = ssVertical
                  TabOrder = 1
                  Visible = True
                  WantTabs = False
                  WordWrap = True
                end
              end
            end
          end
          object alBase: TActionList
            Left = 526
            Top = 94
            object actNew: TAction
            end
            object actHelp: TAction
            end
            object actSecurity: TAction
            end
            object actOk: TAction
            end
            object actCancel: TAction
            end
            object actNextRecord: TAction
            end
            object actPrevRecord: TAction
            end
            object actApply: TAction
            end
            object actFirstRecord: TAction
            end
            object actLastRecord: TAction
            end
            object actProperty: TAction
            end
            object actCopySettingsFromUser: TAction
            end
            object actAddToSetting: TAction
            end
            object actDocumentType: TAction
            end
            object actDistributeUserSettings: TAction
            end
            object actHistory: TAction
            end
            object usrg_actAddAdd: TgsAction
              Tag = 0
              Category = ''
              Caption = 'Добавить услугу'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = ''
              ImageIndex = -1
              ShortCut = 0
              Visible = True
            end
          end
          object dsgdcBase: TDataSource
            Left = 456
            Top = 65535
          end
          object pm_dlgG: TPopupMenu
            Left = 392
            Top = 216
            object actSecurity1: TMenuItem
            end
            object actHistory1: TMenuItem
            end
            object N1: TMenuItem
            end
            object sepFirst: TMenuItem
            end
            object actNextRecord1: TMenuItem
            end
            object actPrevRecord1: TMenuItem
            end
            object actFirstRecord1: TMenuItem
            end
            object actLastRecord1: TMenuItem
            end
            object sepSecond: TMenuItem
            end
            object actApply1: TMenuItem
            end
            object sepThird: TMenuItem
            end
            object actProperty1: TMenuItem
            end
            object actCopySettings1: TMenuItem
            end
            object nAddToSetting1: TMenuItem
            end
          end
          object ibtrCommon: TIBTransaction
            Active = False
            Params.Strings = (
              'read_committed'
              'rec_version'
              'nowait')
            Left = 411
            Top = 176
          end
          object usrg_dsServiceList: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcServiceList
            Enabled = True
            Left = 526
            Top = 162
          end
          object usrg_gdcServiceList: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_SERVICELIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 478
            Top = 232
          end
          object usrg_gdcAllPostingList: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 454
            Top = 285
          end
          object usrg_dsAllPostingList: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcAllPostingList
            Enabled = True
            Left = 411
            Top = 240
          end
          object usrg_alUser: TActionList
            Tag = 0
            Images = dmImages.il16x16
            Left = 360
            object usrg_actServiceAdd: TgsAction
              Tag = 0
              Category = 'Service'
              Caption = 'Добавить'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить услугу в список'
              ImageIndex = 0
              ShortCut = 0
              Visible = True
            end
            object usrg_actServiceEdit: TgsAction
              Tag = 0
              Category = 'Service'
              Caption = 'Изменить'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Изменить услугу'
              ImageIndex = 1
              ShortCut = 0
              Visible = True
            end
            object usrg_actServiceDelete: TgsAction
              Tag = 0
              Category = 'Service'
              Caption = 'Удалить'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Удалить услугу из списка'
              ImageIndex = 2
              ShortCut = 0
              Visible = True
            end
            object usrg_actAllPostingAdd: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actAllPostingEdit: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Изменить'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Изменить начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actAllPostingDelete: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Удалить'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actCheckIn: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Заселить'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Заселить'
              ImageIndex = 0
              ShortCut = 0
              Visible = True
            end
            object usrg_actCheckOut: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Выселить'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Выселить'
              ImageIndex = 1
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 1'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 1-ый счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 2'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 2-ой счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 3'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 3-ий счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 4'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 4-ый счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 5'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 5-ый счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 6'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 6-ой счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 7'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 7-ой счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actTogglePostings_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Счет 8'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить 8-ой счет'
              ImageIndex = 104
              ShortCut = 0
              Visible = True
            end
            object usrg_actShowNotEmptyPostings: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Не пустые'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить не пустые счета'
              ImageIndex = 126
              ShortCut = 0
              Visible = True
            end
            object usrg_actShowAllPostings: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Все счета'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Отобразить все счета'
              ImageIndex = 126
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAdd_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить начисление'
              ImageIndex = 7
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddEdit_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Редактировать начисление'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать начисление'
              ImageIndex = 8
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingAddDelete_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Удалить начисление'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Удалить начисление'
              ImageIndex = 9
              ShortCut = 0
              Visible = False
            end
            object usrg_actDetailPostingPrint_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Распечатать счет'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Распечатать счет'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actEditActualPriceList: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Редактировать тариф'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Редактировать тариф'
              ImageIndex = 1
              ShortCut = 0
              Visible = True
            end
            object usrg_actPrintRegistrationCard: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Регистрационная карточка'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Распечатать регистрационную карточку'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actPostAllService: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Начислить всё'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Начислить все услуги'
              ImageIndex = 4
              ShortCut = 0
              Visible = False
            end
            object usrg_actPostDayService: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Начислить за день'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Начислить услуги за текущий день'
              ImageIndex = 3
              ShortCut = 0
              Visible = True
            end
            object usrg_actSaveHeader: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Сохранить'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Сохранить'
              ImageIndex = 5
              ShortCut = 0
              Visible = True
            end
            object usrg_actAllPostingAddPayment: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Оплата'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddPayment_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить оплату'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить оплату'
              ImageIndex = 6
              ShortCut = 0
              Visible = True
            end
            object usrg_actAllPostingAddCorrect: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Корректировка'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddCorrect_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить корректировку'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить корректировку'
              ImageIndex = 10
              ShortCut = 0
              Visible = True
            end
            object usrg_actShowLog: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Доп. информация'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Дополнительная информация'
              ImageIndex = 11
              ShortCut = 0
              Visible = True
            end
            object usrg_actAllPostingAddReturn: TgsAction
              Tag = 0
              Category = 'Posting'
              Caption = 'Возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_01: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_02: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_03: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_04: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_05: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_06: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_07: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actDetailPostingAddReturn_08: TgsAction
              Tag = 0
              Category = 'DetailPostings'
              Caption = 'Добавить возврат'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Добавить возврат'
              ImageIndex = 12
              ShortCut = 0
              Visible = True
            end
            object usrg_actSearchAvailableRoom: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Назначение номера'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 
                'Назначение номера - номер можно выбирать только в "Забронировано' +
                '", "Новая путевка" и "Ожидание заезда"'
              ImageIndex = 13
              ShortCut = 0
              Visible = True
            end
            object usrg_actPrintConfirmation: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Подтверждение'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 'Подтверждение'
              ImageIndex = 15
              ShortCut = 0
              Visible = True
            end
            object usrg_actChooseTrace: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Выбрать'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Выбрать примечания'
              ImageIndex = 29
              ShortCut = 0
              Visible = True
            end
            object usrg_actSearchTarrif: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Выбрать тариф'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Выбрать тариф'
              ImageIndex = 13
              ShortCut = 0
              Visible = True
            end
            object usrg_actGetTelephoneRecords: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Телефонные переговоры'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 
                'Телефонные переговоры - телефонные переговоры можно импортироват' +
                'ь только в "Заселено", "На выезд"'
              ImageIndex = 16
              ShortCut = 0
              Visible = True
            end
            object usrg_actClearSelectedRoom: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Снять назначенный номер комнаты'
              Checked = False
              Enabled = False
              HelpContext = 0
              Hint = 
                'Снять назначенный номер комнаты - доступно только при выбранном ' +
                'номере в "Забронировано", "Новая путевка" и "Ожидание заезда"'
              ImageIndex = 17
              ShortCut = 0
              Visible = True
            end
            object usrg_actLockSelectedRoom: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Запретить переназначать номер'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Запретить переназначать номер'
              ImageIndex = 18
              ShortCut = 0
              Visible = True
            end
            object usrg_actChooseCurrency: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Выбрать валюту'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = 'Выбрать валюту'
              ImageIndex = 13
              ShortCut = 0
              Visible = True
            end
            object usrg_actResortTax: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Расcчитать'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = ''
              ImageIndex = -1
              ShortCut = 0
              Visible = True
            end
            object usrg_actAddPlace: TgsAction
              Tag = 0
              Category = 'Book'
              Caption = 'Дополнительное место'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = ''
              ImageIndex = -1
              ShortCut = 0
              Visible = True
            end
            object usrg_addDisc: TgsAction
              Tag = 0
              Category = ''
              Caption = '%'
              Checked = False
              Enabled = True
              HelpContext = 0
              Hint = ''
              ImageIndex = -1
              ShortCut = 0
              Visible = True
            end
          end
          object usrg_dsDetailPosting_01: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_01
            Enabled = True
            Left = 592
            Top = 3
          end
          object usrg_gdcDetailPosting_01: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 80
            Top = 117
          end
          object usrg_dsDetailPosting_02: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_02
            Enabled = True
            Left = 328
            Top = 91
          end
          object usrg_gdcDetailPosting_02: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 488
            Top = 85
          end
          object usrg_dsDetailPosting_03: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_03
            Enabled = True
            Left = 456
            Top = 51
          end
          object usrg_gdcDetailPosting_03: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 640
            Top = 5
          end
          object usrg_dsDetailPosting_04: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_04
            Enabled = True
            Left = 416
            Top = 57
          end
          object usrg_gdcDetailPosting_04: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 400
            Top = 93
          end
          object usrg_dsDetailPosting_05: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_05
            Enabled = True
            Left = 168
            Top = 65529
          end
          object usrg_gdcDetailPosting_05: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 496
          end
          object usrg_dsDetailPosting_06: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_06
            Enabled = True
            Left = 296
            Top = 105
          end
          object usrg_gdcDetailPosting_06: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 560
          end
          object usrg_dsDetailPosting_07: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_07
            Enabled = True
            Left = 288
            Top = 1
          end
          object usrg_gdcDetailPosting_07: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 8
            Top = 37
          end
          object usrg_dsDetailPosting_08: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcDetailPosting_08
            Enabled = True
            Left = 528
            Top = 1
          end
          object usrg_gdcDetailPosting_08: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RES_POSTINGLIST'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey,ByFolio'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 432
            Top = 21
          end
          object usrg_ilUser_16: TImageList
            Tag = 0
            BlendColor = clNone
            BkColor = clNone
            AllocBy = 4
            DrawingStyle = dsNormal
            Height = 16
            ImageType = itImage
            Masked = True
            ShareImages = False
            Width = 16
            Left = 288
            Top = 178
            Bitmap = {
              494C010113001800040010001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
              0000000000003600000028000000400000006000000001001000000000000030
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000000000000000E560E56000000000
              0000000000000000E560E560000000000000C559C559C559C559C55900000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000009452734E734E734E734E524A524A
              524A524A524A524A524A524A524A734E000000000000E560ED7DED7DE5600000
              000000000000E560ED7DED7DE56000000000C559297F097B097F0662C6590000
              0000000000000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D779D779C73734EFF7BFF7B
              FF7BFF7BFF7FFF7BFF7BFF7BFF7F534A00000000E5600E7EAB7DAB7D0E7EE560
              00000000E5600E7EAB7DAB7D0E7EE5600000085E4766097B097B097FC6590000
              0000000000000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D779D779D77534ADE77E47D
              847D744ACF35E47D837DBE73DE7B524A00000000E5600E7EAA79AA79AA790E7E
              E560E5600E7EAA79AA79AA790E7EE56000000000085E47660A7F0A7FC555C659
              E65D000000000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D779D739D73534A9D73BE73
              BE73DE77BE73BE73BE739D73BE77524A000000000000E5602F7A897989798979
              2F7A2F7A8979897989792F7AE5600000000000000000095E48662B7F2B7F2B7F
              C659C65900000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D777B6F9D73734E9C73744E
              CE35744ECE39944ECE359C739D73534A0000000000000000E560507A89798979
              8979897989798979507AE560000000000000000000000000095E48664C7F2C7F
              4C7FCA72C659C659075E00000000000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D775A6B9C73734E7B6F7B6F
              7C6F7C6F7C737C6F7B6F5B6B9D77534A00000000000000000000E560507A6879
              687968796879507AE56000000000000000000000000000000000295E48666E7F
              0B7FC87AC87AEA7AA87A4766085E000000000000000000000000000000000000
              000000000000000000000000000000000000734E9D775A6B9D77734E5A6B734E
              CE39944ECE39944ECE355A679D73734E00000000000000000000E560717A6879
              477547756879717AE560000000000000000000000000000000000000C6594D7F
              EA7A6E7F6F7F6F7F6E7F0B7F4766906200000000000000000000000000000000
              000000000000000000000000000000000000734E9D7719639D77734E39673967
              5A6B19635A6B5A6B196319639C73524A0000000000000000E560927A47754775
              4775477547754775927AE56000000000000000000000000000000000C6592C7F
              6F7F6F7F6F7F6F7F6F7F907FEB7A075E00000000000000000000000000000000
              000000000000000000000000000000000000734E9D77F85E9D77734E9C739C73
              9C739C739C739C739C739C779C73734E000000000000E560B37A467546754675
              B37AB37A467546754675B37AE5600000000000000000000000000000E75D4D7F
              6F7F6F7F2D7B696669662D7B6E7F075E00000000000000000000000000000000
              000000000000000000000000000000000000734E9D77F85E9D77734EF75EFE3A
              DD36DD36DD36DD36DD36FE3A3867524A00000000E560D47A267126712671D47A
              E560E560D47A267126712671D47AE560000000000000000000000000E75D6E7F
              6F7F6F7F49660000000069666E7FE75D00000000000000000000000000000000
              000000000000000000000000000000000000734EBE770000BE77734ED65AFD46
              9C2E9C329C329C329C32FD46396B734E00000000E560F57A25712571F57AE560
              00000000E560F57A25712571F57AE560000000000000000000000000E75D4D7F
              6E7F6E7F49660000000069666E7F085E00000000000000000000000000000000
              000000000000000000000000000000000000734EBE7794529D77734E7B6F7B73
              7B6F7B737B737B737B737B6F7B6F524A000000000000E560177B177BE5600000
              000000000000E560177B177BE5600000000000000000000000000000F36E6966
              6E7F4E7F2C7B696669662D7B6966F36E00000000000000000000000000000000
              000000000000000000000000000000000000734EBE77DE7BBE77734E734E734E
              734E734E524A734E524A524A734ED65A0000000000000000E560E56000000000
              0000000000000000E560E560000000000000000000000000000000000000295E
              69662C7B4E7F6D7F4C7F696A2A62000000000000000000000000000000000000
              0000000000000000000000000000000000005A6B734E734E734E5A6B00000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              F36E075E075E075E075EF36E0000000000000000000000000000000000000000
              00000000000000000000000000000000000000000000000000000A5A40512051
              2051205140514D66000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000004051E064A070C07C
              E07C007D007DA579205100000000000000000000000000000000000000000000
              0000000000000000E855E8550856F5620000000000000000666E876E00000000
              0000000000000000000000000000000000000000000000000000773E16261626
              1626162616261626773E0000000000000000000000002051E074A074A074C078
              E07C007D007D637DA67D20510000000000000000000000000000000000000000
              000000000000075A6E5EA37E327748620000000000000000CC72666E686E0000
              00000000000000000000000000000000000000000000000000001726FF7FFF7B
              FF7BFF7BFF7BFF7F172600000000000000000000C8592069E07CC178A77D205D
              2059205D0079007D0B7EC6752A62B43500000000000000009452EF3DEF39EF39
              EF3DF03DEB49744A954E136FB57F27620000000000000000767B666E0C77666E
              000000000000000000000000000000000000734E104210420F421722FF7BDF6F
              DF6FDF6FDF6FFF7B17220F4210421042734E00002051007D647D2C7E61599E67
              9E674F5E20550079437D2D7E40515E57B435000000001042734E5A6B9C779C77
              9C775A6B734EF03D185FBE737777476600000000000000000000666E507B917F
              666E0000000000000000000000000000000010425A6B3967EF3D8C3100000000
              00000000000000008C31EF3D39675A6B104200002051207D2C7EA4699E679E67
              9E679E679E67205D017D0D7E40515E57B43500001042D65A9C733D4F3E3F5E43
              7F479E579C6F000031469D6F2666000000000000000000000000CD72EA76D57F
              6F7F666EF36A000000000000000000000000EF3D5B6BF85E1963B556B556B556
              B556B556B556B556B5561963F85E5B6BEF3D00002051207D2C7E4051BE73BE73
              BE739E679E674051017D2D7E40517E5FB435955294529D73FD3A1D3F5E477E4B
              9F4FBF4F9F4FBD73734E0B520000000000000000000000000000F466A872D77F
              907F6E7B666EF36A00000000000000000000EF3D9C6FF75E3246EF39EF3DEF39
              EF39EF39EF39EF3DEF393246F75E9C6FEF3D00002051207D2C7E4051DF77BE73
              BE73BE739E672051017D2D7E40517E5FB43510427B731C471D475D4B5E477E4B
              BF53DF57BF4F9E577B6F114200000000000000000000666EA872A8728772D77F
              8F7F8F7F6D7B8872D06A0000000000000000EF3DBD77D65A8C318D31AD31AD35
              AD35AD35AD35AD31AD318C31D65ABD77EF3D00002051207D2C7E4051FF7FDF77
              DF77BE73BE732051017D2D7E40517E5FB4351042DE7FBC2E7E5B7E577E537E4B
              9F4FBF539F4F7F47DE7F104200000000000000000000676ED37F907F8E7F6D7B
              6D7B6D7B6D7B8E7F8772AD6A000000000000EF3DFF7FDE7B3246534A734A734A
              734A734A734A734A534A3246DE7BFF7FEF3D00002051207D2C7E4051FF7FFF7F
              DF77DF77DF772051017D2D7E40519E67B4351042FE7F9B2ABE6B7E5F7E577E53
              7E4B7E4B7E4B5E43DE7F1042000000000000000000008B6E707B917F6C7B6C7B
              D77FD67FD67FD57FD57F8872AD6E00000000EF3DDE7B5A6BF03D104211421142
              1142114211421142104210425A6BDE7BEF3D00002051207D2C7E4051FF7FFF7F
              FF7FFF7FDF772051017D2D7E4051BE73B4351142FF7F7B2A9E6B9E677E5F7E57
              7E535E473E471D3FFF7F11420000000000000000000012730D77B37F4B7B4C7B
              C872466E466E466E676E676E676E00000000EF3DFF7FFF7FAD35AD35AD358D31
              8D318D318D31AD35AD35AD35FF7FFF7FEF3D00002051207D2C7E4051FF7FFF7F
              FF7FC7592051206D017D2D7EC064405109623146BD7BFC423D53DF739E6B7E5F
              7E575D4B1D3F5E53BD7B3146000000000000000000000000A872D77F6C7B4A7B
              B57FCC72D16A000000000000000000000000B556EF3DEF3D10421726FF7FFF7F
              FF7FFF7FFF7FFF7F17221042EF3DEF3DB55600002051207D2C7E20519F1E9F1E
              9F1E20514A7E007DE078C0748070377F20511863D65AFF7B7B2A3D53BF6FBE6B
              7E5F3D4BFC3AFF7F00001863000000000000000000000000676ED57F6F7F297B
              707BB57F676E000000000000000000000000000000000000CE3D1722FF7BDF6F
              BF6FBF6FDF6FFF7B1722CE3D00000000000000002051007D2D7E20519F1EB435
              0000000020518D7EE07CC074167F405100000000734E3967FF7FFC467B2A9B2A
              9B2E3D4BFF7F3967734E00000000000000000000000000008B6E717BB57F277B
              287BD77FED728A6A0000000000000000000000000000000000001626FF7B9F5F
              9F5F9F5F9F5FFF7B16260000000000000000000041552051205109623A3E0000
              0000000000004051AF7ED27E40510000000000000000734ED65EFE7FFF7FFF7F
              FF7FDE7FD65A734E0000000000000000000000000000000013730D77FA7FD97F
              D87FFA7FD87F676EF466000000000000000000000000000000001626FF7FFF7B
              FF7BFF7BFF7BFF7F162600000000000000000000000000000000000000000000
              0000000000000000205120510000000000000000000000003963534A534A524A
              524A534A39670000000000000000000000000000000000000000686E476E476E
              676E676E476E686E686E00000000000000000000000000000000B94616261626
              1626162616261626B94600000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000773617221722162216221622
              1622162216221622162216221622773600000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              00000000000000000000000000000000000000001622DD2E1622DD2EBC2ABC2A
              BD2ABC2ABD2ABC2ABD2ABD2ADD2E1622000000000000B435B435B435B435B435
              B435B435B435B435B435B435B435B435000000000000B435B435B435B435B435
              B435B435B435B435B435B435B435B435606800000000B435B435B43530568A69
              696D696D696D6969CD51B435B435B435000000001622DD32F621DD329C2A9C2A
              9C2A9C2A9C2A9C2A9C2A9C2ADD321622000000007335DF7BBE73A5144B255E57
              9E679E679E677E5F7E5F7E5F5E575E57B43500007335DF7BBE739E679E676068
              60689E679E677E5F7E5F7E5F5E576068B43500007335DF7BBE730F5E696DAB7D
              CB7DCC7DCC7DCB7D8A75AC595E575E57B43500001622FD36F621DD369C2A9C2A
              9C2A9C2A9C2ABD2A9C2A9C2ADD361622000000007335DF77DF7B4B2508218A31
              5E579E679E679E677E5F7E5F7E5F5E57B43500007335DF77DF7BBE739E676068
              606860689E679E677E5F7E5F60685E57B43500007335DF77DF7B486DAB7DAA7D
              AA7DAA7DAA7DAA7DAB7D6975EE555E57B43500001622FD3AF61DFD3A9C2A9C2A
              9C2ABD2A9C2A9C2A9C2A9C2AFD3A1622000000009335DF77DF77BE73CA3DE855
              433571295E579E679E679E677E5F7E5FB43500009335DF77DF77BE73BE73BE73
              BE73606860689E67606860687E5F7E5FB43500009335DF776965897989796879
              68796879687968796979897969697E5FB435000016221E3FF61DFD3E9C2A9C2A
              9C2A9C2A9C2ABC2A9C2A9C2A1D3F1622000000009335FF7F94529452CA3DC849
              F239D8197129AD351042104210427E5FB435000093359C739452945294529452
              94529452606860706070104210427E5FB43500009335FF7F06656979D57E597F
              597F597F597F597F597F6879476D7E5FB435000016223E47F61D1D47BC2ABC2A
              BC2ABC2ABC2ABC2ABC2ABC2A3E47F62100000000D639FF7FFF7FFF7FDF77CF3D
              FE42BE2ED81D71297E5FBE739E677E5FB4350000D639FF7FFF7FFF7FDF77DF77
              DF77DF77606860706074FF7FFF7F7E5FB4350000D639FF7F27658979597FFF7F
              FF7FFF7FFF7FFF7FFF7F6779696D7E5FB4350000161E5E4BF61D3E4BBC2ABC2A
              BC2A9C2A9C2ABC2ABC2ABC2A3E4B162200000000D639FF7FFF7FFF7FFF7FF539
              5F571F479D2ED81D71297E5FBE739E67B4350000D639FF7FFF7FFF7FFF7FFF7F
              DF7760786074BE73BE7360789E679E67B4350000D639FF7F4865CC792F7A927A
              927A927A927A927A927A8975AB6D9E67B4350000161E5E4FF61D5E4FBC2EFF7F
              FF7FFF7FFF7FFF7FFF7FBC2A5E53F61D00000000F839FF7F9452945294529452
              F5395F571F47BE2ED81971291042BE73B4350000F839FF7F9452945294529452
              6078607C94529452945294526078BE73B4350000F839FF7FCD690E7647752675
              267526752675267525750E76ED6DBE73B4350000161E7F57F6197E57DC2EBC2A
              9C269C269C269C26BC2ADC2E7E57161E00000000F839FF7FFF7FFF7FFF7FFF7F
              FF7FF5395F571F479D2EB61D71297E5FB4350000F839FF7FFF7FFF7FFF7F6078
              6078FF7FFF7FDF77DF77DF77DF776078B4350000F839FF7FFF7FAC6950766875
              46752571267568750E7AED6DDF77DF77B4350000F61D9F5BF61D7E5BDC2EFF7F
              FF7FFF7FFF7FFF7FFF7FDC327E5B161E00000000193E9F1E9F1E9F1E9F1E9F1E
              9F1E9F1EF5395F575352A67A4054004C00000000193E9F1E9F1E9F1E9F1E6078
              9F1E9F1E9F1E9F1E9F1E9F1E9F1E9F1E00000000193E9F1E9F1E9F1EAC693076
              2F76ED752E7A3076CC6D94729F1E9F1E00000000161EBF63D6197E5BDD36FF7F
              FF7FFF7FFF7FFF7FFF7FDC32BF63F61D000000003A3E9F1E9F1E9F1E9F1EB435
              000000000000F5396976A268A2684054004C00003A3E9F1E9F1E9F1E9F1EB435
              00000000000000000000000000000000000000003A3E9F1E9F1E9F1E9F1ECD69
              496548654965AB69000000000000000000000000F61DBF67F61DBF67FC36FC36
              DC32FC36DC32FC36FC36FC36BF67F61D0000000000003A3E3A3E3A3E3A3E0000
              000000000000000060602D7EA27DA2680000000000003A3E3A3E3A3E3A3E0000
              000000000000000000000000000000000000000000003A3E3A3E3A3E3A3E0000
              0000000000000000000000000000000000000000161EDF6FF61DBF6BBF6BBF6B
              BF6BBF6BBF6BBF6BBF6BBF6BDF6F161E00000000000000000000000000000000
              0000000000000000000060606060000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000993E161E161E161EF61DF61D
              161EF61DF61DF61DF61D161EF61D993E00000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000004A364A364A364A36
              000000004A364A364A364A36000000000000983A160A160AF6013A6B3B670000
              00003B673A633A633A6BF601160A160A983A0000000000000000000000000000
              4A364A364A364A36000000000000000000000000000000000000000000000000
              00000000000000000000000000000000000000008F464A368B3E705B705B0932
              29324A368B3E705B705B8B3E4A36B14E0000160A3E471E3F1E3BDF7FFF7F0921
              524AFF7FBE77BE77DF7F1E3B1E3F3E47160A000000000000000000008F464A36
              8B3E705B705B8B3E4A36B14E0000000000000000000000000000000000000000
              0000000000000000000000000000000000004A36ED4A505B705B505B4F574A36
              ED4A505B705B705B505B505B4F576B3AF456160A3E43FD36DD32DF7BFF7F0921
              3242FF7FBE739E73DE7BDD32FD363E43160A00000000B435B4354A36ED4A505B
              705B505B4F57505B4F576B3AF456B435000000000000B435B435B435B435B435
              B435B435B435B435B435B435B435B43500004A362F53AC428B3E8B3ECD464A36
              2F53AC428B3E8B3ECD464F574F574F574A36160A3E47DD32DC2AFF7FDF7BF03D
              0921DF7B9E6B9D6FDF7FDD2ADD323E47160A00007335DF7BBE734A362F53AC42
              8B3E8B3ECD464F574F574F574A365E57B43500007335DF7BBE739E679E679E67
              9E679E679E677E5F7E5F7E5F5E575E57B435AF464A3600000000000000006B3A
              4A360E4F4A36000000008C424F57705B4A36160A3E47DD2EBC2AFF7F7D6B9E6F
              9E6F9D6B7D6B7D6BFF7FBC2ADD2E3E47160A00007335DF77DF7BAF464A367867
              9E679E679E678C424F57705B4A365E57B43500007335DF77DF7BBE739E679E67
              9E679E679E679E677E5F7E5F7E5F5E57B43500000000000000000000D352CC46
              4F572F53E82D0000D352CC464F57705B4A36160A3E4BBC2ABC2A3C53FF7FFF7F
              FF7FFF7FFF7FFF7F3C53BC2ABC2A3E4B160A00009335DF77DF77BE73BE73BE73
              BE739E67D352CC464F57705B4A367E5FB43500009335DF77DF77BE73BE73BE73
              BE739E679E679E679E679E677E5F7E5FB43500000000D3528E426B3AED4A4F57
              AC466B3E29326B3AED4A705B505B0E4F4A36160A5E4F9C229C1E9C1A7C167C16
              7C167C167C167C169C1A9C1E9C225E4F160A00009335FF7FDF77DF77DF77D352
              8E426B3AED4A705B505B2E534A367E5FB43500009335FF7FDF77DF77DF77BE73
              BE73BE739E679E679E679E679E677E5FB43500004A36CD464F57705B705B8C42
              4A36CD464F57705B705B4F57CD464A360000160A5E4F9C1A7E5BFF7FFF7FFF7F
              FF7FFF7FFF7FFF7FFF7F7E5B9C1A5E4F160A0000D639FF7FFF7FFF7F4A36CD46
              4F57705B705B4F57CD464A3657677E5FB4350000D639FF7FFF7FFF7FFF7FDF77
              DF77BE73BE73BE73BE739E679E677E5FB4354A362E53505B505BED4AAC424A36
              2E53505B505BED4AAC424B36135700000000160A7E537C12FF7FFF7BFF77FF77
              FF77FF77FF77FF77FF77FF7F7C127E53160A0000D639FF7FFF7F4A362E53505B
              505BED4AAC424B361357BE739E679E67B4350000D639FF7FFF7FFF7FFF7FFF7F
              DF77DF77DF77BE73BE73BE739E679E67B4356B3A505B505BAC42F35600006B3A
              505B4F57AC42F35600000000000000000000160A7F575C0EFF7FCE390000DF7B
              CE390000734EDF77734EFF7B5C0E7F57160A0000F839FF7FFF7F6B3A505B505B
              AC42F356DF77DF77DF77DF77DF77BE73B4350000F839FF7FFF7FFF7FFF7FFF7F
              FF7FFF7FDF77DF77DF77DF77DF77BE73B4354A36505B4F574A36000000004A36
              505B4F574A36000000000000D3524A36D352160A9F5F9301FF7BDF7BDF73DF73
              DF73DF73DF73DF73DF73FF7F93019F5F160A0000F839FF7FFF7F4A36505B4F57
              4A36F55AFF7FFF7FD3524A36D352DF77B4350000F839FF7FFF7FFF7FFF7FFF7F
              FF7FFF7FFF7FFF7FFF7FDF77DF77DF77B4354A362E53505B4F57AC428B3E4A36
              0E4F705B4F57AC428B3E6B3AED4A4F574A36160ABF630E01FF7FCE39CE399452
              734EBE6FCE397352734EFF7F0D01BF63160A0000193E9F1E9F1E4A362E53505B
              4F57AC428B3E6B3AED4A4F574A369F1E00000000193E9F1E9F1E9F1E9F1E9F1E
              9F1E9F1E9F1E9F1E9F1E9F1E9F1E9F1E000000006B3A4F574F574F57505BED4A
              8B3E4F574F574F57505B705B705B2F534A36160ABF671B02FF7F9E6FBE6F9E6B
              9E6B9D6B9E6B9D6B9D6BFF7F1B02BF6B160A00003A3E9F1E9F1E565F6B3A4F57
              4F574F57505B705B705B2F534A360000000000003A3E9F1E9F1E9F1E9F1EB435
              0000000000000000000000000000000000000000345B4A366B3E705B705B8B3E
              4A364A366B3E705B705B8B3E4A366C3E0000160ABF679F63FF7FFF7FFF7FFF7F
              FF7FFF7FFF7FFF7FFF7FFF7F9F63BF67160A000000003A3E3A3E3A3E345B4A36
              6B3A705B705B8B3E4A366C3E576700000000000000003A3E3A3E3A3E3A3E0000
              0000000000000000000000000000000000000000000000004A364A364A364A36
              000000004A364A364A364A360000000000001B47160AF605F605F601F605F601
              F605F601F605F601F605F605F605160A1B470000000000000000000000000000
              4A364A364A364A36000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              000000000000000000000000000000000000000000000000000000000000734E
              0000000000001042104231460000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              453A453A25362536233614361436143614361436143614361436233625362536
              453A453A00000000000000000000000000000000000000000000734E734E3A67
              524AE71C4A29534A18635A6B1042000000000000000000000000000000004A36
              4A364A364A360000000000000000000000000000000000000000000000000000
              0532C542C542843EE229FF77E4612766E461E4612766E461FF77E229A43EC542
              A53E0532000000000000000000000000000000000000734E734EDE7BFF7F5A6B
              734E082164106410C6188C3110423146000000000000000000008F464A368B3E
              705B705B8B3E4A36B14E00000000000000000000000000000000000000000000
              0000CA2D222E4C3E185B195BA0592866A059A0592866A059DF735B634C3A222E
              EA2D000000000000000000000000000000003246734EBD77FF7F9D731863734E
              3146524A10428C31E71C83106410CE3900000000000000004A36ED4A505B705B
              505B4F57505B4F576B3AF4560000000000000000000000000000000000000000
              0000153ADF77BF6F8C422026004527664055405527664055DF6FBF6FBF6FDF77
              153A000000000000AD462026000000000000734E9C739C73F75E9452B656F85E
              9452524A3246524A534A3146AD35104200000000000000004A362F53AC428B3E
              8B3ECD464F574F574F574A360000000000000000000000000000000000000000
              0000B02D195FD85620226A572022B0291436D12DB029B0298F29F856D856195F
              B02D00000000000020226A57202200000000524AB5569452B55618635A6BBD77
              BD777B6F1863B556734E3246524A31460000000000000000AF464A3600000000
              000000008C424F57705B4A360000000000008A3E202620222022202220222022
              2022202220222022E03E604F4C5B202274464832202620222022202220222022
              2022202220222022E03E604F4C5B202200003246B5561863396718637B6F3967
              B452F75E39675A6B5A6B1863D65A524A00000000000000000000000000000000
              0000D352CC464F57705B4A36000000000000202640534053204F404F404F404F
              404F404F204F204F204F204F204F6E5F2022202640534053204F404F404F404F
              404F404F204F204F204F204F204F6E5F20220000734E396739677B6F1863D65A
              5453175F985295529452D65AF85E9452000000000000000000000000D3528E42
              6B3AED4A705B505B2E534A3600000000000020228C6B8C678C678C678C678C67
              8C678C678C678C676C63004F004F7067202220228C6B8C678C678C678C678C67
              8C678C678C678C676C63004F004F7067202200000000734EF75EB556B5569C73
              BE77BD779D6F5A6B3967D65A524A0000000000000000000000004A36CD464F57
              705B705B4F57CD464A360000000000000000CA42202220222022202220222022
              2022202220222022A03EE04E936B2022D9526732202220222022202220222022
              2022202220222022A03EE04E936B20220000000000000000734E5A6B3967734E
              F75E5A6B5A6B5A6B1863B5560000000000000000000000004A362E53505B505B
              ED4AAC424B361357000000000000000000000000000000000000000000000000
              0000543EDF77D84E2022946F2022D952D952D952D952D952D952D852D84EFF77
              543E0000000000002022946F20220000000000000000000000009F737F671C5F
              1C5F3C635B673967524A00000000000000000000000000006B3A505B505BAC42
              F356000000000000000000000000000000000000000000000000000000000000
              0000553EFF7B7D6769362022D9527D67D952D9527D67D9527D67D9527D67FF7B
              543E000000000000EC4A20220000000000000000000000000000794E7F673F5F
              1F57FF52BF4E0000000000000000000000000000000000004A36505B4F574A36
              000000000000D3524A36D3520000000000000000000000000000000000000000
              00005542FF7BD84ED84ED952D952D952D84ED852D852D852D852D84EB84EFF7B
              5542000000000000000000000000000000000000000000000000794E7F673F5F
              1F57FF52BE4A0000000000000000000000000000000000004A362E53505B4F57
              AC428B3E6B3AED4A4F574A360000000000000000000000000000000000000000
              0000754200005C63D84E5D63D84E5D63D84ED84E5D63D84E5D63B84E5C630000
              7542000000000000000000000000000000000000000000000000794E7F673F5F
              1F57FF52BE4E00000000000000000000000000000000000000006B3A4F574F57
              4F57505B705B705B2F534A360000000000000000000000000000000000000000
              0000754200000000FF7B00000000FF7B000000000000FF7B0000FF7BFF7B0000
              754200000000000000000000000000000000000000000000794E9F6B7F673F5F
              1F57FF52BE4E0000000000000000000000000000000000000000345B4A366B3A
              705B705B8B3E4A366C3E00000000000000000000000000000000000000000000
              0000F95676467542754275427542754275427542754275427542754275427646
              F95600000000000000000000000000000000000000000000794E794E794E794E
              BE4EBE4E00000000000000000000000000000000000000000000000000004A36
              4A364A364A36000000000000000000000000424D3E000000000000003E000000
              2800000040000000600000000100010000000000000300000000000000000000
              000000000000000000000000FFFFFF0000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              0000000000000000000000000000000000000000000000000000000000000000
              00000000000000000000000000000000FFFFFFFFFFFF0000FFFFE7E707FF0000
              0001C3C303FF00000001818103FF00000001800180FF00000001C003C07F0000
              0001E007E00F00000001F00FF00300000001F00FF80100000001E007F8010000
              0001C003F801000000018001F831000020018181F83100000001C3C3F8010000
              0001E7E7FC03000007FFFFFFFE070000F01FFFFFFFFFFFFFE00FFFE1E7FFF00F
              C007FFC1E3FFF00F8001E001E1FF00008000C001F0FF07E080008023F03F0000
              80000007F01F000080000007C00F000080000007C007000080000007C0030000
              80000007C003000080000007E03F000080000017E03FE0078181800FE01FF00F
              83C3C01FE00FF00FFFE7E03FF00FF00FFFFFFFFFFFFFFFFFFFFFFFFFFFFF8001
              FFFFFFFFFFFF8001C001C000C001800180008000800080018000800080008001
              8000800080008001800080008000800180008000800080018000800080008001
              80008000800080018000800080008001800180018001800181C081FF801F8001
              C3E1C3FFC3FF8001FFF3FFFFFFFF8001FFFFFFFFFFFFFFFFE1870300FE1FFFFF
              80010000F807FFFF00000000C001C00100000000800080003C30000080008000
              F820000080008000C00000008000800080010000800080000003000080008000
              041F0480800080000C38000080008000000000008001800180000000800381FF
              80010000C003C3FFE1870000FE1FFFFFFFFFFFFFFDC7FFFFFE00007FF003FC3F
              FE00007FC001F00FFF0000FF0001E007FF0000E70001E007FF0000E30001E787
              000000010001FF07000000008001F80700000000C003F00F00000001E007E01F
              FF0000E3F00FE0FFFF0000E7F03FE1C7FF0000FFF03FE007FF4002FFF03FF007
              FF6DD2FFE03FF00FFF0000FFE07FFC3F00000000000000000000000000000000
              000000000000}
          end
          object usrg_gdcResDisc: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RESERVDISCOUNT'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByReservKey'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 558
            Top = 277
          end
          object usrg_dsResDisc: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcResDisc
            Enabled = True
            Left = 590
            Top = 274
          end
          object usrg_dsLog: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcLog
            Enabled = True
            Left = 723
            Top = 108
          end
          object usrg_gdcLog: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'usr$ht_res_log'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByDocumentKey'
            SetTable = ''
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 686
            Top = 108
          end
          object usrg_dsAdd: TDataSource
            Tag = 0
            AutoEdit = True
            DataSet = usrg_gdcAdd
            Enabled = True
            Left = 726
            Top = 226
          end
          object usrg_gdcAdd: TgdcAttrUserDefined
            Tag = 0
            ForcedRefresh = False
            AutoCalcFields = True
            ObjectView = False
            AllowStreamedActive = False
            SubType = 'USR$HT_RESERVADD'
            MasterSource = dsgdcBase
            MasterField = 'id'
            DetailField = 'documentkey'
            SubSet = 'ByReservKey'
            SetTable = ''
            NameInScript = 'gdcAdd'
            Active = True
            CachedUpdates = False
            Filtered = False
            Left = 694
            Top = 229
          end
        end
        
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147024067_704999368
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Ключ места в номере"
      FIELDNAME: "USR$ID_PLACE"
      FIELDSOURCE: "DINTEGER"
      FIELDSOURCEKEY: "147000096_486813904 Целое число, DINTEGER"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Ключ места в номере"
      LSHORTNAME: "Ключ места"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T20:57:16+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147078836_765078212
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: "Тип путевки"
      FIELDNAME: "USR$TYPE_PERMIT"
      FIELDSOURCE: "USR$SAN_D_TYPEPERMIT"
      FIELDSOURCEKEY: "147078837_765078212 Тип путевки, USR$SAN_D_TYPEPERMIT"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Тип путевки"
      LSHORTNAME: "Тип путевки"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$NAME"
      REFRELATIONNAME: "USR$SAN_PERMIT_TYPE"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:00:48+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147188912_779589892
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Ранний заезд"
      FIELDNAME: "USR$ISEARLY"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Ранний заезд"
      LSHORTNAME: "Ранний заезд"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:00:59+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147223264_779589892
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: "Заявка"
      FIELDNAME: "USR$REQUESTKEY"
      FIELDSOURCE: "USR$SAN_D_REQUEST"
      FIELDSOURCEKEY: "147223265_779589892 Ссылка на заявку, USR$SAN_D_REQUEST"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Заявка"
      LSHORTNAME: "Заявка"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "DOCUMENTKEY"
      REFRELATIONNAME: "USR$SAN_REQUEST"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:01:20+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147188913_779589892
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Поздний выезд"
      FIELDNAME: "USR$ISLATELY"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Поздний выезд"
      LSHORTNAME: "Поздний выезд"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:23:35+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147358231_789097196
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Квота"
      FIELDNAME: "USR$ISQUOTA"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Квота"
      LSHORTNAME: "Квота"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:24:02+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcField"
      RUID: 147364050_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      CHARSET: ~
      COLLATION: ~
      COLWIDTH: 20
      DESCRIPTION: "Договор на заселение док"
      FCHARLENGTH: ~
      FFIELDTYPE: 8
      FIELDNAME: "USR$DCONTRACTOCC"
      FLAG: ~
      FLENGTH: 4
      FORMAT: ~
      FPRECISION: 0
      FSCALE: 0
      FSUBTYPE: 0
      GDCLASSNAME: "TgdcUserDocument"
      GDSUBTYPE: "147112716_783187595"
      LNAME: "Договор на заселение док"
      READONLY: 0
      REFCONDITION: ~
      REFLISTFIELD: "NUMBER"
      REFLISTLNAME: "Номер"
      REFLNAME: "Документы"
      REFTABLE: "GD_DOCUMENT"
      SEGLENGTH: ~
      SETCONDITION: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SETLISTLNAME: ~
      SETTABLE: ~
      SETTABLEKEY: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-18T16:41:32+03:00
      DISABLED: 0
      CHECKSOURCE: ~
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      NUMERATION: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147364062_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$CONTROCCKEY"
      FIELDSOURCE: "USR$DCONTRACTOCC"
      FIELDSOURCEKEY: "147364050_796152036 Договор на заселение док, USR$DCONTRACTOCC"
      FORMAT: ~
      GDCLASSNAME: "TgdcUserDocument"
      GDSUBTYPE: "147112716_783187595"
      LNAME: "Договор на заселение"
      LSHORTNAME: "Договор на заселение"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "NUMBER"
      REFRELATIONNAME: "GD_DOCUMENT"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:24:33+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147374878_789097196
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$PAYMENTMETHODKEY"
      FIELDSOURCE: "USR$SAN_D_PAYMENTMETHOD"
      FIELDSOURCEKEY: "147357056_789097196 Форма расчета, USR$SAN_D_PAYMENTMETHOD"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Форма расчета"
      LSHORTNAME: "Форма расчета"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$NAME"
      REFRELATIONNAME: "USR$SAN_PAYMENTMETHOD"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-04-27T21:24:52+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 147365673_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "Санаторий. Бронирование. Путевка"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR4"
      EDITIONDATE: 2020-01-29T15:18:57+03:00
      TEMPLATEDATA: | 
        <?xml version="1.0" encoding="utf-8"?>
        <Tgs_fr4SingleReport Version="4.15.13" DotMatrixReport="False" IniFile="\Software\Fast Reports" PreviewOptions.Buttons="4095" PreviewOptions.Zoom="1" PrintOptions.Printer="По умолчанию" PrintOptions.PrintOnSheet="0" ReportOptions.CreateDate="42844,4602440972" ReportOptions.Description.Text="" ReportOptions.LastChange="43816,4754087731" ScriptLanguage="PascalScript" ScriptText.Text="begin&#13;&#10;&#13;&#10;end." PropData="08446174617365747301010C2400000020446174615365743D2250415945522220446174615365744E616D653D2250415945522200010C1C00000020446174615365743D22512220446174615365744E616D653D2251220000095661726961626C65730100055374796C650100">
          <TfrxDataPage Name="Data" Height="1000" Left="0" Top="0" Width="1000"/>
          <TfrxReportPage Name="Page1" Orientation="poLandscape" PaperWidth="284" PaperHeight="200" PaperSize="256" LeftMargin="7" RightMargin="7" TopMargin="3" BottomMargin="7" ColumnWidth="0" ColumnPositions.Text="" HGuides.Text="" VGuides.Text="">
            <TfrxMasterData Name="MasterData1" Height="699,09493" Left="0" Top="16" Width="1020,4731" ColumnWidth="0" ColumnGap="0" DataSet="Q" DataSetName="Q" RowCount="0">
              <TfrxMemoView Name="Memo3" Left="215,43321" Top="15,10235" Width="272,12598425" Height="389,29119945" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=""/>
              <TfrxMemoView Name="Memo1" Left="-5,22047" Top="12,10235" Width="143,62214" Height="604,72440945" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text=""/>
              <TfrxMemoView Name="Memo4" Left="520,57514" Top="18,88188" Width="272,12598425" Height="332,59824945" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=""/>
              <TfrxMemoView Name="Memo2" Left="827,71707" Top="23,10235" Width="207,9765" Height="540,47239945" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text=""/>
              <TfrxMemoView Name="Memo5" Left="209,43321" Top="374,1577" Width="188,9765" Height="502,67749" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text=""/>
              <TfrxMemoView Name="QUSRCOUNTNIGHT" Left="-23,89765" Top="177,40167" Width="132,28355" Height="18,89765" ShowHint="False" DataField="USR$COUNTNIGHT" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;USR$COUNTNIGHT&#34;]"/>
              <TfrxMemoView Name="QUSRDATEBEGIN" Left="13,67718" Top="201,07885" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=" [Q.&#34;BD&#34;].[Q.&#34;BM&#34;]"/>
              <TfrxMemoView Name="QUSRDATEEND" Left="13,67718" Top="238,87415" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=" [&#60;Q.&#34;ED&#34;&#62;].[&#60;Q.&#34;EM&#34;&#62;]  "/>
              <TfrxMemoView Name="QSURNAME" Left="-36,11812" Top="264,55133" Width="173,85825795" Height="34,01577" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;SURNAME&#34;]"/>
              <TfrxMemoView Name="QFIRSTNAME" Left="-36,11812" Top="298,5671" Width="173,85825795" Height="34,01577" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;FIRSTNAME&#34;]"/>
              <TfrxMemoView Name="QMIDDLENAME" Left="-36,11812" Top="332,58287" Width="173,85825795" Height="34,01577" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;MIDDLENAME&#34;]"/>
              <TfrxMemoView Name="QCREATORNAME" Left="11,33859" Top="419,51206" Width="173,85838" Height="18,89760606" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[Q.&#34;NATIONALITY&#34;]"/>
              <TfrxMemoView Name="QUSRTOTALPARTSUM" Left="0" Top="481,20501" Width="158,74013795" Height="34,01574803" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="[Q.&#34;USR$TOTALPARTSUM&#34;] [Q.&#34;CURRNAME&#34;]"/>
              <TfrxMemoView Name="Memo7" Left="241,66945" Top="146,16543" Width="147,40167" Height="18,89765" ShowHint="False" DataField="USR$COUNTNIGHT" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;USR$COUNTNIGHT&#34;]"/>
              <TfrxMemoView Name="QUSRTOTALPARTSUM1" Left="194,21274" Top="226,9765" Width="268,34663" Height="26,45671" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;USR$TOTALPARTSUM&#34;]  [Q.&#34;CURRNAME&#34;]"/>
              <TfrxMemoView Name="Memo10" Left="190,43321" Top="264,55133" Width="264,56692913" Height="34,01577" ShowHint="False" DataField="SURNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;SURNAME&#34;]"/>
              <TfrxMemoView Name="Memo11" Left="190,43321" Top="294,78757" Width="264,56692913" Height="34,01577" ShowHint="False" DataField="FIRSTNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;FIRSTNAME&#34;]"/>
              <TfrxMemoView Name="Memo12" Left="190,43321" Top="332,58287" Width="264,56692913" Height="34,01577" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;MIDDLENAME&#34;]"/>
              <TfrxMemoView Name="QNATIONALITY" Left="323,59864" Top="361,59864" Width="154,96073" Height="34,01574803" ShowHint="False" DataField="NATIONALITY" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="[Q.&#34;NATIONALITY&#34;]"/>
              <TfrxMemoView Name="Memo17" Left="518,35467" Top="163,28355" Width="264,56692913" Height="34,01577" ShowHint="False" DataField="SURNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;SURNAME&#34;]"/>
              <TfrxMemoView Name="Memo18" Left="514,1342" Top="192,75603" Width="268,34645913" Height="34,01577" ShowHint="False" DataField="FIRSTNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;FIRSTNAME&#34;]"/>
              <TfrxMemoView Name="Memo19" Left="515,57514" Top="226,53556" Width="268,34645913" Height="30,23624" ShowHint="False" DataField="MIDDLENAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;MIDDLENAME&#34;]"/>
              <TfrxMemoView Name="Memo20" Left="631,96104" Top="258,55133" Width="154,96073" Height="22,67715803" ShowHint="False" DataField="NATIONALITY" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;NATIONALITY&#34;]"/>
              <TfrxMemoView Name="Memo21" Left="525,35467" Top="308,12616" Width="268,34663" Height="34,01574803" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;USR$TOTALPARTSUM&#34;]  [Q.&#34;CURRNAME&#34;]"/>
              <TfrxMemoView Name="Memo22" Left="827,71707" Top="107,5906" Width="188,97637795" Height="34,01577" ShowHint="False" DataField="SURNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaBottom" Text="[Q.&#34;SURNAME&#34;]"/>
              <TfrxMemoView Name="Memo23" Left="827,71707" Top="143,16543" Width="188,97637795" Height="30,23624" ShowHint="False" DataField="FIRSTNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;FIRSTNAME&#34;]"/>
              <TfrxMemoView Name="Memo24" Left="827,71707" Top="169,62214" Width="188,97637795" Height="26,45671" ShowHint="False" DataField="MIDDLENAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;MIDDLENAME&#34;]"/>
              <TfrxMemoView Name="QHOUNAME" Left="892,52814" Top="259,7718" Width="113,38582677" Height="18,89765" ShowHint="False" DataField="HOUNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haRight" ParentFont="False" Text="[Q.&#34;HOUNAME&#34;]"/>
              <TfrxMemoView Name="Memo6" Left="824,71707" Top="426,29159" Width="188,97637795" Height="34,01577" ShowHint="False" DataField="SURNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;SURNAME&#34;]"/>
              <TfrxMemoView Name="Memo8" Left="824,71707" Top="452,7483" Width="188,97637795" Height="34,01577" ShowHint="False" DataField="FIRSTNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;FIRSTNAME&#34;]"/>
              <TfrxMemoView Name="Memo9" Left="824,71707" Top="479,20501" Width="188,97637795" Height="34,01577" ShowHint="False" DataField="MIDDLENAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="[Q.&#34;MIDDLENAME&#34;]"/>
              <TfrxMemoView Name="Memo15" Left="103,60637" Top="200,07885" Width="59,35436" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo16" Left="103,60637" Top="237,87415" Width="58,35436" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo27" Left="222,99227" Top="169,84261" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=" [Q.&#34;BD&#34;].[Q.&#34;BM&#34;]"/>
              <TfrxMemoView Name="Memo28" Left="340,1577" Top="169,84261" Width="71,81107" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text=" [&#60;Q.&#34;ED&#34;&#62;].[&#60;Q.&#34;EM&#34;&#62;]"/>
              <TfrxMemoView Name="Memo29" Left="421,30736" Top="167,62214" Width="78,45671" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo25" Left="860,95331" Top="207,63791" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text=" [Q.&#34;BD&#34;].[Q.&#34;BM&#34;]"/>
              <TfrxMemoView Name="Memo30" Left="962,22109" Top="207,63791" Width="53,01577" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo26" Left="860,95331" Top="229,31509" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text=" [&#60;Q.&#34;ED&#34;&#62;].[&#60;Q.&#34;EM&#34;&#62;]"/>
              <TfrxMemoView Name="Memo31" Left="962,22109" Top="229,31509" Width="53,01577" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo32" Left="854,95331" Top="506,22078" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text=" [Q.&#34;BD&#34;].[Q.&#34;BM&#34;]"/>
              <TfrxMemoView Name="Memo33" Left="963,22109" Top="507,22078" Width="51,35436" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo34" Left="854,95331" Top="528,89796" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text=" [&#60;Q.&#34;ED&#34;&#62;].[&#60;Q.&#34;EM&#34;&#62;]"/>
              <TfrxMemoView Name="Memo35" Left="963,22109" Top="529,89796" Width="51,35436" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaCenter" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo14" Left="529,1342" Top="144,3859" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text=" [Q.&#34;BD&#34;].[Q.&#34;BM&#34;]"/>
              <TfrxMemoView Name="Memo36" Left="646,29963" Top="144,3859" Width="83,14966" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text=" [&#60;Q.&#34;ED&#34;&#62;].[&#60;Q.&#34;EM&#34;&#62;]"/>
              <TfrxMemoView Name="Memo37" Left="744,56741" Top="144,3859" Width="55,67718" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[YearOf(&#60;Q.&#34;USR$DATEBEGIN&#34;&#62;)]"/>
              <TfrxMemoView Name="Memo13" Left="12,01577" Top="666,85869" Width="94,48825" Height="30,23624" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="[Q.&#34;HOUNAME&#34;]"/>
              <TfrxMemoView Name="Memo38" Left="278,22851" Top="666,85869" Width="94,48825" Height="30,23624" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="[Q.&#34;HOUNAME&#34;]"/>
            </TfrxMasterData>
            <TfrxMemoView Name="Memo39" Left="-2,22047" Top="7,89765" Width="192,75603" Height="37,7953" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="[PAYER.&#34;RESULT&#34;]"/>
            <TfrxMemoView Name="Memo40" Left="191,41744" Top="7,89765" Width="192,75603" Height="37,7953" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="[PAYER.&#34;RESULT&#34;]"/>
          </TfrxReportPage>
        </Tgs_fr4SingleReport>
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147365649_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "rp_Main147365649_796152036"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2020-01-29T15:18:57+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN147365649_796152036
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNURkxQUg==
      SCRIPT: | 
        Option Explicit
        Function rp_Main147365649_796152036(OwnerForm)
        
          BaseQueryList.Clear
        
         Dim q, doc, id
          doc = OwnerForm.SelectedKey
          id = "(" + join(doc(1), ",") + ")"
          Set q = BaseQueryList.Query(BaseQueryList.Add("q", 0))
          q.SQL = "SELECT " & vbCrLf & _
            "  PEP.SURNAME, " & vbCrLf & _
            "  PEP.FIRSTNAME, " & vbCrLf & _
            "  PEP.MIDDLENAME, " & vbCrLf & _
            "  P.NAME as NATIONALITY , " & vbCrLf & _
            "  Z.USR$COUNTNIGHT, " & vbCrLf & _
            "  Z.USR$DATEBEGIN, " & vbCrLf & _
            "  LPAD(EXTRACT(DAY FROM Z.USR$DATEBEGIN),2,0) as BD, " & vbCrLf & _
            "  LPAD(EXTRACT(MONTH FROM Z.USR$DATEBEGIN),2,0) as BM, " & vbCrLf & _
            "  Z.USR$DATEEND, " & vbCrLf & _
            "  LPAD(EXTRACT(DAY FROM Z.USR$DATEEND),2,0) as ED, " & vbCrLf & _
            "  LPAD(EXTRACT(MONTH FROM Z.USR$DATEEND),2,0) as EM, " & vbCrLf & _
            "  CAST(CAST(Z.USR$TOTALPARTSUM as NUMERIC(15,2)) as VARCHAR(15)) as USR$TOTALPARTSUM, " & vbCrLf & _
            "  CREAT.NAME AS CREATORNAME, " & vbCrLf & _
            "  NUMB.USR$NAME AS NUMRERNUM, " & vbCrLf & _
            "  HOU.USR$NAME AS  HOUNAME, " & vbCrLf & _
            "  CURR.NAME_0 AS CURRNAME, " & vbCrLf & _
            "  Z.USR$REQUESTKEY AS REQUESTKEY " & vbCrLf & _
            "FROM USR$SAN_REQUESTLINE l " & vbCrLf & _
            "  LEFT JOIN USR$HT_RESERVATION Z ON z.ID = l.USR$RESERVATIONKEY " & vbCrLf & _
            "  LEFT JOIN GD_CONTACT CON  ON   CON.ID  =  Z.USR$CONTACTKEY " & vbCrLf & _
            "  LEFT JOIN GD_PEOPLE PEP  ON PEP.CONTACTKEY = CON.ID " & vbCrLf & _
            "  LEFT JOIN GD_PLACE P  ON P.ID  =  PEP.USR$NATIONALITYKEY " & vbCrLf & _
            "  LEFT JOIN USR$HT_NUMBER NUMB  ON NUMB.ID  =  Z.USR$NUMBERKEY " & vbCrLf & _
            "  LEFT JOIN USR$HT_HOUSING  HOU ON HOU.ID  = NUMB.USR$HOUSINGKEY " & vbCrLf & _
            "  LEFT JOIN GD_CONTACT CREAT ON CREAT.ID  =  Z.USR$CREATORKEY " & vbCrLf & _
            "  LEFT JOIN GD_CURR CURR  ON   CURR.ID  =  Z.USR$CURRKEY " & vbCrLf & _
            "WHERE l.DOCUMENTKEY IN " & id & vbCrLf & _
            "  AND z.USR$STATEKEY <> :CANCELKEY "
          q.ParamByName("CANCELKEY").AsInteger = HT_ReservationStateDict.GetCanceledState.Key
          q.Open
          
          Dim Payer
          Set Payer = BaseQueryList.Query(BaseQueryList.Add("Payer", 0))
          Payer.SQL = "SELECT " & vbCrLf & _
            "  COALESCE(conc.CONTACTTYPE, 0)  as CCONTACTTYPE " & vbCrLf & _
            "  , COALESCE(conr.CONTACTTYPE, 0) as RCONTACTTYPE " & vbCrLf & _
            "  ,  conr.name as PayerName " & vbCrLf & _
            "  , coni.NAME as InvPayerName " & vbCrLf & _
            "  , CAST( IIF( " & vbCrLf & _
            "        COALESCE(conc.CONTACTTYPE, 0) = 2, " & vbCrLf & _
            "        LIST(DISTINCT P.USR$NAME, ', '), " & vbCrLf & _
            "        IIF(COALESCE(conc.CONTACTTYPE, 0) = 3 or COALESCE(conr.CONTACTTYPE, 0) = 3, " & vbCrLf & _
            "        COALESCE(conr.name, ''), COALESCE(coni.NAME,'')) " & vbCrLf & _
            "       ) as VARCHAR(60)) as RESULT " & vbCrLf & _
            "  --, LIST(DISTINCT P.USR$NAME, ', ') as TypePay " & vbCrLf & _
            "FROM USR$HT_RESERVATION RES " & vbCrLf & _
            "LEFT JOIN USR$SAN_REQUEST R ON R.DOCUMENTKEY = RES.USR$REQUESTKEY " & vbCrLf & _
            "LEFT JOIN USR$SAN_CONTROCC C on C.DOCUMENTKEY = RES.USR$CONTROCCKEY " & vbCrLf & _
            "LEFT JOIN USR$SAN_INVOICE I on I.USR$REQUESTKEY = r.DOCUMENTKEY " & vbCrLf & _
            "LEFT JOIN GD_CONTACT conr on conr.id = r.USR$CONTACTKEY " & vbCrLf & _
            "LEFT JOIN GD_CONTACT conc on conc.id = c.USR$PAYERKEY " & vbCrLf & _
            "LEFT JOIN GD_CONTACT coni on coni.ID = I.USR$PAYERKEY " & vbCrLf & _
            "LEFT JOIN USR$SAN_PAYMENTMETHOD P on P.ID = C.USR$PAYMENTMETHODKEY " & vbCrLf & _
            "WHERE RES.USR$REQUESTKEY = :REQUESTKEY " & vbCrLf & _
            "GROUP BY 1,2,3,4 "
          Payer.ParamByName("REQUESTKEY").AsInteger = q.FieldByName("REQUESTKEY").AsInteger
          Payer.Open
        
          Set rp_Main147365649_796152036 = BaseQueryList
        End Function
        
  - 
    Properties: 
      Class: "TgdcReportGroup"
      RUID: 147022067_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "Бронирование"
      DESCRIPTION: ~
      USERGROUPNAME: "TGDCATTRUSERDEFINEDUSR$HT_RESERVATION"
      EDITIONDATE: 2016-11-15T09:43:43+03:00
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 147365648_796152036
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "Путевка. Бронирование"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: ~
      FOLDERKEY: ~
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "147365649_796152036 rp_Main147365649_796152036"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147022067_796152036 Бронирование"
      SERVERKEY: ~
      TEMPLATEKEY: "147365673_796152036 Санаторий. Бронирование. Путевка"
      EDITIONDATE: 2020-01-29T15:18:57+03:00
  - 
    Properties: 
      Class: "TgdcSimpleTable"
      RUID: 147395653_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      BRANCHKEY: ~
      DESCRIPTION: "Лог изменений в путевках "
      EXTENDEDFIELDS: ~
      LISTFIELD: ~
      LNAME: "Лог изменений в путевках "
      LSHORTNAME: "Лог изменений в путевках "
      REFERENCEKEY: ~
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      EDITIONDATE: 2017-05-09T17:56:25+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147396174_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$ISADDITIONALPLACE"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Дополнительное место"
      LSHORTNAME: "Дополнительное место"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147395653_807215242 Лог изменений в путевках , USR$SAN_PERMITLOG"
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-10T01:06:15+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147395674_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$DATEEND"
      FIELDSOURCE: "DDATE"
      FIELDSOURCEKEY: "147000160_486813904 Дата, DDATE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Дата окончания"
      LSHORTNAME: "Дата окончания"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147395653_807215242 Лог изменений в путевках , USR$SAN_PERMITLOG"
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-09T18:08:55+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147395672_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$DATEBEGIN"
      FIELDSOURCE: "DDATE"
      FIELDSOURCEKEY: "147000160_486813904 Дата, DDATE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Дата начала"
      LSHORTNAME: "Дата начала"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147395653_807215242 Лог изменений в путевках , USR$SAN_PERMITLOG"
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-09T18:08:51+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147395670_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$NUMBERTYPEKEY"
      FIELDSOURCE: "USR$HT_D_NUMBERTYPE"
      FIELDSOURCEKEY: "147008152_1661751803 HT. Тип номера, USR$HT_D_NUMBERTYPE"
      FORMAT: ~
      GDCLASSNAME: "TgdcAttrUserDefined"
      GDSUBTYPE: "USR$HT_NUMBERTYPE"
      LNAME: "Тип номера"
      LSHORTNAME: "Тип номера"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$SHORTNAME"
      REFRELATIONNAME: "USR$HT_NUMBERTYPE"
      RELATIONKEY: "147395653_807215242 Лог изменений в путевках , USR$SAN_PERMITLOG"
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-09T18:06:43+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147395667_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "CASCADE"
      DESCRIPTION: ~
      FIELDNAME: "USR$RESERVATIONKEY"
      FIELDSOURCE: "USR$HT_D_RESERVATIONKEY"
      FIELDSOURCEKEY: "147015737_1683050467 Hotel. Документ бронирования, USR$HT_D_RESERVATIONKEY"
      FORMAT: ~
      GDCLASSNAME: "TgdcAttrUserDefined"
      GDSUBTYPE: "USR$HT_RESERVATION"
      LNAME: "Документ бронирования"
      LSHORTNAME: "Документ бронировани"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$NUMBER"
      REFRELATIONNAME: "USR$HT_RESERVATION"
      RELATIONKEY: "147395653_807215242 Лог изменений в путевках , USR$SAN_PERMITLOG"
      RELATIONNAME: "USR$SAN_PERMITLOG"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-09T18:05:48+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147396150_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "gdc_dlgAttrUserDefinedUSR_SAN_PERMITLOG"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_SAN_PERMITLOG"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-05-10T00:48:04+03:00
  - 
    Properties: 
      Class: "TgdcReportGroup"
      RUID: 147396173_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "Отчеты(gdc_frmAttrUserDefinedUSR_SAN_PERMITLOG)"
      DESCRIPTION: ~
      USERGROUPNAME: "147396173_807215242"
      EDITIONDATE: 2017-05-10T01:03:55+03:00
  - 
    Properties: 
      Class: "TgdcMacrosGroup"
      RUID: 147396172_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "Локальные макросы"
      CLASSNAME: ""
      ISGLOBAL: 0
      OBJECTNAME: "gdc_frmAttrUserDefinedUSR_SAN_PERMITLOG"
      OBJECTPARENT: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-05-10T01:03:55+03:00
      DESCRIPTION: ~
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147396148_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "gdc_frmAttrUserDefinedUSR_SAN_PERMITLOG"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: "147396172_807215242 Локальные макросы"
      OBJECTNAME: "gdc_frmAttrUserDefinedUSR_SAN_PERMITLOG"
      OBJECTTYPE: 0
      REPORTGROUPKEY: "147396173_807215242 Отчеты(gdc_frmAttrUserDefinedUSR_SAN_PERMITLOG)"
      SUBTYPE: ""
      EDITIONDATE: 2017-05-10T01:03:55+03:00
  - 
    Properties: 
      Class: "TgdcStoredProc"
      RUID: 147396183_807215242
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PROCEDURENAME: "USR$SAN_GET_PRICEPERMITBYPERIOD"
      EDITIONDATE: 2017-05-10T02:08:54+03:00
      PROCEDURESOURCE: | 
        CREATE OR ALTER PROCEDURE USR$SAN_GET_PRICEPERMITBYPERIOD (
            RESERVATIONKEY INTEGER,
            PERMITSERVICEKEY INTEGER,
            PERMITSERVICEADDPLACEKEY INTEGER)
        RETURNS ( 
            FORDATE DATE,
            NUMBERTYPEKEY INTEGER,
            ISADDITIONALPLACE INTEGER,
            DAYRATE NUMERIC(15, 4))
         AS
           DECLARE VARIABLE DB DATE;
           DECLARE VARIABLE DE DATE;
           DECLARE VARIABLE TARRIFTYPEKEY INTEGER;
           DECLARE VARIABLE CLIENTCATEGORYKEY INTEGER;
           DECLARE VARIABLE CURRKEY INTEGER;
        BEGIN
          SELECT MIN(l.USR$DATEBEGIN) AS DB, MAX(l.USR$DATEEND) AS DE,
                  R.USR$TARRIFTYPEKEY, R.USR$CLIENTCATEGORYKEY, R.USR$CURRKEY
          FROM USR$SAN_PERMITLOG l
          LEFT JOIN USR$HT_RESERVATION R ON R.ID = :RESERVATIONKEY
          WHERE l.USR$RESERVATIONKEY = :RESERVATIONKEY
          GROUP BY R.USR$TARRIFTYPEKEY, R.USR$CLIENTCATEGORYKEY, R.USR$CURRKEY
          INTO :DB, :DE, :TARRIFTYPEKEY, :CLIENTCATEGORYKEY, :CURRKEY;
            FORDATE = DB;
            WHILE (FORDATE <= DE)
            DO
              BEGIN
                SELECT l.USR$NUMBERTYPEKEY, COALESCE(l.USR$ISADDITIONALPLACE, 0)
                FROM USR$SAN_PERMITLOG l
                WHERE l.USR$RESERVATIONKEY = :RESERVATIONKEY
                  AND :FORDATE BETWEEN l.USR$DATEBEGIN AND l.USR$DATEEND
                INTO :NUMBERTYPEKEY, :ISADDITIONALPLACE;
        
            /*АКТУАЛЬНЫЙ ТАРИФ (НА ДАТУ СОЗДАНИЯ ПУТЕВКИ ИЛИ ИЗМЕНЕНИЯ (В ЗАВИСИМОСТИ В ЧЕЙ ИНТЕРВАЛ ПОПАДАЕТ ДАТА))*/
            /*MAXDAYRATE, DAYRATE НЕ МОЖЕМ ИСПОЛЬЗОВАТЬ, Т.К. ПРИ СОХРАН. БЕЗ СУММЫ ОНИ ПУСТЫЕ*/
            SELECT FIRST 1
              CASE :CURRKEY
                WHEN (200010/*NCU*/) THEN TL.USR$COSTNCU
                WHEN (200050/*RUB*/) THEN TL.USR$COSTRUR
                WHEN (200020/*USD*/) THEN TL.USR$COSTUSD
                WHEN (200040/*EUR*/) THEN TL.USR$COSTEUR
              END --, T.USR$PARTIALCOST
            FROM USR$HT_TARRIF T
              LEFT JOIN USR$HT_TARRIFLINE TL ON TL.MASTERKEY = T.DOCUMENTKEY
              LEFT JOIN GD_DOCUMENT DOC ON DOC.ID = T.DOCUMENTKEY
            WHERE
              T.USR$CLIENTCATKEY = :CLIENTCATEGORYKEY
              AND T.USR$DATEBEGIN <= :FORDATE
              AND (T.USR$DATEEND >= :FORDATE OR T.USR$DATEEND IS NULL)
              AND T.USR$TYPEKEY = :TARRIFTYPEKEY
              AND ((:ISADDITIONALPLACE = 1
                  AND TL.USR$SERVICEKEY = :PERMITSERVICEADDPLACEKEY)
                OR (:ISADDITIONALPLACE = 0
                  AND TL.USR$SERVICEKEY = :PERMITSERVICEKEY
                  AND TL.USR$NUMBERTYPEKEY = :NUMBERTYPEKEY))
            ORDER BY DOC.DOCUMENTDATE DESC
            INTO
              :DAYRATE; --, :PARTIALCOST_BY_DAY;
              SUSPEND;
              FORDATE = FORDATE + 1;
              END
        END
        
      RDB$DESCRIPTION: | 
        @ 
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147022980_1705915908
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "ht_GetNumberTypeCountPlace"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2011-07-25T10:11:53+03:00
      DISPLAYSCRIPT: | 
        HT_GETNUMBERTYPECOUNTPLACE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QNAAAATlVNQkVSVFlQRUtFWQ0AAABOVU1CRVJUWVBFS0VZAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        Option Explicit
        Function ht_GetNumberTypeCountPlace(ByVal NumberTypeKey)
        dim Cr, ibsql
        
          set Cr = new TCreator
          set ibsql = Cr.GetObject(nil, "TIBSQL", "")
          ibsql.Transaction = gdcBaseManager.ReadTransaction
          ibsql.SQL.Text = _
            " SELECT usr$count_place AS cplace FROM usr$ht_numbertype WHERE id = :id "
          ibsql.ParamByName("id").AsInteger = NumberTypeKey
          ibsql.ExecQuery
          
          if ibsql.RecordCount > 0 then
            ht_GetNumberTypeCountPlace = ibsql.FieldByName("cplace").AsInteger
          else
            ht_GetNumberTypeCountPlace = 1
          end if
        
        End function
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147017583_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVATIONDoAfterPost"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-12-12T15:28:17+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVATIONDOAFTERPOST
        GATHERCHANGEDFIELDINFORMATION
        UPDATESERVICELIST
        CORRECTSERVICERESERVATIONCOUNT
        TESTISVIRTUALRESERVATION
        UPDATEPOSTINGSWITHNEWCURRENCY
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        '#include HT_RECALCRESERVATION
        '#include HT_GETROUNDTOVALUEBYCURRKEY
        '#include HT_GETNUMBERTYPECOUNTPLACE
        '#include HLP_IIF
        '#include HLP_GETSTRFIELDVALUE
        option explicit
        sub TgdcAttrUserDefinedUSR_HT_RESERVATIONDoAfterPost(Self)
          call Inherited(Self, "DoAfterPost", Array(Self))
        
        dim Ownerform, Creator, Ar
        dim gdcService, SyncOK
        dim ChangedFieldInformationStr, IsPayment, Doc
        
          set Creator = new TCreator
          ' Если указали номер, то запишем информацию в журнал использования номеров
          if Self.Transaction.InTransaction then
           ' call ht_RecalcReservation(Self)
            Dim Res, qSel
            set qSel = Creator.GetObject(nil, "TIBSQL", "")
            qSel.Transaction = Self.Transaction
            qSel.SQL.Text = _
              "SELECT USR$MEDHISTORYKEY FROM USR$SAN_SANATORIUMCARD WHERE USR$PERMITKEY = :RESERVKEY "
            qSel.ParamByName("RESERVKEY").AsInteger = Self.ID
            qSel.ExecQuery
            'если по бронированию нет мед. истории
            if qSel.eof then
              qSel.Close
              qSel.SQL.Text = _
                "SELECT res.ID " & _
                "FROM  USR$HT_RESERVATION res  " & _
                "LEFT JOIN USR$SAN_SANATORIUMCARD c ON c.USR$PERMITKEY = res.ID " & _
                "WHERE res.USR$REQUESTKEY = :REQUESTKEY AND res.USR$CONTACTKEY = :CONTACTKEY " & _
                "  AND res.USR$TYPE_PERMIT = :TYPEPERMIT AND res.ID <> :RESERVKEY " & _
                "  AND NOT c.USR$MEDHISTORYKEY IS NULL "
              qSel.ParamByName("REQUESTKEY").AsInteger = Self.FieldByName("USR$REQUESTKEY").AsInteger
              qSel.ParamByName("CONTACTKEY").AsInteger = Self.FieldByName("USR$CONTACTKEY").AsInteger
              qSel.ParamByName("TYPEPERMIT").AsInteger = Self.FieldByName("USR$TYPE_PERMIT").AsInteger
              qSel.ParamByName("RESERVKEY").AsInteger = Self.ID
              qSel.ExecQuery
              'если нет брони с таким же типом и клиентом с мед. историей, то создаем
              if qSel.eof then
                dim gdcMedHistory, HistId
                set gdcMedHistory = Creator.GetObject(nil,"TgdcUserDocument","")
                gdcMedHistory.Transaction = Self.Transaction
                gdcMedHistory.ReadTransaction = Self.Transaction
                gdcMedHistory.SubType = SAN_SUBTYPE_MEDICAL_HISTORY
                gdcMedHistory.SubSet = "ByID"
        
                dim gdcRegistration
                set gdcRegistration = Creator.GetObject(nil,"TgdcUserDocument","")
                gdcRegistration.SubType = SAN_SUBTYPE_SANATORIUM_CARD
                gdcRegistration.Transaction = Self.Transaction
                gdcRegistration.ReadTransaction = Self.Transaction
                gdcRegistration.SubSet = "ByID"
        
                gdcMedHistory.Open
                gdcMedHistory.Insert
                gdcMedHistory.FieldByName("usr$datebegin").AsDateTime = _
                  Self.FieldByName("usr$datebegin").AsDateTime
                gdcMedHistory.FieldByName("usr$contactkey").AsInteger = _
                  Self.FieldByName("usr$contactkey").AsInteger
                gdcMedHistory.Post
                HistId = gdcMedHistory.Id
                gdcRegistration.Open
                if not gdcRegistration.Locate("usr$permitkey", Array(Self.ID), "") then
                  gdcRegistration.Insert
                  gdcRegistration.FieldByName("usr$permitkey").AsInteger = Self.ID
                else
                  gdcRegistration.Edit
                end if
                gdcRegistration.FieldByName("usr$medhistorykey").AsInteger = HistId
                gdcRegistration.Post
              end if
            end if
            'если сумма оплаты меньше суммы путевки, но не 0, и статус не Выселен, Выселен досрочно, Заселен, то выставляем статус - Частично оплачено
            call gdcBaseManager.ExecSingleQueryResult(_
              "UPDATE USR$HT_RESERVATION RES " & _
              "SET RES.USR$STATEKEY = :statekey " & _
              "WHERE RES.ID = :ReservationKey AND " & _
               " (COALESCE((SELECT " & _
              "    SUM(P.USR$PAIDSUM) " & _
              "  FROM " & _
              "    USR$SAN_PAYMENT P " & _
              "  WHERE " & _
              "    P.USR$PERMITKEY  =  RES.ID), 0)) > 0 AND " & _
              " (COALESCE((SELECT " & _
              "    SUM(P.USR$PAIDSUM) " & _
              "  FROM " & _
              "    USR$SAN_PAYMENT P " & _
              "  WHERE " & _
              "    P.USR$PERMITKEY  =  RES.ID), 0)) < RES.USR$SUMALL AND RES.USR$SUMALL > 0 " & _
              "  AND NOT RES.USR$STATEKEY IN (:st1, :st2, :st3, :st4)", Array(_
              HT_ReservationStateDict.GetPartiallyPaidState.Key, Self.ID, _
              HT_ReservationStateDict.GetEvictedState.Key, _
              HT_ReservationStateDict.GetSettledState.Key, _
              gdcBaseManager.GetIDByRUIDString("147491476_809241643"), _
              HT_ReservationStateDict.GetCanceledState.Key), Res, Self.Transaction)
        
            'если сумма оплаты больше либо равна сумме путевки, но не 0, и статус не Выселен, Выселен досрочно, Заселен, то выставляем статус - Оплачено
            call gdcBaseManager.ExecSingleQueryResult(_
              "UPDATE USR$HT_RESERVATION RES " & _
              "SET RES.USR$STATEKEY = :statekey " & _
              "WHERE RES.ID = :ReservationKey AND " & _
              " (COALESCE((SELECT " & _
              "    SUM(P.USR$PAIDSUM) " & _
              "  FROM " & _
              "    USR$SAN_PAYMENT P " & _
              "  WHERE " & _
              "    P.USR$PERMITKEY  =  RES.ID), 0)) >= RES.USR$SUMALL AND RES.USR$SUMALL > 0  " & _
              "   AND NOT RES.USR$STATEKEY IN (:st1, :st2, :st3, :st4)", Array(_
              HT_ReservationStateDict.GetPaidState.Key, Self.ID, _
              HT_ReservationStateDict.GetEvictedState.Key, _
              HT_ReservationStateDict.GetSettledState.Key, _
              gdcBaseManager.GetIDByRUIDString("147491476_809241643"), _
              HT_ReservationStateDict.GetCanceledState.Key), Res, Self.Transaction)
        
            'если во всех бронированиях установлен статус - Частично оплачено, то устанавливаем в заявке тоже
            call gdcBaseManager.ExecSingleQueryResult(_
              "UPDATE USR$SAN_REQUEST req " & _
              "SET req.USR$STATEKEY = :STATEKEY " & _
              "WHERE req.DOCUMENTKEY = :REQUESTKEY AND NOT req.USR$STATEKEY IN (:st1, :st2, :st3, :st4) " & _
              "  AND NOT EXISTS " & _
              "(SELECT res.ID " & _
              "FROM USR$HT_RESERVATION res " & _
              "WHERE NOT res.USR$STATEKEY IN (:STATEKEY) " & _
              "  AND res.USR$REQUESTKEY = req.DOCUMENTKEY) ", Array(_
              HT_ReservationStateDict.GetPartiallyPaidState.Key, Self.FieldByName("USR$REQUESTKEY").AsInteger, _
              HT_ReservationStateDict.GetEvictedState.Key, _
              HT_ReservationStateDict.GetSettledState.Key, _
              gdcBaseManager.GetIDByRUIDString("147491476_809241643"), _
              HT_ReservationStateDict.GetCanceledState.Key), Res, Self.Transaction)
        
        
            'если во всех бронированиях установлен статус - Оплачено, то устанавливаем в заявке тоже Оплачено
            call gdcBaseManager.ExecSingleQueryResult(_
              "UPDATE USR$SAN_REQUEST req " & _
              "SET req.USR$STATEKEY = :STATEKEY " & _
              "WHERE req.DOCUMENTKEY = :REQUESTKEY AND NOT req.USR$STATEKEY IN (:st1, :st2, :st3, :st4) " & _
              "  AND NOT EXISTS " & _
              "(SELECT res.ID " & _
              "FROM USR$HT_RESERVATION res " & _
              "WHERE NOT res.USR$STATEKEY IN (:STATEKEY) " & _
              "  AND res.USR$REQUESTKEY = req.DOCUMENTKEY) ", Array(_
              HT_ReservationStateDict.GetPaidState.Key, Self.FieldByName("USR$REQUESTKEY").AsInteger, _
              HT_ReservationStateDict.GetEvictedState.Key, _
              HT_ReservationStateDict.GetSettledState.Key, _
              gdcBaseManager.GetIDByRUIDString("147491476_809241643"), _
              HT_ReservationStateDict.GetCanceledState.Key), Res, Self.Transaction)
        
        
            ' Обновим запись в журнале о бронировании номера
            if HT_ReservationStateDict.GetByKey(Self.FieldByName("usr$statekey").AsInteger).SettleType = _
                HT_SETTLE_TYPE_BEFORE then
              if Self.FieldByName("usr$statekey").AsInteger = _
                  HT_ReservationStateDict.GetPermitBookingState.Key then
                Ar = Array(IBLogin.ContactKey, Self.FieldByName("usr$numberkey").AsVariant, _
                  Self.FieldByName("usr$numbertypekey").AsInteger, _
                  hlp_iif( Self.FieldByName("usr$statekey").AsInteger = _
                    HT_ReservationStateDict.GetPermitBookingState.Key, _
                    hlp_iif(Self.FieldByName("usr$confirmreservdate").AsDateTime > Date, _
                      HT_NumberStateDict.GetBookState.Key, _
                      HT_NumberStateDict.GetFreeState.Key), _
                    HT_NumberStateDict.GetBookState.Key), _
                  Self.ID, _
                  hlp_iif( Self.FieldByName("usr$statekey").AsInteger = _
                    HT_ReservationStateDict.GetPermitBookingState.Key, _
                    Self.FieldByName("usr$roomplacekey").AsVariant, _
                    null), _
                  Self.FieldByName("usr$datebegin").AsDateTime, HT_Options.DefaultTime, _
                  Self.FieldByName("usr$dateend").AsDateTime, HT_Options.DepartureTime)
        
              'если это редактирование брони (продление брони места), то место
              'уже может быть занято, проверяем это и запрещаем сохранять документ, если это так
              call gdcBaseManager.ExecSingleQueryResult(_
                    " select * " & _
                    " from usr$ht_res_numberstate nst " & _
                    " where nst.usr$roomplacekey = :roomplacekey " & _
                    "   and (nst.usr$datebegin between :datebegin and :dateend " & _
                    "     or nst.usr$dateend between :datebegin and :dateend " & _
                    "     or :datebegin between nst.usr$datebegin and nst.usr$dateend) " & _
                    "   and nst.usr$statekey in ( " & HT_NumberStateDict.GetBusyState.Key & _
                    "     , " & HT_NumberStateDict.GetBookState.Key & ")" & _
                    "   and usr$documentkey <> :documentkey ",Array(_
                      Self.FieldByName("usr$roomplacekey").AsInteger, Self.FieldByName("usr$datebegin").AsDateTime,_
                      Self.FieldByName("usr$dateend").AsDateTime, Self.ID), Res, Self.Transaction)
              if not IsEmpty(Res) then
                if not IsNull(Res(0,0)) then
                  call Exception.Raise("Exception","Место в номере уже занято. Выберите иное или сохраните бронирование без предварительного указания места.")
                end if
              end if
        
              ' создаем новую запись со статусом "бронь" или "свободно" (только если не указана дата подтверждения)
              call gdcBaseManager.ExecSingleQueryParam(_
                "UPDATE OR INSERT INTO usr$ht_res_numberstate ( " & _
                "  editorkey, usr$numberkey, usr$numbertypekey, usr$statekey, usr$documentkey," & _
                "  usr$roomplacekey " & _
                hlp_iif(1=1, _
                  ", usr$datebegin, usr$timebegin, " & _
                  " usr$dateend, usr$timeend) ", ")") & _
                "VALUES ( " & _
                "  :editorkey, :usr$numberkey, :usr$numbertypekey, :usr$statekey, :usr$documentkey, " & _
                "  :usr$roomplacekey " & _
                hlp_iif(1=1, _
                ", :datebegin, :timebegin, " & _
                  ":dateend, :timeend) ", ")") & _
                "MATCHING (usr$documentkey, usr$statekey) ", _
                Ar, Self.Transaction)
              end if
            end if
        
            ' Обновим запись в журнале о заселении номера
              ' заменяем старые даты нач. и оконч. на новые (в т.ч. и в столовой)
              call gdcBaseManager.ExecSingleQueryParam(_
                  "UPDATE USR$HT_RES_NUMBERSTATE " & _
                  "  SET EDITORKEY = :EDITORKEY, " & _
                  "  USR$DATEBEGIN = :USR$DATEBEGIN " & _
                  "WHERE " & _
                  "  USR$DOCUMENTKEY = :USR$DOCUMENTKEY " & _
                  "  AND USR$DATEBEGIN = :OLDDATEBEGIN " , _
                Array(IBLogin.ContactKey, Self.FieldByName("usr$datebegin").AsDateTime, _
                  Self.ID, Self.Variables("USR$DATEBEGIN")), Self.Transaction)
        
              call gdcBaseManager.ExecSingleQueryParam(_
                  "UPDATE USR$HT_RES_NUMBERSTATE " & _
                  "  SET EDITORKEY = :EDITORKEY, " & _
                  "  USR$DATEEND = :USR$DATEEND " & _
                  "WHERE " & _
                  "  USR$DOCUMENTKEY = :USR$DOCUMENTKEY " & _
                  "  AND USR$DATEEND = :OLDDATEEND " , _
                Array(IBLogin.ContactKey, Self.FieldByName("usr$dateend").AsDateTime, _
                  Self.ID, Self.Variables("USR$DATEEND")), Self.Transaction)
        
            'добавляем изменения в историю болезни (дата заезда/выезда, контакт(гость))
            call gdcBaseManager.ExecSingleQueryParam(_
                 "update USR$SAN_MEDICAL_HISTORY MED " & _
                 "set MED.USR$CONTACTKEY = :CONTACTKEY " & _
                 "where MED.DOCUMENTKEY = (select CARD.USR$MEDHISTORYKEY " & _
                 "                         from USR$SAN_SANATORIUMCARD CARD " & _
                 "                         join USR$HT_RESERVATION RES on RES.ID = CARD.USR$PERMITKEY " & _
                 "                         where RES.ID = :ID) " , _
                 Array( Self.FieldByName("USR$ContactKey").AsInteger, Self.ID), Self.Transaction)
        
            ' лог столовой
            Res = Empty
            IF Self.FieldByName("usr$datebegin").AsDateTime <> Self.Variables("USR$DATEBEGIN") THEN
              call gdcBaseManager.ExecSingleQueryResult(_
                " SELECT USR$DININGROOMPLACEKEY AS PLACEKEY, ID " & _
                " FROM USR$HT_RES_CANTEEN " & _
                " WHERE USR$DOCUMENTKEY = :USR$DOCUMENTKEY " & _
                "   AND USR$DATEBEGIN = :OLDDATEBEGIN ", Array(Self.ID, Self.Variables("USR$DATEBEGIN")), Res, _
                   Self.Transaction)
              if not IsEmpty(Res) then
                if not IsNull(Res(0,0)) then
                   call gdcBaseManager.ExecSingleQueryParam(_
                          "UPDATE USR$HT_RES_CANTEEN " & _
                          "  SET EDITORKEY = :EDITORKEY, " & _
                          "  USR$DATEBEGIN = :USR$DATEBEGIN " & _
                          "WHERE ID = :ID ", _
                        Array(IBLogin.ContactKey, Self.FieldByName("usr$datebegin").AsDateTime, _
                          Res(1,0)), Self.Transaction)
                   ' Лог бронирования
                   call gdcBaseManager.ExecSingleQueryParam(_
                      "INSERT INTO usr$ht_res_log (" & _
                      "  usr$userkey, usr$datetime, usr$documentkey, usr$description) " & _
                      "VALUES (" & _
                      "  :recuser, :recdate, :reckey, :recdesc) ", _
                      Array(IBLogin.UserKey, Now, Self.ID, _
                        "Изменена занятость места " & hlp_GetStrFieldValue("USR$HT_DININGROOMPLACE","USR$NAME","ID",Res(0,0)) & " (корректировка путевки)"), Self.Transaction)
                end if
              end if
            END IF
        
        
            IF Self.FieldByName("usr$dateend").AsDateTime <> Self.Variables("USR$DATEEND") THEN
              call gdcBaseManager.ExecSingleQueryResult(_
                " SELECT USR$DININGROOMPLACEKEY AS PLACEKEY, ID " & _
                " FROM USR$HT_RES_CANTEEN " & _
                " WHERE USR$DOCUMENTKEY = :USR$DOCUMENTKEY " & _
                "   AND USR$DATEEND = :OLDDATEEND ", Array(Self.ID, Self.Variables("USR$DATEEND")), Res, _
                   Self.Transaction)
              if not IsEmpty(Res) then
                if not IsNull(Res(0,0)) then
                   call gdcBaseManager.ExecSingleQueryParam(_
                          "UPDATE USR$HT_RES_CANTEEN " & _
                          "  SET EDITORKEY = :EDITORKEY, " & _
                          "  USR$DATEEND = :USR$DATEEND " & _
                          "WHERE ID = :ID ", _
                        Array(IBLogin.ContactKey, Self.FieldByName("usr$dateend").AsDateTime, _
                          Res(1,0)), Self.Transaction)
                   ' Лог бронирования
                   call gdcBaseManager.ExecSingleQueryParam(_
                      "INSERT INTO usr$ht_res_log (" & _
                      "  usr$userkey, usr$datetime, usr$documentkey, usr$description) " & _
                      "VALUES (" & _
                      "  :recuser, :recdate, :reckey, :recdesc) ", _
                      Array(IBLogin.UserKey, Now, Self.ID, _
                        "Изменена занятость места " & hlp_GetStrFieldValue("USR$HT_DININGROOMPLACE","USR$NAME","ID",Res(0,0)) & " (корректировка путевки)"), Self.Transaction)
                end if
              end if
            END IF
          end if
        
          ' Если БО находится на форме, обновим инфу в других объектах
          SyncOK = False
          if Self.ObjectExists("DialogForm") then
            if Assigned(Self.Objects("DialogForm")) then
              set Ownerform = Self.Objects("DialogForm")
        
              ' Обновление списка услуг
              set gdcService = Ownerform.GetComponent("usrg_gdcServiceList")
              call UpdateServiceList(Self, gdcService)
        
              SyncOK = True  ' укажем что синхронизация завершена с помощью объектов формы
            end if
          end if
        
          ' Если синхронизация с детальными объектами бронирования|путевки не была проведена
          '  (скорее всего объект был не на своей форме редактирования)
          '  сделаем синхронизацию отдельно
          if not SyncOK then
            ' Обновление списка услуг
            set gdcService = Creator.GetObject(nil, "TgdcAttrUserDefined", "")
            gdcService.ReadTransaction = Self.Transaction
            gdcService.Transaction = Self.Transaction
            gdcService.SubType = HT_SUBTYPE_RES_SERVICELIST
            gdcService.SubSet = HT_SUBSET_BYDOCUMENTKEY
            gdcService.ParamByName("documentkey").AsInteger = Self.ID
            gdcService.Open
            call UpdateServiceList(Self, gdcService)
        
          end if
        
          ' Если в заселенном бронировании поменяли дату окончания то это продление или сокращение проживания
          if HT_ReservationStateDict.GetByKey(Self.FieldByName("usr$statekey").AsInteger).SettleType = HT_SETTLE_TYPE_SETTLE then
            if Self.Variables("usr$dateend") < Self.FieldByName("usr$dateend").CurValue then
              call HT_ReservationLog.AddTyped(_
                Self.ID, _
                "Продлено проживание" & vbCrLf & "  Дата выезда: " & _
                  CStr(Self.Variables("usr$dateend")) & " -> " & _
                  CStr(Self.FieldByName("usr$dateend").CurValue), _
                Self.FieldByName("usr$statekey").AsInteger, RES_ACTION_EXTENDED)
            elseif Self.Variables("usr$dateend") > Self.FieldByName("usr$dateend").CurValue then
              call HT_ReservationLog.AddTyped(_
                Self.ID, _
                "Сокращено проживание" & vbCrLf & "  Дата выезда: " & _
                  CStr(Self.Variables("usr$dateend")) & " -> " & _
                  CStr(Self.FieldByName("usr$dateend").CurValue), _
                Self.FieldByName("usr$statekey").AsInteger, RES_ACTION_REDUCED)
            end if
          end if
        
          ' Запрет переназначения номера
          if Self.Variables("usr$isnumberlocked") <> Self.FieldByName("usr$isnumberlocked").CurValue then
            if Self.FieldByName("usr$isnumberlocked").CurValue then
              call HT_ReservationLog.Add(_
                Self.ID, "Установлен запрет на изменение номера", Self.FieldByName("usr$statekey").AsInteger)
            else
              call HT_ReservationLog.Add(_
                Self.ID, "Снят запрет на изменение номера", Self.FieldByName("usr$statekey").AsInteger)
            end if
          end if
        
          ' При изменении валюты обновим существующие начисления
          if (not IsNull(Self.Variables("usr$currkey"))) and (Self.Variables("usr$currkey") <> Self.FieldByName("usr$currkey").CurValue) then
            call UpdatePostingsWithNewCurrency(Self, Self.FieldByName("usr$currkey").CurValue)
          end if
        
          ' Собрать в текст информацию об изменениях в бронировании
          ChangedFieldInformationStr = GatherChangedFieldInformation(Self)
          if ChangedFieldInformationStr <> "" then
            ' Лог бронирования
            call HT_ReservationLog.Add(_
              Self.ID, _
              "Изменено бронирование" & vbCrLf & _
              ChangedFieldInformationStr, Self.FieldByName("usr$statekey").AsInteger)
          end if
        
          ' занесение/обновление суммы по путевке в доке Оплат, если
          ' это не бронирование;
          ' добавлен признак подоходного налога
          ' добавлено условие чтобы статус не был "Отменено" (метод вызывается при отмене путевки/брони)
          if Self.FieldByName("USR$STATEKEY").AsInteger <> _
               HT_ReservationStateDict.GetPermitBookingState.Key AND _
             Self.FieldByName("USR$STATEKEY").AsInteger <> _
               HT_ReservationStateDict.GetCanceledState.Key then
            Dim PaymentDoc, q
            ' заносим в документ приема оплаты
            set PaymentDoc = Creator.GetObject(nil, "TgdcUserDocument", "")
            set q = Creator.GetObject(nil, "TIBSQL", "")
            if Self.Transaction.InTransaction then
              q.Transaction = Self.Transaction
            else
              q.Transaction = Self.ReadTransaction
            end if
            q.SQL.Text = _
              " SELECT c.ID FROM gd_contact c WHERE c.ID = :id and c.ID in ( " & _
              "   SELECT " & _
              "     dep.ID " & _
              "   FROM " & _
              "     gd_contact dep " & _
              "     JOIN gd_contact comp ON comp.LB <= dep.LB AND comp.RB >= dep.RB " & _
              "   WHERE " & _
              "     comp.ID = <companykey/> " & _
              " ) "
            q.ParamByName("id").AsInteger = Self.FieldByName("USR$PERMITSUPPLYOUTLET").AsInteger
            q.ExecQuery
            PaymentDoc.Close
          end if
         end sub
        
        
        '''''''''''
        ' Собрать в текст информацию об изменениях в бронировании
        function GatherChangedFieldInformation(ByVal gdcObject)
        dim ResultStr, FieldDict, FieldName, Field
        
          ResultStr = ""
          ' Получим словарь с полями для логирования
          set FieldDict = HT_Const.ReservationLogFields
        
          for each FieldName in FieldDict
            ' Найдем поле в БО
            set Field = gdcObject.FindField(FieldName)
            if Assigned(Field) then
              ' Если старое и новое значения отличаются, то занесем в лог
              if ("" & gdcObject.Variables(FieldName)) <> ("" & Field.CurValue) then
                ResultStr = ResultStr & _
                  "  " & FieldDict.Item(FieldName) & ": " & gdcObject.Variables(FieldName) & " -> " & Field.CurValue & vbCrLf
              end if
            end if
          next
        
          GatherChangedFieldInformation = ResultStr
        end function
        
        
        '''''''''''
        ' Обновление списка услуг
        sub UpdateServiceList(ByVal gdcObject, ByVal gdcService)
        dim NumberCountPlace, DayServiceCount
        dim ResideCount, AddResidenceCount, AddPlaceCount, BreakFastGuestCount
        
          ' Если номер виртуальный, то не заполняем список услуг
          if TestIsVirtualReservation(gdcObject) then
            exit sub
          end if
        
          NumberCountPlace = ht_GetNumberTypeCountPlace(gdcObject.FieldByName("usr$numbertypekey").AsInteger)
        
          ' Проживание
          ResideCount = 1
          'закоментировано Для санатория не заполняется услуга Проживания
          'call CorrectServiceReservationCount(gdcObject, gdcService, HT_Options.ResidenceServiceKey, ResideCount)
          ' Дополнительное проживание
          AddResidenceCount = Math.Min(NumberCountPlace - ResideCount, gdcObject.FieldByName("usr$count_adult").AsInteger - ResideCount)
          call CorrectServiceReservationCount(gdcObject, gdcService, HT_Options.AddResidenceServiceKey, AddResidenceCount)
          ' Дополнительное место
          AddPlaceCount = Math.Max(0, gdcObject.FieldByName("usr$count_adult").AsInteger - NumberCountPlace)
          call CorrectServiceReservationCount(gdcObject, gdcService, HT_Options.AddPlaceServiceKey, AddPlaceCount)
          ' Завтраки
          'закоментировано Для санатория не заполняется услуга Завтрак
          'BreakFastGuestCount = ResideCount + AddResidenceCount + AddPlaceCount
          'call CorrectServiceReservationCount(gdcObject, gdcService, HT_Options.BreakFastServiceKey, BreakFastGuestCount)
        
          ' Обновим количество ежедневных услуг, quantity >= 1
          DayServiceCount = gdcObject.FieldByName("nightcount").AsInteger
          if DayServiceCount <= 0 then
            DayServiceCount = 1
          end if
          ' Обновление данных услуг по данным из шапки брони
          gdcService.First
          do while not gdcService.Eof
            if gdcService.FieldByName("usr$frequencykey").AsInteger = HT_Const.SRVFrequencyDaily then
              gdcService.Edit
              gdcService.FieldByName("usr$quantity").AsInteger = DayServiceCount
              gdcService.Post
            end if
        
            gdcService.Edit
            gdcService.FieldByName("usr$currkey").AsInteger = gdcObject.FieldByName("usr$currkey").AsInteger
            gdcService.FieldByName("usr$tarriftypekey").AsInteger = gdcObject.FieldByName("usr$tarriftypekey").AsInteger
            gdcService.Post
        
            gdcService.Next
          loop
        end sub
        
        '''''''''''
        ' Функция добавляет или удаляет записи услуг, чтобы получить необходимое кол-во записей услуг
        sub CorrectServiceReservationCount(ByVal gdcReservation, ByVal gdcService, ByVal ServiceKey, ByVal ServiceCount)
        dim I
        
          ' Отфильтруем датасет чтобы внести правильное количество услуг
          gdcService.Close
          call gdcService.ExtraConditions.Add(" z.usr$servicekey = " & ServiceKey)
          gdcService.Open
          gdcService.Last
        
          if gdcService.RecordCount < ServiceCount then
            for I = gdcService.RecordCount to (ServiceCount - 1)
              gdcService.Insert
              gdcService.FieldByName("usr$documentkey").AsInteger = gdcReservation.ID
              gdcService.FieldByName("usr$currkey").AsInteger = gdcReservation.FieldByName("usr$currkey").AsInteger
              gdcService.FieldByName("usr$servicekey").AsInteger = ServiceKey
              gdcService.FieldByName("usr$frequencykey").AsInteger = HT_Const.SRVFrequencyDaily
              gdcService.Post
            next
          else
            do while gdcService.RecordCount > ServiceCount
              gdcService.Delete
            loop
          end if
        
          ' Восстановим оригинальное состояние датасета
          gdcService.Close
          call gdcService.ExtraConditions.Clear
          gdcService.Open
        end sub
        
        ''''''''''
        ' Виртуальный ли номер
        function TestIsVirtualReservation(ByVal gdcObject)
          TestIsVirtualReservation = False
        
          ' Если номер виртуальный, то не заполняем список услуг
          if not gdcObject.FieldByName("usr$numberkey").IsNull then
            if HT_Dict.NumberDict.Item(gdcObject.FieldByName("usr$numberkey").AsInteger).IsVirtual then
              TestIsVirtualReservation = True
            end if
          else
            ' То же самое для виртуального типа номера
            if not gdcObject.FieldByName("usr$numbertypekey").IsNull then
              if HT_Dict.NumberTypeDict.Item(gdcObject.FieldByName("usr$numbertypekey").AsInteger).IsVirtual then
                TestIsVirtualReservation = True
              end if
            end if
          end if
        end function
        
        ''''''''''
        ' Обновить начисления: установить новую валюту и пересчитать сумму в валюте
        '   от суммы в рублях и курса новой валюты на дату начисления
        sub UpdatePostingsWithNewCurrency(ByVal gdcObject, ByVal NewCurrKey)
        dim Creator, ibsql, ibsqlUpdate, NewCurrRate, NewSumCurr
        
          set Creator = new TCreator
        
          set ibsqlUpdate = Creator.GetObject(nil, "TIBSQL", "")
          ibsqlUpdate.Transaction = gdcObject.Transaction
          ibsqlUpdate.SQL.Text = _
            " UPDATE " & _
            "   usr$ht_res_postinglist " & _
            " SET " & _
            "   usr$currkey = :currkey, " & _
            "   usr$sumcurr = :sumcurr " & _
            " WHERE " & _
            "   id = :id "
        
          ' Запрос на все НАЧИСЛЕНИЯ брони
          set ibsql = Creator.GetObject(nil, "TIBSQL", "")
          ibsql.Transaction = gdcObject.Transaction
          ibsql.SQL.Text = _
            "SELECT " & _
            "  p.id AS id, " & _
            "  p.usr$sumncu AS sumncu, " & _
            "  p.usr$logicdate AS logicdate, " & _
            "  p.usr$sumcurr AS sumcurr " & _
            "FROM " & _
            "  usr$ht_res_postinglist p " & _
            "WHERE " & _
            "  p.usr$documentkey = :reskey " & _
            "  AND p.usr$type = 1 " & _
            "  AND p.usr$correctkey IS NULL " & _
            "  AND NOT EXISTS(SELECT " & _
            "                   l.id " & _
            "                 FROM " & _
            "                   usr$ht_res_postinglist l " & _
            "                 WHERE " & _
            "                   l.usr$correctkey = p.id) "
          ibsql.ParamByName("reskey").AsInteger = gdcObject.ID
          ibsql.ExecQuery
        
          do while not ibsql.Eof
            ' Расчет новой суммы в валюте
            NewCurrRate = inv_CurrencyInfo.GetCurrToNCURate(ibsql.FieldByName("logicdate").AsDateTime, NewCurrKey)
            if NewCurrRate <> 0 then
              NewSumCurr = Math.RoundToValue(ibsql.FieldByName("sumncu").AsCurrency / NewCurrRate, ht_GetRoundToValueByCurrKey(NewCurrKey))
            else
              NewSumCurr = 0
            end if
        
            ibsqlUpdate.ParamByName("id").AsInteger = ibsql.FieldByName("id").AsInteger
            ibsqlUpdate.ParamByName("currkey").AsInteger = NewCurrKey
            ibsqlUpdate.ParamByName("sumcurr").AsCurrency = NewSumCurr
            ibsqlUpdate.ExecQuery
            ibsqlUpdate.Close
        
            ibsql.Next
          loop
        end sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147413489_809241643 ht_RecalcReservation"
          - 
            ADDFUNCTIONKEY: "147152799_1752918391 ht_GetRoundToValueByCurrKey"
          - 
            ADDFUNCTIONKEY: "147022980_1705915908 ht_GetNumberTypeCountPlace"
          - 
            ADDFUNCTIONKEY: "147012896_1661751803 hlp_iif"
          - 
            ADDFUNCTIONKEY: "148870376_1526202144 hlp_GetStrFieldValue"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147017581_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "DOAFTERPOST"
      FUNCTIONKEY: "147017583_1683050467 TgdcAttrUserDefinedUSR_HT_RESERVATIONDoAfterPost"
      OBJECTKEY: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2017-12-12T15:28:18+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147012271_1661751803
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "ht_GetServiceTarrif"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-05-15T21:57:04+03:00
      DISPLAYSCRIPT: | 
        HT_GETSERVICETARRIF
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QOAAAASU5UQVJSSUZET0NLRVkOAAAASU5UQVJSSUZET0NLRVkAAAAAAAAAAAAAAAAA
        AAAAAAAAAAAAAAAARk5TVFBSU1QMAAAASU5TRVJWSUNFS0VZDAAAAElOU0VSVklDRUtFWQAAAAAA
        AAAAAAAAAAAAAAAAAAAAAAAAAABGTlNUUFJTVA8AAABJTk5VTUJFUlRZUEVLRVkPAAAASU5OVU1C
        RVJUWVBFS0VZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RQUlNUDQAAAENVUlJGSUVMRE5B
        TUUNAAAAQ1VSUkZJRUxETkFNRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNUUFJTVA0AAABJ
        TlRSQU5TQUNUSU9ODQAAAElOVFJBTlNBQ1RJT04AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5T
        VFBSU1QIAAAAUEFSVENPU1QIAAAAUEFSVENPU1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5T
        VFBSU1QJAAAAWUVBUkNPVU5UCQAAAFlFQVJDT1VOVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABG
        TlNUUFJTVAwAAABOVU1CRVJPRkRBWVMMAAAATlVNQkVST0ZEQVlTAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAEZOU1RQUlNUCAAAAEhPVVNFS0VZCAAAAEhPVVNFS0VZAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        Option Explicit
        ' 16/02/12 добавлен параметр Частичная цена
        ' 07/09/12 добавлен параметр Кол-во дней по скидке
        Function ht_GetServiceTarrif(ByVal InTarrifDocKey, ByVal InServiceKey, ByVal InNumberTypeKey, _
            ByVal CurrFieldName, ByVal InTransaction, ByRef PartCost, ByRef YearCount, ByRef NumberOfDays, HouseKey)
        dim Res, Tr
        
          ht_GetServiceTarrif = 0.0
          
          set Tr = gdcBaseManager.ReadTransaction
          if Assigned(InTransaction) then
            if InTransaction.Active then
              set Tr = InTransaction
            end if
          end if
        
          if InNumberTypeKey > 0 then
            call gdcBaseManager.ExecSingleQueryResult(_
              "SELECT FIRST (1) " & _
              "  p.usr$cost" & CurrFieldName & " AS costval, " & _
              "  coalesce(t.usr$partialcost,-1) AS partcostval, " & _
              "  coalesce(t.usr$period,-1) AS yearcount, " & _
              "  coalesce(t.usr$numberofdays,-1) AS numberofdays " & _
              "FROM " & _
              "  usr$ht_tarrif t " & _
              "  join usr$ht_tarrifline p on p.masterkey = t.documentkey " & _
              "WHERE " & _
              "  p.masterkey = :dockey " & _
              "  AND p.usr$servicekey = :servicekey " & _
              "  AND p.usr$housekey = :housekey " & _
              "  AND ((p.usr$numbertypekey = :numbertype) OR (p.usr$numbertypekey IS NULL)) " & _
              "ORDER BY " & _
              "  p.usr$numbertypekey NULLS LAST ", _
              Array(InTarrifDocKey, InServiceKey, HouseKey, InNumberTypeKey), Res, Tr)
          else
            call gdcBaseManager.ExecSingleQueryResult(_
              "SELECT FIRST (1) " & _
              "  p.usr$cost" & CurrFieldName & " AS costval, " & _
              "  coalesce(t.usr$partialcost,-1) AS partcostval, " & _
              "  coalesce(t.usr$period,-1) AS yearcount, " & _
              "  coalesce(t.usr$numberofdays,-1) AS numberofdays " & _
              "FROM " & _
              "  usr$ht_tarrif t " & _
              "  join usr$ht_tarrifline p on p.masterkey = t.documentkey " & _
              "WHERE " & _
              "  p.masterkey = :dockey " & _
              "  AND p.usr$housekey = :housekey " & _
              "  AND p.usr$servicekey = :servicekey ", Array(InTarrifDocKey, HouseKey, InServiceKey), Res, Tr)
          end if
          
          if not IsEmpty(Res) then
            if not IsNull(Res(0, 0)) then
              'PartCost = CCur(Res(1, 0))
              'YearCount = CDbl(Replace(Res(2, 0),".",",",1,-1,1))
              'ht_GetServiceTarrif = CCur(Res(0, 0))
              PartCost = Res(1, 0)
              YearCount = Res(2, 0)
              NumberOfDays = Res(3, 0)
              ht_GetServiceTarrif = Res(0, 0)
            end if
          end if
        End function
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147015628_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVATIONGetSelectClause"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-07-27T13:40:29+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVATIONGETSELECTCLAUSE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        option explicit
        function TgdcAttrUserDefinedUSR_HT_RESERVATIONGetSelectClause(Self)
        dim SelectClause
        
          SelectClause = Inherited(Self, "GetSelectClause", Array(Self))
        
          SelectClause = SelectClause & _
            ", (select dd.number from gd_document dd where dd.id = z.usr$requestkey) AS reqnumber " & _
            ", (select cc.name from gd_contact cc where cc.id = z.usr$creatorkey) AS creatorname " & _
            ", (z.usr$dateend - z.usr$datebegin) AS nightcount " & _
            ", z_usr$type_permit.usr$priceforpermit " & _
            ", (z.usr$totalpartsum - coalesce((select sum(p.usr$paidsum) from usr$san_payment p where p.usr$permitkey = z.id), 0)) as remains "
        
          TgdcAttrUserDefinedUSR_HT_RESERVATIONGetSelectClause = SelectClause
        end function
        
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147015626_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "GETSELECTCLAUSE"
      FUNCTIONKEY: "147015628_1683050467 TgdcAttrUserDefinedUSR_HT_RESERVATIONGetSelectClause"
      OBJECTKEY: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2017-07-27T13:40:29+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147015612_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION_DoOnNewRecord"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-12-05T13:30:12+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVATION_DOONNEWRECORD
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        '#include HLP_GETSTRFIELDVALUE
        option explicit
        sub TgdcAttrUserDefinedUSR_HT_RESERVATION_DoOnNewRecord(Self)
          call Inherited(Self, "_DoOnNewRecord", Array(Self))
          
          ' Кто создал
          Self.FieldByName("usr$creatorkey").AsInteger = IBLogin.ContactKey
          Self.FieldByName("usr$creationdate").AsDateTime = Now
          
          Self.FieldByName("usr$requestlinekey").Clear
          Self.FieldByName("usr$num").Clear
          
          dim Creator
          set Creator = new TCreator
        '  dim sqlNumber
        '  set sqlNumber = Creator.GetObject(nil, "TIBSQL", "")
        '  if Self.Transaction.InTransaction then
        '    sqlNumber.Transaction = Self.Transaction
        '  else
        '    sqlNumber.Transaction = Self.ReadTransaction
        '  end if
        '  sqlNumber.SQL.Text = _
        '    " select first 1 g_s_delchar(usr$number) as maxnum " & _
        '    " from usr$ht_reservation " & _
        '    " order by 1 desc "
        '  sqlNumber.ExecQuery
        '  Self.FieldByName("usr$number").AsInteger = sqlNumber.FieldByName("maxnum").AsInteger + 1
        
          dim sqlNumber
          set sqlNumber = Creator.GetObject(nil, "TIBSQL", "")
          if Self.Transaction.InTransaction then
            sqlNumber.Transaction = Self.Transaction
          else
            sqlNumber.Transaction = Self.ReadTransaction
          end if
          sqlNumber.SQL.Text = _
            " select GEN_ID(USR$SUN_G_RESERV_NUMBER, 1) as g from GD_USER  where CONTACTKEY = :CONTACTKEY "
          sqlNumber.ParamByName("CONTACTKEY").AsInteger = IBLogin.ContactKey
          sqlNumber.ExecQuery
          Self.FieldByName("USR$NUMBER").AsString = sqlNumber.FieldByName("g").AsString
        
        
          if Self.VariableExists("Copy") then
            if Self.Variables("Copy") then
              exit sub
            end if
          end if
          
          Self.FieldByName("nightcount").AsInteger = 1
          Self.FieldByName("usr$count_adult").AsInteger = 1
          
          Self.FieldByName("USR$COUNTNIGHT").AsInteger = 0
          
        
          
          ' Статус бронирования
          Self.FieldByName("usr$statekey").AsInteger = HT_ReservationStateDict.GetNewState.Key
          Self.FieldByName("z_usr$statekey_usr$name").AsString = _
            hlp_GetStrFieldValue("usr$ht_res_statedict", "usr$name", "id", Self.FieldByName("usr$statekey").AsInteger)
            
          ' Запрет закрытия оплаты ресторана
          Self.FieldByName("usr$cantaddfrontpay").AsInteger = 1
        
          ' поле Место реализации - подразделение пользователя
          Dim sqlDep
          set sqlDep = Creator.GetObject(nil, "TIBSQL", "")
          sqlDep.Transaction = gdcBaseManager.ReadTransaction
          sqlDep.Close
          sqlDep.SQL.Text = _
            " select first (1) " & _
            "   c.PARENT as depID " & _
            " from " & _
            "   gd_contact c " & _
            "   join gd_contact dep on dep.id = c.parent " & _
            " where " & _
            "   c.id = " & IBLogin.ContactKey & _
            "   and dep.contacttype = 4 " & _
            "   and exists (select dep.id from " & _
            "                 gd_contact comp " & _
            "                 join gd_contact dep on dep.lb>=comp.lb and dep.rb<=comp.rb " & _
            "                where comp.id = <companykey/> and dep.contacttype = 3) "
          sqlDep.ExecQuery
        
          Self.FieldByName("usr$permitsupplyoutlet").AsInteger = _
            sqlDep.FieldByName("depID").AsInteger
            
        
          
          Self.FieldByName("usr$tarriftypekey").AsInteger = gdcBaseManager.GetIDByRUIDString("147022576_704999368") 'взрослый
          Self.FieldByName("usr$calcloyaltydisc").AsInteger = 1
          Self.FieldByName("usr$resort_tax").AsInteger = 1
        end sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "148870376_1526202144 hlp_GetStrFieldValue"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147015610_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "_DOONNEWRECORD"
      FUNCTIONKEY: "147015612_1683050467 TgdcAttrUserDefinedUSR_HT_RESERVATION_DoOnNewRecord"
      OBJECTKEY: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2017-12-05T13:30:13+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147398471_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$SUMRUR"
      FIELDSOURCE: "DCURRENCY"
      FIELDSOURCEKEY: "147000131_486813904 Сумма, DCURRENCY"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Сумма в рос. руб."
      LSHORTNAME: "Сумма в рос. руб."
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-11T12:51:15+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147402121_810706409
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$SUBTRACTCOMMIS"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "За вычетом ком. вознаграждений"
      LSHORTNAME: "За вычетом ком. возн"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147000436_486813904 Контакты, GD_CONTACT"
      RELATIONNAME: "GD_CONTACT"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-14T21:27:43+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147401901_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$TARIFKEY"
      FIELDSOURCE: "USR$GS_DDOCUMENT"
      FIELDSOURCEKEY: "147035010_9802323 Документ, USR$GS_DDOCUMENT"
      FORMAT: ~
      GDCLASSNAME: "TgdcDocument"
      GDSUBTYPE: ~
      LNAME: "Тариф"
      LSHORTNAME: "Тариф"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "NUMBER"
      REFRELATIONNAME: "GD_DOCUMENT"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-15T14:30:21+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147019959_279245339
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "UpdateTaxInfo"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-05-16T04:48:53+03:00
      DISPLAYSCRIPT: | 
        UPDATETAXINFO
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNUUFJTVAQAAABNT0RFBAAAAE1PREUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5TVEZM
        UFI=
      SCRIPT: | 
        Option Explicit
        Function UpdateTaxInfo(ByVal OwnerForm, ByVal Mode)
          Dim gdcObject
          set gdcObject = Ownerform.gdcObject
          if gdcObject.State <> dsEdit and gdcObject.State <> dsInsert then exit function
          
          select case Mode
          case 0
            OwnerForm.GetComponent("usrg_lblResortTaxCost").Caption = ""
            OwnerForm.GetComponent("usrg_lblResortTaxPercent").Caption = ""
            
            gdcObject.FieldByName("USR$RESORTTAXRATE").AsVariant = Null
            gdcObject.FieldByName("USR$RESORTTAXSUM").AsVariant = Null
            gdcObject.FieldByName("USR$RESORTTAXSUMNCU").AsVariant = Null
          case 1
            if OwnerForm.Variables("AgeContact") = -1 then
              call Application.MessageBox(_
                "Возраст клиента не определен!" & vbCr & " Возможно, не указан клиент!", _
                "Внимание!", vbOkOnly or vbInformation or vbSystemModal)
              exit function
            else
              if OwnerForm.Variables("Gender") = -1 then
                call Application.MessageBox(_
                  "Пол клиента не определен!" & vbCr & " Возможно, не указан клиент!", _
                  "Внимание!", vbOkOnly or vbInformation or vbSystemModal)
                exit function
              end if
            end if
             Dim sqlGuest, Creator
        '   if gdcObject.State = dsInsert then gdcObject.State = dsEdit
             set Creator = new TCreator
             set sqlGuest = Creator.GetObject(nil, "TIBSQL", "")
             sqlGuest.Transaction = gdcBaseManager.ReadTransaction
             sqlGuest.Close
             sqlGuest.SQL.Text = _
               "select RT.USR$TAX_RATE as TAX, " & _
               "       RT.USR$GENDER as GENDER " & _
               "from USR$SAN_RESORT_TAX RT " & _
               "where :AGE >= RT.USR$AGE_BEGIN and " & _
               "      :AGE <= RT.USR$AGE_END and " & _
               "      RT.USR$GENDER = :GENDER   "
             sqlGuest.ParamByName("AGE").AsInteger = OwnerForm.Variables("AgeContact")
             sqlGuest.ParamByName("GENDER").AsString = OwnerForm.Variables("Gender")
             sqlGuest.ExecQuery
        
             OwnerForm.Variables("TaxRate") = sqlGuest.FieldByName("TAX").AsInteger
             'OwnerForm.GetComponent("usrg_lblResortTaxPercent").Caption = _
             '  OwnerForm.Variables("TaxRate")
             gdcObject.FieldByName("USR$RESORTTAXRATE").AsCurrency = OwnerForm.Variables("TaxRate")
        
        '     OwnerForm.GetComponent("usrg_lblResortTaxCost").Caption = _
        '       hlp_FormatNumber(hlp_Round50(OwnerForm.Variables("PayCost") * OwnerForm.Variables("TaxRate") / 100))
        
             gdcObject.FieldByName("USR$RESORTTAXSUM").AsCurrency = GS.MulDiv(OwnerForm.Variables("PayCost") , OwnerForm.Variables("TaxRate"), 100, 1, 2)
             gdcObject.FieldByName("USR$RESORTTAXSUMNCU").AsCurrency = GS.MulDiv(OwnerForm.Variables("PayCostNcu") , OwnerForm.Variables("TaxRate"), 100, 1, 2)
             
             OwnerForm.GetComponent("usrg_lblResortTaxPercent").Caption = _
               gdcObject.FieldByName("USR$RESORTTAXRATE").AsCurrency
             OwnerForm.GetComponent("usrg_lblResortTaxCost").Caption = _
               gdcObject.FieldByName("USR$RESORTTAXSUM").AsCurrency
          end select
          
        
        
        End Function
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147020015_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "RefreshGuestInfo"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-05-16T04:48:01+03:00
      DISPLAYSCRIPT: | 
        REFRESHGUESTINFO
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QLAAAASU5PV05FUkZPUk0LAAAASU5PV05FUkZPUk0AAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAARk5TVEZMUFI=
      SCRIPT: | 
        '#include HLP_IIF
        Option Explicit
        ' изменено ByVal на ByRef
        ' возвращаем в качестве значения число полных лет
        Function RefreshGuestInfo(ByVal InOwnerform)
        dim gdcObject, GuestInfo, Creator, ibsql
        
          set gdcObject = InOwnerform.gdcObject
          GuestInfo = " < информация о госте недоступна > "
          
          if not gdcObject.FieldByName("usr$contactkey").IsNull then
            set Creator = new TCreator
            set ibsql = Creator.GetObject(nil, "TIBSQL", "")
            ibsql.Transaction = gdcBaseManager.ReadTransaction
            ibsql.SQL.Text = _
              "SELECT " & _
              "  nation.name AS nation_name, " & _
              "  COALESCE(c.country, '') || COALESCE(', ' || c.city, '') || COALESCE(', ' || c.address, '') AS address, " & _
              "  p.passportnumber AS passportnumber, " & _
              "  p.personalnumber AS personalnumber, " & _
              "  COALESCE(c.phone, p.hphone) AS phone, " & _
              "  age.FULLYEARAGE AS age, " & _
              "  p.birthday AS birthday, " & _
              "  comp.name AS companyname,  " & _
              "  dep.name AS departmentname,  " & _
              "  p.sex as Gender, " & _
              "  C.NOTE AS BLKNOTE " & _
              "FROM " & _
              "  gd_people p " & _
              "  LEFT JOIN gd_contact c ON c.id = p.contactkey " & _
              "  LEFT JOIN gd_place nation ON nation.id = p.usr$nationalitykey " & _
              "  LEFT JOIN gd_contact comp ON comp.id = p.wcompanykey " & _
              "  LEFT JOIN gd_contact dep ON dep.id = p.usr$department " & _
              "  LEFT JOIN usr$san_p_fullage(p.birthday,'" & _
                hlp_iif(gdcObject.FieldByName("usr$datebegin").AsDateTime = "0:00:00", Date, gdcObject.FieldByName("usr$datebegin").AsDateTime) & "' ) age ON 1 = 1 " & _
              "WHERE " & _
              "  p.contactkey = :contactkey "
            ibsql.ParamByName("contactkey").AsInteger = gdcObject.FieldByName("usr$contactkey").AsInteger
            ibsql.ExecQuery
            
            Dim age
            age = ibsql.FieldByName("age").AsInteger
            InOwnerform.Variables("AgeContact") = age
            InOwnerform.Variables("Gender") = ibsql.FieldByName("Gender").AsString
            
            dim blknote
            blknote = ibsql.FieldByName("BLKNOTE").AsString
            
            GuestInfo = _
              "Гражданство: " & hlp_IIF(ibsql.FieldByName("nation_name").IsNull, "< не указано >", ibsql.FieldByName("nation_name").AsString) & vbCrLf & _
              "Адрес: " & hlp_IIF(ibsql.FieldByName("address").AsString = "", "< не указан >", ibsql.FieldByName("address").AsString) & vbCrLf & _
              "Телефон: " & hlp_IIF(ibsql.FieldByName("phone").IsNull, "< не указан >", ibsql.FieldByName("phone").AsString) & vbCrLf & _
              "Номер паспорта: " & hlp_IIF(ibsql.FieldByName("passportnumber").IsNull, "< не указан >", ibsql.FieldByName("passportnumber").AsString) & vbCrLf & _
              "День рождения: " & hlp_IIF(ibsql.FieldByName("birthday").IsNull, "< не указан >", ibsql.FieldByName("birthday").AsDateTime) & _
              " Полных лет на день заезда: " & age & vbCrLf & _
              "Место работы: " & hlp_IIF(ibsql.FieldByName("companyname").IsNull, "< не указано >", ibsql.FieldByName("companyname").AsString) & vbCrLf & _
              "Подразделение: " & hlp_IIF(ibsql.FieldByName("departmentname").IsNull, "< не указано >", ibsql.FieldByName("departmentname").AsString)
              
            RefreshGuestInfo = age
            
            GuestInfo = GuestInfo & vbCrLf & _
              "ЧЕРНЫЙ СПИСОК: " & Ucase(blknote)
          else
            InOwnerform.Variables("AgeContact") = -1
            InOwnerform.Variables("Gender")= -1
          end if
          
          InOwnerform.GetComponent("usrg_lblGuestInfo").Caption = GuestInfo
        End function
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147012896_1661751803 hlp_iif"
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147021949_1705915908
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "RefreshControlsState"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-08-29T19:22:34+03:00
      DISPLAYSCRIPT: | 
        REFRESHCONTROLSSTATE
        SETCANEDITCONTROLSSTATE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNURkxQUg==
      SCRIPT: | 
        Option Explicit
        Function RefreshControlsState(ByVal Ownerform)
        dim gdcObject, lookupNumber
        
          set gdcObject = Ownerform.gdcObject
          
          ' Ограничение на тип номера
          set lookupNumber = Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_NUMBERKEY")
          if not gdcObject.FieldByName("usr$numbertypekey").IsNull then
            lookupNumber.Enabled = True
            lookupNumber.Condition = _
              " (COALESCE(usr$isvirtual, 0) = 0) " & _
              " AND (usr$typekey = " & gdcObject.FieldByName("usr$numbertypekey").AsInteger & ") "
          else
            lookupNumber.Enabled = False
            lookupNumber.Condition = " (COALESCE(usr$isvirtual, 0) = 0) "
            lookupNumber.CurrentKeyInt = -1
          end if
        '
          ' В зависимости от состояния брони позволяем редактировать определенные поля
          select case gdcObject.FieldByName("usr$statekey").AsInteger
          
            case HT_ReservationStateDict.GetEvictedState.Key, HT_ReservationStateDict.GetCanceledState.Key
              call SetCanEditControlsState(Ownerform, False)
              ' 04.09.12 Для санатория добавлено право изменять тип ном. когда пут. выселена.
              Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_NUMBERTYPEKEY").ReadOnly = _
                not HT_RightsHelper.CanExecuteAction(ACTION_PERMIT_NUMTYPECHANGE)
        
            case else
              call SetCanEditControlsState(Ownerform, True)
          end select
          
        dim cbCantAddFrontPay, cbUseCreationDateForCost
          ' Проверка доступа на чекбокс "Оплата из ресторана"
          set cbCantAddFrontPay = Ownerform.GetComponent("usrat_DBCheckBox_USR_CANTADDFRONTPAY")
          cbCantAddFrontPay.Enabled = HT_RightsHelper.CanExecuteAction(ACTION_ALLOW_PAY_FROM_FRONT)
            
          set cbUseCreationDateForCost = Ownerform.GetComponent("usrat_DBCheckBox_USR_USECREATIONDATEFORCOST")
          cbUseCreationDateForCost.Enabled = HT_RightsHelper.CanExecuteAction(ACTION_CREATION_DATE_TARRIF)
          cbUseCreationDateForCost.Caption = "Тариф на дату создания (" & DateValue(gdcObject.FieldByName("usr$creationdate").AsDateTime) & ")"
        End function
        
        ' Установка\снятие состояния конторолов в возможность редактирования
        sub SetCanEditControlsState(ByVal Ownerform, ByVal CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_CONTACTKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_COMPANYKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_TRAVELAGENTKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_NUMBERTYPEKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_TARRIFTYPEKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_PAYTYPEKEY").ReadOnly = (not CanEdit)
          Ownerform.GetComponent("usrat_gsIBLookupComboBox_USR_CURRKEY").ReadOnly = (not CanEdit)
        
          Ownerform.GetComponent("usrat_xDateDBEdit_USR_DATEBEGIN").Enabled = CanEdit
          Ownerform.GetComponent("usrat_xDateDBEdit_USR_DATEEND").Enabled = CanEdit
          Ownerform.GetComponent("usrg_xdeNightCount").Enabled = CanEdit
          Ownerform.GetComponent("usrat_DBEdit_USR_COUNT_ADULT").Enabled = CanEdit
          Ownerform.GetComponent("usrat_DBEdit_USR_COUNT_CHILD").Enabled = CanEdit
          Ownerform.GetComponent("usrat_DBEdit_USR_DAYRATESUM").Enabled = CanEdit
        end sub
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147152764_1752918391
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "UpdatePostingsGrid"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2011-11-04T13:14:59+03:00
      DISPLAYSCRIPT: | 
        UPDATEPOSTINGSGRID
        UPG_SETSUMFIELDVISIBILITY
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNURkxQUg==
      SCRIPT: | 
        Option Explicit
        Function UpdatePostingsGrid(ByVal Ownerform)
        dim gdcObject
        
          set gdcObject = Ownerform.gdcObject
          
          if gdcObject.FieldByName("usr$currkey").AsInteger <> CURRKEY_BYR then
            call UPG_SetSumFieldVisibility(Ownerform, False)
          else
            call UPG_SetSumFieldVisibility(Ownerform, True)
          end if
        End function
        
        sub UPG_SetSumFieldVisibility(ByVal Ownerform, ByVal IsNCUVisible)
        dim I, gdcService, gdcPosting, Grid
        
          ' Услуги
          set gdcService = Ownerform.GetComponent("usrg_gdcServiceList")
          set Grid = Ownerform.GetComponent("usrg_ibgrServiceList")
          Grid.ColumnByField(gdcService.FieldByName("usr$costncu")).Visible = IsNCUVisible
          Grid.ColumnByField(gdcService.FieldByName("usr$costcurr")).Visible = not IsNCUVisible
          Grid.ColumnByField(gdcService.FieldByName("usr$sumncu")).Visible = IsNCUVisible
          Grid.ColumnByField(gdcService.FieldByName("usr$sumcurr")).Visible = not IsNCUVisible
        
          ' Начисления
          for I = 1 to HT_GROUP_FOLIO_NUMBER
            set gdcPosting = Ownerform.GetComponent("usrg_gdcDetailPosting_0" & I)
            set Grid = Ownerform.GetComponent("usrg_ibgrDetailPosting_0" & I)
            Grid.ColumnByField(gdcPosting.FieldByName("abs_sumncu")).Visible = IsNCUVisible
            Grid.ColumnByField(gdcPosting.FieldByName("abs_sumcurr")).Visible = not IsNCUVisible
          next
        end sub
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147152756_1752918391
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "UpdateNonDBDataControls"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-06-01T10:52:25+03:00
      DISPLAYSCRIPT: | 
        UPDATENONDBDATACONTROLS
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNURkxQUg==
      SCRIPT: | 
        '#include UPDATETAXINFO
        '#include HLP_FORMATNUMBER
        '#include HLP_GETSTRFIELDVALUE
        Option Explicit
        Function UpdateNonDBDataControls(ByVal Ownerform)
        dim gdcObject
          set gdcObject = Ownerform.gdcObject
          Ownerform.GetComponent("usrg_lblNumberName").Caption = _
            hlp_GetStrFieldValue("usr$ht_number", "usr$name", "id", gdcObject.FieldByName("usr$numberkey").AsInteger)
          Ownerform.GetComponent("usrg_lblTarrifTypeName").Caption = _
            hlp_GetStrFieldValue("usr$ht_tarriftype", "usr$name", "id", gdcObject.FieldByName("usr$tarriftypekey").AsInteger)
          Ownerform.GetComponent("usrg_lblCurrencyName").Caption = _
            hlp_GetStrFieldValue("gd_curr", "code", "id", gdcObject.FieldByName("usr$currkey").AsInteger)
          Ownerform.GetComponent("usrg_lblDayRateSumValue").Caption = _
            hlp_FormatNumber(gdcObject.FieldByName("usr$dayratesum").AsCurrency)
         Ownerform.GetComponent("usrg_lblTotalPartSumValue").Caption = _
            hlp_FormatNumber(gdcObject.FieldByName("usr$totalpartsum").AsCurrency) ' частичная цена
         Ownerform.Variables("PayCost") = gdcObject.FieldByName("usr$totalpartsum").AsCurrency
         if gdcObject.FieldByName("usr$clientcategorykey").AsInteger = gdcBaseManager.GetIDByRUIDString("147140069_779589892") then
           'Сумма курортного сбора считается на дату оплаты кур. сбора
           dim CurrRate, CurrKey
           CurrKey = gdcObject.FieldByName("usr$currkey").AsInteger
           CurrRate = inv_CurrencyInfo.GetCurrToNCURate(gdcObject.FieldByName("USR$DATEPAYRESORTTAX").AsDateTime, CurrKey)
           if CurrRate <> 0 then
             Ownerform.Variables("PayCostNcu") =  Math.RoundToValue(gdcObject.FieldByName("usr$totalpartsum").AsCurrency*CurrRate, ht_GetRoundToValueByCurrKey(CurrKey))
           end if
          else
            Ownerform.Variables("PayCostNcu") = gdcObject.FieldByName("usr$sumncu").AsCurrency
          end if
         ' курортный сбор
         if Ownerform.GetComponent("usrat_DBCheckBox_USR_RESORT_TAX").Checked then
           Ownerform.GetComponent("usrg_lblResortTaxPercent").Caption = _
             hlp_FormatNumber(gdcObject.FieldByName("USR$RESORTTAXRATE").AsCurrency)
           Ownerform.GetComponent("usrg_lblResortTaxCost").Caption = _
             hlp_FormatNumber(gdcObject.FieldByName("USR$RESORTTAXSUM").AsCurrency)
         end if
        End function
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147019959_279245339 UpdateTaxInfo"
          - 
            ADDFUNCTIONKEY: "147128163_1705915908 hlp_FormatNumber"
          - 
            ADDFUNCTIONKEY: "148870376_1526202144 hlp_GetStrFieldValue"
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147019967_279245339
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrg_actResortTax"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrg_actResortTax"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2015-01-14T14:59:03+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147019970_279245339
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrg_actResortTaxOnExecute"
      COMMENT: ~
      EVENT: "ONEXECUTE"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-08-22T17:00:23+03:00
      DISPLAYSCRIPT: | 
        USRG_ACTRESORTTAXONEXECUTE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        '#include UPDATETAXINFO
        Option Explicit
        sub usrg_actResortTaxOnExecute(ByVal Sender)
        
          dim CheckBox
        
          set CheckBox = Sender.OwnerForm.GetComponent("usrat_DBCheckBox_USR_RESORT_TAX")
        
          if Sender.OwnerForm.Showing then
            if CheckBox.Checked then
              call UpdateTaxInfo(Sender.OwnerForm, 1)
            else
              call UpdateTaxInfo(Sender.OwnerForm, 0)
            end if
          end if
          
        End sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147019959_279245339 UpdateTaxInfo"
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147015619_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupRecord"
      COMMENT: ~
      EVENT: "ONSETUPRECORD"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2018-01-09T09:32:41+03:00
      DISPLAYSCRIPT: | 
        GDC_DLGATTRUSERDEFINEDUSR_HT_RESERVATIONONSETUPRECORD
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        '#include USRG_ACTRESORTTAXONEXECUTE
        '#include UPDATEPOSTINGSGRID
        '#include UPDATENONDBDATACONTROLS
        '#include RES_SHOWNOTEMPTYPOSTINGS
        '#include REFRESHCONTROLSSTATE
        '#include REFRESHGUESTINFO
        '#include REFRESHPOSTINGSDATA
        '#include REFRESHDATEDETAILS
        option explicit
        sub gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupRecord(ByVal Sender)
          call   Inherited(Sender, "OnSetupRecord", Array(Sender))
        
        dim gdcObject, gdcLastDetailPosting
        
          set gdcObject = Sender.gdcObject
        
          ' Запомним состоние БО при открытии
          if gdcObject.State = dsInsert then
            Sender.Variables("ObjectState") = dsInsert
          else
            Sender.Variables("ObjectState") = dsEdit
          end if
        
          if not gdcObject.VariableExists("DiscKey") then
            gdcObject.AddVariableItem("DiscKey")
          end if
          dim qUp, DiscKey, Creator
          set Creator = new TCreator
          set qUp = Creator.getObject(null, "TIBSQL", "")
          qUp.Transaction = gdcObject.ReadTransaction
          qUp.SQL.Text = _
            " SELECT l.USR$REASONKEY " & _
            " FROM USR$HT_LOYALTY l " & _
            " WHERE l.USR$PERCENT = :perc "
          qUp.ParamByName("perc").AsCurrency = gdcObject.FieldByname("USR$PERC_LOYALTY").AsCurrency
          qUp.ExecQuery
          gdcObject.Variables("DiscKey") = qUp.FieldByName("USR$REASONKEY").AsInteger
        '  if gdcObject.State = dsEdit then
        '    gdcObject.Post
        '  end if
        
        
          set gdcLastDetailPosting = Sender.GetComponent("usrg_gdcDetailPosting_0" & HT_GROUP_FOLIO_NUMBER)
          gdcLastDetailPosting.Close
        
          Sender.GetComponent("usrg_lblDetailPostingAccount_0" & HT_GROUP_FOLIO_NUMBER).Caption = "Счет " & HT_GROUP_FOLIO_NUMBER
          Sender.GetComponent("usrg_actTogglePostings_0" & HT_GROUP_FOLIO_NUMBER).Caption = "Счет " & HT_GROUP_FOLIO_NUMBER
          Sender.GetComponent("usrg_actTogglePostings_0" & HT_GROUP_FOLIO_NUMBER).Hint = "Отобразить " & HT_GROUP_FOLIO_NUMBER & "-ой счет"
        
          gdcLastDetailPosting.Open
        
          if gdcObject.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
            Sender.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").ReadOnly = false
            Sender.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").Color = -2147483643
          else
            Sender.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").ReadOnly = true
            Sender.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").Color = -2147483644
          end if
          if gdcObject.FieldByName("USR$MANUALCOMPERC").AsInteger = 1 then
            Sender.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").ReadOnly = false
            Sender.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").Color = -2147483643
          else
            Sender.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").ReadOnly = true
            Sender.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").Color = -2147483644
          end if
          if gdcObject.FieldByName("USR$MANUALDISCSUM").AsInteger = 1 then
            Sender.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").ReadOnly = false
            Sender.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").Color = -2147483643
          else
            Sender.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").ReadOnly = true
            Sender.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").Color = -2147483644
          end if
          Sender.GetComponent("usrat_DBEdit_USR_PERC_LOYALTY").ReadOnly = true
        
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_DISCOUNTKEY").Condition = _
            "'" & gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime & "' BETWEEN COALESCE(disc.USR$DATEBEGIN, CAST('01.01.1000' AS DATE)) AND COALESCE(disc.USR$DATEEND, CAST('01.01.4000' AS DATE))"
        
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_STATEKEY").Enabled = _
            (gdcObject.FieldByName("USR$STATEKEY").AsInteger <> _
            gdcBaseManager.GetIDByRUIDString("147020052_1683050467") ) ' если статус Отменена, то поменять его невозможно
          ' закомментировано для ускорения загрузки
          ' Обновление детальной информации по датам
           call RefreshDateDetails(Sender)
        '  ' Обновим данные в датасетах счетов, подсчитаем суммы по ним
        '  call RefreshPostingsData(Sender)
          ' Обновить детальную информацию о госте
          call RefreshGuestInfo(Sender)
          ' Обновить состояние контролов на форме
          call RefreshControlsState(Sender)
          ' Обновление не DB контроллов получающих данные из БО
          call UpdateNonDBDataControls(Sender)
          ' Обновим видимость колонок сумм в гридах начислений
        '  call UpdatePostingsGrid(Sender)
        
          ' Отобразим только не пустые счета
        '  call RES_ShowNotEmptyPostings(Sender)
        
          call usrg_actResortTaxOnExecute (Sender)
        end sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147019970_279245339 usrg_actResortTaxOnExecute"
          - 
            ADDFUNCTIONKEY: "147152764_1752918391 UpdatePostingsGrid"
          - 
            ADDFUNCTIONKEY: "147152756_1752918391 UpdateNonDBDataControls"
          - 
            ADDFUNCTIONKEY: "147133961_1705915908 RES_ShowNotEmptyPostings"
          - 
            ADDFUNCTIONKEY: "147021949_1705915908 RefreshControlsState"
          - 
            ADDFUNCTIONKEY: "147020015_1683050467 RefreshGuestInfo"
          - 
            ADDFUNCTIONKEY: "147016757_1683050467 RefreshPostingsData"
          - 
            ADDFUNCTIONKEY: "147015620_1683050467 RefreshDateDetails"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147015617_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONSETUPRECORD"
      FUNCTIONKEY: "147015619_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSetupRecord"
      OBJECTKEY: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: ~
      EDITIONDATE: 2018-01-05T16:07:33+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147019968_279245339
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONEXECUTE"
      FUNCTIONKEY: "147019970_279245339 usrg_actResortTaxOnExecute"
      OBJECTKEY: "147019967_279245339 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrg_actResortTax"
      OBJECTNAME: "usrg_actResortTax"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-08-22T17:00:23+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147403140_812279903
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "ht_GetActualTarrifDoc_PF"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-06-26T12:56:12+03:00
      DISPLAYSCRIPT: | 
        HT_GETACTUALTARRIFDOC_PF
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QPAAAASU5UQVJSSUZUWVBFS0VZDwAAAElOVEFSUklGVFlQRUtFWQAAAAAAAAAAAAAA
        AAAAAAAAAAAAAAAAAABGTlNUUFJTVBMAAABJTkNMSUVOVENBVEVHT1JZS0VZEwAAAElOQ0xJRU5U
        Q0FURUdPUllLRVkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5TVFBSU1QJAAAASU5GT1JEQVRF
        CQAAAElORk9SREFURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNUUFJTVA0AAABJTlRSQU5T
        QUNUSU9ODQAAAElOVFJBTlNBQ1RJT04AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5TVFBSU1QN
        AAAAVFlQRVBFUk1JVEtFWQ0AAABUWVBFUEVSTUlUS0VZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AEZOU1RQUlNUEgAAAFBFUk1JVFNVUFBMWU9VVExFVBIAAABQRVJNSVRTVVBQTFlPVVRMRVQAAAAA
        AAAAAAAAAAAAAAAAAAAAAAAAAAAARk5TVFBSU1QKAAAAQ09OVEFDVEtFWQoAAABDT05UQUNUS0VZ
        AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        Option Explicit
        Function ht_GetActualTarrifDoc_PF(ByVal InTarrifTypeKey, ByVal InClientCategoryKey, ByVal InForDate, ByVal InTransaction, ByVal TypePermitKey, ByVal PermitSupplyOutlet, ByVal ContactKey)
          dim Res, Tr, Creator
          set Creator= new TCreator
          ht_GetActualTarrifDoc_PF = -1
        
          dim qSel, TarrifGroupKey
          set qSel = Creator.GetObject(nil, "TIBSQL", "")
          qSel.Transaction = gdcBaseManager.ReadTransaction
          qSel.SQL.Text = _
            " SELECT USR$TYPEPRICEKEY, USR$TARRIFGROUPKEY " & _
            " FROM USR$SAN_PERMIT_TYPE " & _
            " WHERE DOCUMENTKEY = :typekey "
          qSel.ParamByName("typekey").AsInteger = TypePermitKey
          qSel.ExecQuery
        
          if Assigned(InTransaction) then
            set Tr = InTransaction
          else
            set Tr = gdcBaseManager.ReadTransaction
          end if
          if qSel.FieldByName("USR$TYPEPRICEKEY").AsInteger = 0 then
            TypePermitKey = 0
          end if
          TarrifGroupKey = qSel.FieldByName("USR$TARRIFGROUPKEY").AsInteger
          if ContactKey > 0 then
            call gdcBaseManager.ExecSingleQueryResult(_
              "SELECT FIRST (1) " & _
              "  p.documentkey, coalesce(t.usr$typepricekey, 0) " & _
              "FROM " & _
              "  usr$ht_tarrif p " & _
              "  left join usr$san_permit_type t on t.documentkey = p.usr$type_permit " & _
              "WHERE " & _
              "  p.usr$datebegin <= :fordate " & _
              "  AND ((p.usr$dateend >= :fordate) OR (p.usr$dateend IS NULL)) " & _
              "  AND p.usr$typekey = :typekey " & _
              "  AND p.usr$clientcatkey = :clientcatkey " & _
              "  AND coalesce(p.usr$type_permit, 0) = :typepermitkey " & _
              "  AND p.usr$permitsupplyoutlet = :permitsupplyoutlet " & _
              "  AND p.usr$contactkey = :contactkey " & _
              "  AND coalesce(p.usr$tarrifgroupkey, 0) = :tarrifgroupkey " & _
              "ORDER BY p.usr$type_permit DESC, " & _
              "  p.usr$datebegin DESC ", Array(InForDate, InTarrifTypeKey, InClientCategoryKey, TypePermitKey, _
                PermitSupplyOutlet, ContactKey, TarrifGroupKey), Res, Tr)
        
            if not IsEmpty(Res) then
              if not IsNull(Res(0, 0)) then
                ht_GetActualTarrifDoc_PF = Res(0, 0)
              end if
            end if
          end if
          if ht_GetActualTarrifDoc_PF <= 0 then
            call gdcBaseManager.ExecSingleQueryResult(_
              "SELECT FIRST (1) " & _
              "  p.documentkey, coalesce(t.usr$typepricekey, 0) " & _
              "FROM " & _
              "  usr$ht_tarrif p " & _
              "  left join usr$san_permit_type t on t.documentkey = p.usr$type_permit " & _
              "WHERE " & _
              "  p.usr$datebegin <= :fordate " & _
              "  AND ((p.usr$dateend >= :fordate) OR (p.usr$dateend IS NULL)) " & _
              "  AND p.usr$typekey = :typekey " & _
              "  AND p.usr$clientcatkey = :clientcatkey " & _
              "  AND coalesce(p.usr$type_permit, 0) = :typepermitkey " & _
              "  AND p.usr$permitsupplyoutlet = :permitsupplyoutlet " & _
              "  AND coalesce(p.usr$contactkey, 0) = 0 " & _
              "  AND coalesce(p.usr$tarrifgroupkey, 0) = :tarrifgroupkey " & _
              "ORDER BY p.usr$type_permit DESC, " & _
              "  p.usr$datebegin DESC ", Array(InForDate, InTarrifTypeKey, InClientCategoryKey, TypePermitKey, _
                PermitSupplyOutlet, TarrifGroupKey), Res, Tr)
        
            if not IsEmpty(Res) then
              if not IsNull(Res(0, 0)) then
                ht_GetActualTarrifDoc_PF = Res(0, 0)
              end if
            end if
          end if
        End function
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147015623_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSyncField"
      COMMENT: ~
      EVENT: "ONSYNCFIELD"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2020-11-11T11:40:21+03:00
      DISPLAYSCRIPT: | 
        GDC_DLGATTRUSERDEFINEDUSR_HT_RESERVATIONONSYNCFIELD
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        UFJTVAUAAABGSUVMRAUAAABGSUVMRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNUUFJTVAgA
        AABTWU5DTElTVAgAAABTWU5DTElTVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNURkxQUg==
      SCRIPT: | 
        '#include UPDATETAXINFO
        '#include REFRESHDATEDETAILS
        '#include SAN_UPDATETAXSUM
        '#include UPDATEPOSTINGSGRID
        '#include UPDATENONDBDATACONTROLS
        '#include REFRESHGUESTINFO
        '#include ht_GetActualTarrifDoc_PF
        option explicit
        sub gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSyncField(ByVal Sender, ByVal Field, ByVal SyncList)
          call   Inherited(Sender, "OnSyncField", Array(Sender, Field, SyncList))
        
          dim gdcObject, gdcGuestList, Creator
          set gdcObject = Sender.gdcObject
        
          select case Field.FieldName
          case "USR$PERCCOMMIS"
            if gdcObject.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
              gdcObject.FieldByName("USR$TOTALPARTSUM").AsCurrency = gdcObject.FieldByName("USR$TOTALPARTSUM").AsCurrency
            end if
          case "USR$CONTACTKEY"
        
            ' обновляем только если имя DataSet пустое, т.е. если это док. бронирования/путевки
            if Field.DataSet.Name = "" then
              set Creator = new TCreator
             ' очистим таблицу скидок при смене клиента
              if Field.OldValue <> Field.NewValue  then
                dim qDel
                set qDel = Creator.getObject(null, "TIBSQL", "")
                qDel.Transaction = gdcObject.Transaction
                qDel.SQL.Text = _
                  " DELETE FROM USR$HT_RESERVDISCOUNT " & _
                  " WHERE USR$RESERVATIONKEY = :ResKey "
                qDel.ParamByName("ResKey").AsInteger = gdcObject.ID
                qDel.ExecQuery
                gdcObject.FieldByName("USR$PERC_LOYALTY").AsInteger = gdcObject.FieldByName("USR$PERC_LOYALTY").AsInteger
                Sender.GetComponent("usrg_gdcResDisc").CloseOpen
              end if
              Dim age
              ' Обновить детальную информацию о госте
              age = RefreshGuestInfo(Sender)
              ' заполняем поле Тип тарифа в зависимости от возраста гостя
              ' если старше 18 - тариф взрослый
                set ibsql = Creator.GetObject(nil, "TIBSQL", "")
                ibsql.Transaction = gdcBaseManager.ReadTransaction
                ibsql.Close
                if age>=12 then
                  ibsql.SQL.Text = _
                    " select first(1) " & _
                    "   tt.id " & _
                    " from " & _
                    "   usr$ht_tarriftype tt " & _
                    " where " & _
                    "   usr$disabled='0' AND " & _
                    "   usr$TYPE = 0 "
                else
                  ibsql.SQL.Text = _
                    " select " & _
                    "   tt.id " & _
                    " from " & _
                    "   usr$ht_tarriftype tt " & _
                    " where " & _
                    "   usr$disabled='0' AND " & _
                    "   :age >= tt.usr$agefrom and :age < tt.usr$ageto"
                  ibsql.ParamByName("age").AsInteger = age
                end if
                ibsql.ExecQuery
                if ibsql.FieldByName("id").AsInteger=0 then
                  Application.MessageBox "Для возраста гостя путевка не предусмотрена","Нет нужного тарифа", _
                    vbOkOnly + vbCritical
                  gdcObject.FieldByName("usr$contactkey").AsInteger = 0
                  exit sub
                  'gdcObject.FieldByName("usr$tarriftypekey").AsVariant = null
                else
                  if gdcObject.State <> dsInsert or gdcObject.State <> dsEdit then gdcObject.Edit
                  gdcObject.FieldByName("usr$tarriftypekey").AsInteger = ibsql.FieldByName("id").AsInteger
                end if
        
              end if
          case "USR$CURRKEY"
            ' Обновим видимость колонок сумм в гридах начислений
            call UpdatePostingsGrid(Sender)
        
          case "USR$RESERVKEY", "USR$APPLICATIONKEY"
            ' Загрузим данные из соответствующего бронирования/заявки
            Dim ibsql
            set Creator = new TCreator
            set ibsql = Creator.GetObject(nil, "TIBSQL", "")
            ibsql.Transaction = gdcBaseManager.ReadTransaction
            ibsql.SQL.Text = _
              "SELECT " & _
              "  usr$contactkey AS contactkey, " & _
              "  usr$numbertypekey AS numbertypekey " & _
              hlp_iif(Field.FieldName="USR$RESERVKEY", ",  usr$numberkey AS numberkey, " & _
                "  usr$roomplacekey AS placekey ","") & _
              "FROM " & _
              hlp_iif(Field.FieldName="USR$RESERVKEY","usr$ht_reservation r", _
                "usr$san_personal_application a JOIN gd_document d ON a.documentkey = d.id") & _
              "   " & _
              "WHERE " & _
              hlp_iif(Field.FieldName="USR$RESERVKEY", "  r.id = :res_id ", _
                " d.id = :applic_id")
            IF Field.FieldName = "USR$RESERVKEY" THEN
              ibsql.ParamByName("res_id").AsInteger = gdcObject.FieldByName("usr$reservkey").AsInteger
            ELSE
              ibsql.ParamByName("applic_id").AsInteger = gdcObject.FieldByName("usr$applicationkey").AsInteger
            END IF
            ibsql.ExecQuery
            gdcObject.FieldByName("usr$contactkey").AsInteger = _
                ibsql.FieldByName("contactkey").AsInteger
            ' возможно можно будет удалить этот иф с содержимым, т.к. номера и столовая указ.
            ' только в заселении
            IF Field.FieldName = "USR$RESERVKEY" THEN
              if ibsql.FieldByName("numberkey").AsVariant > 0 then
                gdcObject.FieldByName("usr$numberkey").AsInteger = _
                  ibsql.FieldByName("numberkey").AsInteger
              end if
              if ibsql.FieldByName("placekey").AsInteger > 0 then
                gdcObject.FieldByName("usr$roomplacekey").AsInteger = _
                  ibsql.FieldByName("placekey").AsInteger
              end if
            END IF
            ibsql.Close
        
            Sender.GetComponent("usrat_gsIBLookupComboBox_USR_" & _
              hlp_iif(Field.FieldName="USR$RESERVKEY","APPLICATIONKEY","RESERVKEY")).Enabled = _
              hlp_iif(Field.Text <> "",false,true)
        
            case "USR$COUNTNIGHT"
              if Field.Value >= 0 then
                gdcObject.FieldByName("USR$DATEEND").AsDateTime = gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime + Field.Value
              end if
        
            case "USR$CONTROCCKEY", "USR$DATEBEGIN", "USR$DATEEND", "USR$TARRIFTYPEKEY", "USR$NUMBERTYPEKEY", "USR$COUNT_ADULT", "USR$USECREATIONDATEFORCOST", "USR$CURRKEY", "USR$CLIENTCATEGORYKEY", "USR$CREATIONDATE", "USR$ISADDITIONALPLACE"
              set Creator = new TCreator
              set ibsql = Creator.GetObject(nil, "TIBSQL", "")
              ibsql.Transaction = gdcObject.ReadTransaction
              if Field.FieldName = "USR$DATEBEGIN" then
                Sender.GetComponent("usrat_gsIBLookupComboBox_USR_DISCOUNTKEY").Condition = _
                  "'" & gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime & "' BETWEEN COALESCE(disc.USR$DATEBEGIN, CAST('01.01.1000' AS DATE)) AND COALESCE(disc.USR$DATEEND, CAST('01.01.4000' AS DATE))"
                ibsql.Close
                ibsql.SQL.Text = _
                  " select usr$percent " & _
                  " from usr$ht_discount  " & _
                  " where documentkey = :disckey and :pdate BETWEEN COALESCE(USR$DATEBEGIN, CAST('01.01.1000' AS DATE)) AND COALESCE(USR$DATEEND, CAST('01.01.4000' AS DATE)) "
                ibsql.ParamByName("disckey").AsInteger = gdcObject.FieldByName("USR$DISCOUNTKEY").AsInteger
                ibsql.ParamByName("pdate").AsDateTime = gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime
                ibsql.ExecQuery
                if ibsql.eof and not IsNull(gdcObject.FieldByName("USR$DISCOUNTKEY").AsVariant) then
                  gdcObject.FieldByName("USR$DISCOUNTKEY").AsVariant = null
                  call Application.MessageBox("На дату заезда выбранный тип скидок не попадает в период действия!","Внимание", _
                      vbOkOnly + vbInformation)
                end if
                gdcObject.FieldByName("USR$DATEEND").AsVariant = Field.Value + gdcObject.FieldByName("USR$COUNTNIGHT").AsInteger
              end if
              
              dim gdcResAdd
              set gdcResAdd = Sender.GetComponent("usrg_gdcAdd")
              gdcResAdd.First
              if not gdcResAdd.eof then
                dim  TarrifDate, CurrKey, CurrRate, RurRate
                ibsql.Close
                ibsql.SQL.Text = _
                  "SELECT inv.DOCUMENTKEY, doc.DOCUMENTDATE " & _
                  "FROM USR$SAN_INVOICE inv " & _
                  "LEFT JOIN GD_DOCUMENT doc ON doc.ID = inv.DOCUMENTKEY " & _
                  "WHERE inv.DOCUMENTKEY IN " & _
                  " ( SELECT INV.DOCUMENTKEY " & _
                  "   FROM USR$HT_RESERVATION RES " & _
                  "   LEFT JOIN USR$SAN_INVOICE INV ON (INV.USR$CONTROCCKEY = RES.USR$CONTROCCKEY OR INV.USR$REQUESTKEY = RES.USR$REQUESTKEY ) " & _
                  "   WHERE  RES.ID = :RESERVATIONKEY AND COALESCE(inv.USR$CANCELED, 0) = 0 ) "
                ibsql.ParamByName("RESERVATIONKEY").AsInteger = gdcObject.ID
                ibsql.ExecQuery
        
                if not ibsql.eof then
                  ' курс берем на дату счет-фактуры
                  TarrifDate = ibsql.FieldByName("DOCUMENTDATE").AsDateTime
                else
                  ' курс берем на дату заезда
                  TarrifDate = gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime
                end if
        
                'Валюта оплаты
                CurrKey = gdcObject.FieldByName("usr$currkey").AsInteger
                CurrRate = inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, CurrKey)
                RurRate = inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, CURRKEY_RUR)
        
                while not gdcResAdd.eof
                  gdcResAdd.Edit
                  'Если нерезидент, то переводим из рос в валюту
                  'иначе в бел.рублях
                  if gdcObject.FieldByName("USR$CLIENTCATEGORYKEY").AsInteger = gdcBaseManager.GetIDByRUIDString("147140069_779589892") then
                    gdcResAdd.FieldByName("USR$SUMNCU").AsCurrency = gs.MulDiv(gdcResAdd.FieldByName("USR$SUM").AsCurrency, RurRate, 1, 1, 2)
                    gdcResAdd.FieldByName("USR$SUMCUR").AsCurrency = gs.MulDiv(gdcResAdd.FieldByName("USR$SUM").AsCurrency, RurRate/CurrRate, 1, 1, 2)
                  else
                    gdcResAdd.FieldByName("USR$SUMNCU").AsCurrency = gdcResAdd.FieldByName("USR$SUM").AsCurrency
                    gdcResAdd.FieldByName("USR$SUMCUR").AsCurrency = gs.MulDiv(gdcResAdd.FieldByName("USR$SUM").AsCurrency, CurrRate, 1, 1, 2)
                  end if
                   'НДС
                  gdcResAdd.FieldByName("USR$SUMNDS").AsCurrency = gs.MulDiv(gdcResAdd.FieldByName("USR$SUMCUR").AsCurrency / 100 * gdcResAdd.FieldByName("USR$NDS").AsCurrency, 1, 1, 1, 2)
                  gdcResAdd.FieldByName("USR$SUMNDSNCU").AsCurrency = gs.MulDiv(gdcResAdd.FieldByName("USR$SUMNCU").AsCurrency / 100 * gdcResAdd.FieldByName("USR$NDS").AsCurrency, 1, 1, 1, 2)
                  gdcResAdd.Post
                  gdcResAdd.Next
                wend
                gdcResAdd.CloseOpen
              end if
              
              if Field.FieldName = "USR$DATEEND" then
                if gdcObject.FieldByName("USR$DATEEND").AsDateTime < gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime then
                  gdcObject.FieldByName("USR$COUNTNIGHT").AsInteger = 0
                else
                  gdcObject.FieldByName("USR$COUNTNIGHT").AsInteger = gdcObject.FieldByName("USR$DATEEND").AsDateTime - gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime
                end if
              end if
              if Field.FieldName = "USR$DATEEND" or Field.FieldName = "USR$DATEBEGIN" then
                call RefreshDateDetails(Sender.OwnerForm)
              end if
              ' добавлен расчет подоходного налога
              ' если гость уволен с др. организации
              if Sender.OwnerForm.GetComponent("usrg_Check_INCOMETAX").Checked then
                call San_UpdateTaxSum(gdcObject, 1)
              else
                call San_UpdateTaxSum(gdcObject, 0)
              end if
              dim ActualTarrifDocKey
              Dim qSel, HouseKey
              set Creator = new TCreator
              set qSel = Creator.GetObject(nil, "TIBSQL", "")
              qSel.Transaction = gdcBaseManager.ReadTransaction
              qSel.SQL.Text = _
                  "SELECT USR$HOUSINGKEY " & _
                  "FROM USR$HT_NUMBER " & _
                  "WHERE ID = :NUMBERKEY "
              qSel.ParamByName("NUMBERKEY").AsVariant = gdcObject.FieldByName("USR$NUMBERKEY").AsInteger
              qSel.ExecQuery
              HouseKey = qSel.FieldByName("USR$HOUSINGKEY").AsInteger
              dim ContactKey
              'если место продажи - Корпор. отдел
              if gdcObject.FieldByName("usr$permitsupplyoutlet").AsInteger = gdcBaseManager.GetIDByRUIDString("147406653_805992690") then
                qSel.Close
                qSel.SQL.Text = _
                    "SELECT USR$CONTACTKEY " & _
                    "FROM USR$SAN_REQUEST " & _
                    "WHERE DOCUMENTKEY = :REQUESTKEY "
                qSel.ParamByName("REQUESTKEY").AsInteger = gdcObject.FieldByName("USR$REQUESTKEY").AsInteger
                qSel.ExecQuery
                ContactKey = qSel.FieldByName("USR$CONTACTKEY").AsInteger
              else
                ContactKey = 0
              end if
              ActualTarrifDocKey = ht_GetActualTarrifDoc_PF(gdcObject.FieldByName("usr$tarriftypekey").AsInteger, _
                gdcObject.FieldByName("usr$clientcategorykey").AsInteger, _
                gdcObject.FieldByName("usr$datebegin").AsDateTime, null, _
                gdcObject.FieldByName("usr$type_permit").AsInteger, _
                gdcObject.FieldByName("usr$permitsupplyoutlet").AsInteger, ContactKey)
        
              Sender.OwnerForm.GetComponent("usrat_gsIBLookupComboBox_USR_TARIFKEY").Condition = "masterkey = " & ActualTarrifDocKey & _
                " and usr$numbertypekey = " &  gdcObject.FieldByName("usr$numbertypekey").AsInteger  & _
                " and usr$housekey = " & HouseKey
            case "USR$TOTALPARTSUM", "USR$DATEPAYRESORTTAX"
              if Sender.GetComponent("usrat_DBCheckBox_USR_RESORT_TAX").Checked then
                call UpdateTaxInfo(Sender.OwnerForm, 1)
              else
                call UpdateTaxInfo(Sender.OwnerForm, 0)
              end if
            case "USR$PERC_LOYALTY"
              dim qUp, DiscKey, OldDiscKey
              set Creator = new TCreator
              set qUp = Creator.getObject(null, "TIBSQL", "")
              qUp.Transaction = gdcObject.Transaction
              qUp.SQL.Text = _
                " SELECT r.ID, l.USR$REASONKEY " & _
                " FROM USR$HT_LOYALTY l " & _
                " LEFT JOIN USR$HT_RESERVDISCOUNT r ON r.USR$DISCOUNTKEY = l.USR$REASONKEY AND r.USR$RESERVATIONKEY = :ResKey " & _
                " WHERE l.USR$PERCENT = :perc "
              qUp.ParamByName("perc").AsCurrency = gdcObject.FieldByname("USR$PERC_LOYALTY").AsCurrency
              qUp.ParamByName("ResKey").AsInteger = gdcObject.ID
              qUp.ExecQuery
              DiscKey =  qUp.FieldByName("USR$REASONKEY").AsInteger
              if gdcObject.VariableExists("DiscKey") then
                OldDiscKey = gdcObject.Variables("DiscKey")
              end if
              gdcObject.Variables("DiscKey") = DiscKey
              if Sender.GetComponent("usrat_DBCheckBox_USR_CALCLOYALTYDISC").Checked then
                if DiscKey > 0 and qUp.FieldByName("ID").AsInteger = 0 then
                  if gdcObject.State = dsInsert then gdcObject.Post
                  qUp.Close
                  qUp.SQL.Text = _
                    " INSERT INTO USR$HT_RESERVDISCOUNT (USR$DISCOUNTKEY, USR$RESERVATIONKEY) " & _
                    " VALUES (:Disckey, :ResKey) "
                  qUp.ParamByName("ResKey").AsInteger = gdcObject.ID
                  qUp.ParamByName("Disckey").AsInteger = DiscKey
                  qUp.ExecQuery
                end if
              else
                'if OldDiscKey > 0 then
                  qUp.Close
                  qUp.SQL.Text = _
                    " DELETE FROM USR$HT_RESERVDISCOUNT " & _
                    " WHERE USR$RESERVATIONKEY = :ResKey AND USR$DISCOUNTKEY IN  " & _
                    " (SELECT l.USR$REASONKEY FROM USR$HT_LOYALTY l) "
                  qUp.ParamByName("ResKey").AsInteger = gdcObject.ID
                 ' qUp.ParamByName("DiscKey").AsInteger = OldDiscKey
                  qUp.ExecQuery
                'end if
              end if
              Sender.GetComponent("usrg_gdcResDisc").CloseOpen
          end select
        
        ' if Sender.GetComponent("usrg_Check_INCOMETAX").Checked then
        '    call San_UpdateTaxSum(gdcObject, 1)
        '  else
        '    call San_UpdateTaxSum(gdcObject, 0)
        '  end if
        
          ' Обновление не DB контроллов получающих данные из БО
          call UpdateNonDBDataControls(Sender)
        end sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147019959_279245339 UpdateTaxInfo"
          - 
            ADDFUNCTIONKEY: "147015620_1683050467 RefreshDateDetails"
          - 
            ADDFUNCTIONKEY: "150610980_326626869 San_UpdateTaxSum"
          - 
            ADDFUNCTIONKEY: "147152764_1752918391 UpdatePostingsGrid"
          - 
            ADDFUNCTIONKEY: "147152756_1752918391 UpdateNonDBDataControls"
          - 
            ADDFUNCTIONKEY: "147020015_1683050467 RefreshGuestInfo"
          - 
            ADDFUNCTIONKEY: "147403140_812279903 ht_GetActualTarrifDoc_PF"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147015621_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONSYNCFIELD"
      FUNCTIONKEY: "147015623_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnSyncField"
      OBJECTKEY: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: ~
      EDITIONDATE: 2020-11-11T11:40:22+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147129134_1705915908
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnShow"
      COMMENT: ~
      EVENT: "ONSHOW"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-11-13T09:46:55+03:00
      DISPLAYSCRIPT: | 
        GDC_DLGATTRUSERDEFINEDUSR_HT_RESERVATIONONSHOW
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        '#include ht_GetActualTarrifDoc_PF
        '#include UPDATENONDBDATACONTROLS
        '#include RES_SHOWNOTEMPTYPOSTINGS
        option explicit
        sub gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnShow(ByVal Sender)
          call   Inherited(Sender, "OnShow", Array(Sender))
        
          ' Отобразим только не пустые счета
          call RES_ShowNotEmptyPostings(Sender)
        
          dim typePermit
          set typePermit = Sender.GetComponent("usrat_gsIBLookupComboBox_USR_TYPE_PERMIT")
          dim documentDate
          documentDate = Sender.gdcObject.FieldByName("usr$datebegin").AsDateTime
          typePermit.Condition = "'" & DateValue(documentDate) & "'" & " between usr$datebegin and usr$dateend"
          dim ActualTarrifDocKey, gdcObject, PriceForPermit
          set gdcObject = Sender.gdcObject
          Dim qSel, HouseKey, Creator
          set Creator = new TCreator
          set qSel = Creator.GetObject(nil, "TIBSQL", "")
          qSel.Transaction = gdcBaseManager.ReadTransaction
          qSel.SQL.Text = _
            "SELECT USR$HOUSINGKEY " & _
            "FROM USR$HT_NUMBER " & _
            "WHERE ID = :NUMBERKEY "
          qSel.ParamByName("NUMBERKEY").AsVariant = gdcObject.FieldByName("USR$NUMBERKEY").AsInteger
          qSel.ExecQuery
          HouseKey = qSel.FieldByName("USR$HOUSINGKEY").AsInteger
          dim ContactKey
          'если место продажи - Корпор. отдел
          if gdcObject.FieldByName("usr$permitsupplyoutlet").AsInteger = gdcBaseManager.GetIDByRUIDString("147406653_805992690") then
            qSel.Close
            qSel.SQL.Text = _
                "SELECT USR$CONTACTKEY " & _
                "FROM USR$SAN_REQUEST " & _
                "WHERE DOCUMENTKEY = :REQUESTKEY "
            qSel.ParamByName("REQUESTKEY").AsInteger = gdcObject.FieldByName("USR$REQUESTKEY").AsInteger
            qSel.ExecQuery
            ContactKey = qSel.FieldByName("USR$CONTACTKEY").AsInteger
          else
            ContactKey = 0
          end if
          ActualTarrifDocKey = ht_GetActualTarrifDoc_PF(gdcObject.FieldByName("usr$tarriftypekey").AsInteger, _
              gdcObject.FieldByName("usr$clientcategorykey").AsInteger, _
              gdcObject.FieldByName("usr$datebegin").AsDateTime, null, _
              gdcObject.FieldByName("usr$type_permit").AsInteger, _
              gdcObject.FieldByName("usr$permitsupplyoutlet").AsInteger, ContactKey)
          Sender.GetComponent("usrat_gsIBLookupComboBox_USR_TARIFKEY").Condition = "masterkey = " & ActualTarrifDocKey & _
            " and usr$numbertypekey = " &  gdcObject.FieldByName("usr$numbertypekey").AsInteger & _
            " and usr$housekey = " & HouseKey
        
        
        '  Проверяем проведен ли ночной аудит и сообщаем пользователю если нет
        '  if (HT_Variables.LogicDate <> Date) and HT_Options.WarnLogicDateNotDate then
        '    call Application.MessageBox("Логическая дата отличается от текущей даты. Необходимо провести ночной аудит.", "Внимание", vbOKOnly or vbInformation or vbSystemModal)
        '  end if
        
          If Sender.gdcObject.State = dsInsert Then
            ' запрет переноса суммы подоходного налога из пред. путевки
            Sender.gdcObject.FieldByName("usr$incometax").AsVariant = Null
          '  Sender.gdcObject.FieldByName("usr$tarriftypekey").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$dayratesum").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$totalpartsum").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$dayratesumncu").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$sumncu").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$sumdiscount").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$sumdiscncu").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$percdiscount").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$perccommis").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$sumcommis").AsVariant = Null
            Sender.gdcObject.FieldByName("usr$sumall").AsVariant = Null
            if not IsNull(Sender.gdcObject.FieldByName("usr$contactkey").AsVariant) then
              Sender.gdcObject.FieldByName("usr$contactkey").AsVariant = _
                Sender.gdcObject.FieldByName("usr$contactkey").AsVariant 'чтобы запустить OnSyncField
            end if
            call UpdateNonDBDataControls(Sender)
          End if
        
        end sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147403140_812279903 ht_GetActualTarrifDoc_PF"
          - 
            ADDFUNCTIONKEY: "147152756_1752918391 UpdateNonDBDataControls"
          - 
            ADDFUNCTIONKEY: "147133961_1705915908 RES_ShowNotEmptyPostings"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147129132_1705915908
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONSHOW"
      FUNCTIONKEY: "147129134_1705915908 gdc_dlgAttrUserDefinedUSR_HT_RESERVATIONOnShow"
      OBJECTKEY: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: ~
      EDITIONDATE: 2017-11-13T09:39:41+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147408091_815437717
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$HTINVOICEKEY"
      FIELDSOURCE: "USR$GS_DDOCUMENT"
      FIELDSOURCEKEY: "147035010_9802323 Документ, USR$GS_DDOCUMENT"
      FORMAT: ~
      GDCLASSNAME: "TgdcDocument"
      GDSUBTYPE: ~
      LNAME: "Счет-фактура для гост. проживания"
      LSHORTNAME: "Счет для гост. прож."
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "NUMBER"
      REFRELATIONNAME: "GD_DOCUMENT"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-21T17:05:46+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147415389_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$MANUALPRICE"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Цена указывается вручную"
      LSHORTNAME: "Цена указывается вру"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-29T16:21:14+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147415417_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrat_DBCheckBox_USR_MANUALPRICEOnClick"
      COMMENT: ~
      EVENT: "ONCLICK"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-05-29T16:28:05+03:00
      DISPLAYSCRIPT: | 
        USRAT_DBCHECKBOX_USR_MANUALPRICEONCLICK
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        Option Explicit
        Sub usrat_DBCheckBox_USR_MANUALPRICEOnClick(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnClick", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          if Sender.Checked then
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").ReadOnly = false
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").Color = -2147483643
          else
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").ReadOnly = true
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_TOTALPARTSUM").Color = -2147483644
          end if
        End Sub
        
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147415414_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrat_DBCheckBox_USR_MANUALPRICE"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALPRICE"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-05-29T16:24:23+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147415415_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONCLICK"
      FUNCTIONKEY: "147415417_809241643 usrat_DBCheckBox_USR_MANUALPRICEOnClick"
      OBJECTKEY: "147415414_809241643 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrat_DBCheckBox_USR_MANUALPRICE"
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALPRICE"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-05-29T16:28:05+03:00
  - 
    Properties: 
      Class: "TgdcGenerator"
      RUID: 147416784_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      GENERATORNAME: "USR$SUN_G_RESERV_NUMBER"
      RDB$GENERATOR_ID: 27
      RDB$GENERATOR_NAME: "USR$SUN_G_RESERV_NUMBER        "
      EDITIONDATE: 2017-05-30T16:25:35+03:00
      RDB$DESCRIPTION: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147418085_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$MANUALCOMPERC"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "% ком. возн. вручную"
      LSHORTNAME: "% ком. возн. вручную"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-05-31T15:57:13+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147418092_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrat_DBCheckBox_USR_MANUALCOMPERCOnClick"
      COMMENT: ~
      EVENT: "ONCLICK"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-05-31T16:00:17+03:00
      DISPLAYSCRIPT: | 
        USRAT_DBCHECKBOX_USR_MANUALCOMPERCONCLICK
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        Option Explicit
        Sub usrat_DBCheckBox_USR_MANUALCOMPERCOnClick(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnClick", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          if Sender.Checked then
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").ReadOnly = false
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").Color = -2147483643
          else
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").ReadOnly = true
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_PERCCOMMIS").Color = -2147483644
          end if
        End Sub
        
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147418089_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrat_DBCheckBox_USR_MANUALCOMPERC"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALCOMPERC"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-05-31T16:00:17+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147418090_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONCLICK"
      FUNCTIONKEY: "147418092_809241643 usrat_DBCheckBox_USR_MANUALCOMPERCOnClick"
      OBJECTKEY: "147418089_809241643 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrat_DBCheckBox_USR_MANUALCOMPERC"
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALCOMPERC"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-05-31T16:00:17+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147423646_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$SUMALL"
      FIELDSOURCE: "DCURRENCY"
      FIELDSOURCEKEY: "147000131_486813904 Сумма, DCURRENCY"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Итоговая сумма"
      LSHORTNAME: "Итоговая сумма"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-06-27T12:42:20+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147423702_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$DAYRATERUR"
      FIELDSOURCE: "DCURRENCY"
      FIELDSOURCEKEY: "147000131_486813904 Сумма, DCURRENCY"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Стоимость за сутки в рос. р."
      LSHORTNAME: "Стоим. за сутки в рр"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-06-28T10:51:17+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147423744_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$DAYRATECUR"
      FIELDSOURCE: "DCURRENCY"
      FIELDSOURCEKEY: "147000131_486813904 Сумма, DCURRENCY"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Стоимость за сутки в вал. из протокола согл."
      LSHORTNAME: "Стоим. за сутки в ва"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-06-28T11:59:24+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147423850_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$SUMCUR"
      FIELDSOURCE: "DCURRENCY"
      FIELDSOURCEKEY: "147000131_486813904 Сумма, DCURRENCY"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Сумма в вал. из протокола согл."
      LSHORTNAME: "Сумма в вал. из прот"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-06-28T12:01:35+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcField"
      RUID: 147423876_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      CHARSET: ~
      COLLATION: ~
      COLWIDTH: 20
      DESCRIPTION: "Скидка для бронирования"
      FCHARLENGTH: ~
      FFIELDTYPE: 8
      FIELDNAME: "USR$HT_DISCOUNTTYPE"
      FLAG: ~
      FLENGTH: 4
      FORMAT: ~
      FPRECISION: 0
      FSCALE: 0
      FSUBTYPE: 0
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Скидка для бронирования"
      READONLY: 0
      REFCONDITION: ~
      REFLISTFIELD: "USR$PERCENT"
      REFLISTLNAME: "Процент скидки"
      REFLNAME: "Скидки"
      REFTABLE: "USR$HT_DISCOUNT"
      SEGLENGTH: ~
      SETCONDITION: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SETLISTLNAME: ~
      SETTABLE: ~
      SETTABLEKEY: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-11T11:02:11+03:00
      DISABLED: 0
      CHECKSOURCE: ~
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      NUMERATION: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147423875_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$DISCOUNTKEY"
      FIELDSOURCE: "USR$HT_DISCOUNTTYPE"
      FIELDSOURCEKEY: "147423876_809241643 Скидка для бронирования, USR$HT_DISCOUNTTYPE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Скидка для бронирования"
      LSHORTNAME: "Скидка"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$PERCENT"
      REFRELATIONNAME: "USR$HT_DISCOUNT"
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-06-28T14:47:48+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147425265_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Заезд после 24.00"
      FIELDNAME: "USR$ISLATEARRIVAL"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Заезд после 24.00"
      LSHORTNAME: "Заезд после 24.00"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-05T09:34:46+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147428797_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147275685_124484738 TgdcBase\\TgdcAttrUserDefined"
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      CLASSNAME: "TgdcAttrUserDefined"
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: ""
      OBJECTTYPE: 1
      REPORTGROUPKEY: ~
      SUBTYPE: "USR_HT_RESERVDISCOUNT"
      EDITIONDATE: 2017-07-11T11:26:33+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147428800_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTCheckSubSet"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147428797_809241643 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-07-11T11:27:51+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVDISCOUNTCHECKSUBSET
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RQUlNU
        BwAAAEFTVUJTRVQHAAAAQVNVQlNFVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNURkxQUg==
      SCRIPT: | 
        Option Explicit
        Function TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTCheckSubSet(Self, ASubSet)
        '*** Данный код необходим для вызова кода определенного в gdc-классе.***
        '*** При его удаления  возможно нарушение  правильной работы системы.***
          TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTCheckSubSet = _
            Inherited(Self, "CheckSubSet", Array(Self, ASubSet)) OR (ASubSet = "ByReservKey")
        '***               Конец кода поддержки gdc-класса.                  ***
        End Function
        
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147428798_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "CHECKSUBSET"
      FUNCTIONKEY: "147428800_809241643 TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTCheckSubSet"
      OBJECTKEY: "147428797_809241643 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2017-07-11T11:27:51+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147428803_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTGetWhereClause"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147428797_809241643 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-07-11T11:27:30+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVDISCOUNTGETWHERECLAUSE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        Option Explicit
        Function TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTGetWhereClause(Self)
        '*** Данный код необходим для вызова кода определенного в gdc-классе.***
        '*** При его удаления  возможно нарушение  правильной работы системы.***
          if Self.SubSet = "ByReservKey" then
            TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTGetWhereClause = _
               " WHERE z.usr$reservationkey = :documentkey "
          else
            TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTGetWhereClause =  _
               Inherited(Self, "GetWhereClause", Array(Self))
          end if
        '***               Конец кода поддержки gdc-класса.                  ***
        End Function
        
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147428801_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "GETWHERECLAUSE"
      FUNCTIONKEY: "147428803_809241643 TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNTGetWhereClause"
      OBJECTKEY: "147428797_809241643 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2017-07-11T11:27:30+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147428793_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrg_addDiscOnExecute"
      COMMENT: ~
      EVENT: "ONEXECUTE"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2019-08-20T10:16:52+03:00
      DISPLAYSCRIPT: | 
        USRG_ADDDISCONEXECUTE
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        Option Explicit
        Sub usrg_addDiscOnExecute(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnExecute", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          dim Creator, gdcObject, tr, ibsql, gdcDisc, s, frm, i, DOC, ID
        
          set Creator = New TCreator
          set gdcObject = Sender.Ownerform.gdcObject
          set tr = gdcObject.Transaction
        
          set gdcDisc = Creator.GetObject(null, "TgdcUserDocument", "")
          gdcDisc.Transaction = Tr
          gdcDisc.SubType = "147423712_809241643"
          gdcDisc.SubSet = "All"
          gdcDisc.SelectedId.Clear
          s = "'" & gdcObject.FieldByName("USR$DATEBEGIN").AsDateTime & "' BETWEEN COALESCE(USR$DATEBEGIN, CAST('01.01.1000' AS DATE)) AND COALESCE(USR$DATEEND, CAST('01.01.4000' AS DATE)) "
        
          set ibsql = creator.getObject(null, "TIBSQL", "")
          ibsql.Transaction = Tr
          if gdcObject.State = dsInsert then gdcObject.Post
          if gdcDisc.ChooseOrderItemsSelf(false, "", "", s) then
            ibsql.Close
            ibsql.SQL.Text = _
              "DELETE FROM USR$HT_RESERVDISCOUNT d  WHERE USR$RESERVATIONKEY = :RESERVKEY " & _
              "AND NOT EXISTS (SELECT l.ID FROM USR$HT_LOYALTY l WHERE l.USR$REASONKEY = d.USR$DISCOUNTKEY) "
            ibsql.ParamByName("RESERVKEY").AsInteger = gdcObject.ID
            ibsql.ExecQuery
        
            ibsql.Close
            ibsql.SQL.Text = _
              " INSERT INTO USR$HT_RESERVDISCOUNT (USR$DISCOUNTKEY, USR$RESERVATIONKEY) " + _
              " VALUES (:DISCOUNTKEY, :RESERVATIONKEY) "
        
            for i = 0 to gdcDisc.SelectedID.Count - 1
              ibsql.Close
              ibsql.ParamByName("DISCOUNTKEY").AsInteger = gdcDisc.SelectedID.Keys(i)
              ibsql.ParamByName("RESERVATIONKEY").AsInteger = gdcObject.ID
              ibsql.ExecQuery
            next
          end if
          Sender.OwnerForm.GetComponent("usrg_gdcResDisc").CloseOpen
          ibsql.Close
          ibsql.SQL.Text = _
            " SELECT SUM(d.USR$PERCENT) AS P " & _
            " FROM USR$HT_RESERVDISCOUNT r " & _
            " LEFT JOIN USR$HT_DISCOUNT d ON d.DOCUMENTKEY = r.USR$DISCOUNTKEY " & _
            " WHERE r.USR$RESERVATIONKEY = :RESERVKEY AND NOT EXISTS (SELECT l.ID FROM USR$HT_LOYALTY l WHERE l.USR$REASONKEY = r.USR$DISCOUNTKEY) "
          ibsql.ParamByName("RESERVKEY").AsInteger = gdcObject.ID
          ibsql.ExecQuery
          gdcObject.Edit
          gdcObject.FieldByName("USR$PERCDISCOUNT").AsCurrency = ibsql.FieldByName("P").AsCurrency
        End Sub
        
        
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147428790_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrg_addDisc"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrg_addDisc"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-07-11T11:12:15+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147428791_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONEXECUTE"
      FUNCTIONKEY: "147428793_809241643 usrg_addDiscOnExecute"
      OBJECTKEY: "147428790_809241643 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrg_addDisc"
      OBJECTNAME: "usrg_addDisc"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-11-15T13:57:43+03:00
  - 
    Properties: 
      Class: "TgdcPrimeTable"
      RUID: 147428781_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      BRANCHKEY: ~
      DESCRIPTION: "Скидки для бронирования"
      EXTENDEDFIELDS: ~
      LISTFIELD: ~
      LNAME: "Скидки для бронирования"
      LSHORTNAME: "Скидки для бронирования"
      REFERENCEKEY: ~
      RELATIONNAME: "USR$HT_RESERVDISCOUNT"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      EDITIONDATE: 2017-07-11T10:59:19+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147428784_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$RESERVATIONKEY"
      FIELDSOURCE: "USR$HT_D_RESERVATIONKEY"
      FIELDSOURCEKEY: "147015737_1683050467 Hotel. Документ бронирования, USR$HT_D_RESERVATIONKEY"
      FORMAT: ~
      GDCLASSNAME: "TgdcAttrUserDefined"
      GDSUBTYPE: "USR$HT_RESERVATION"
      LNAME: "Hotel. Документ бронирования"
      LSHORTNAME: "Hotel. Документ брон"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$NUMBER"
      REFRELATIONNAME: "USR$HT_RESERVATION"
      RELATIONKEY: "147428781_809241643 Скидки для бронирования, USR$HT_RESERVDISCOUNT"
      RELATIONNAME: "USR$HT_RESERVDISCOUNT"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-11T11:00:06+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcField"
      RUID: 147428786_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      CHARSET: ~
      COLLATION: ~
      COLWIDTH: 20
      DESCRIPTION: "Скидка (бронирование)"
      FCHARLENGTH: ~
      FFIELDTYPE: 8
      FIELDNAME: "USR$HT_DISCRESTYPE"
      FLAG: ~
      FLENGTH: 4
      FORMAT: ~
      FPRECISION: 0
      FSCALE: 0
      FSUBTYPE: 0
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Скидка (бронирование)"
      READONLY: 0
      REFCONDITION: ~
      REFLISTFIELD: "USR$REASON"
      REFLISTLNAME: "Основание"
      REFLNAME: "Скидки"
      REFTABLE: "USR$HT_DISCOUNT"
      SEGLENGTH: ~
      SETCONDITION: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SETLISTLNAME: ~
      SETTABLE: ~
      SETTABLEKEY: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-11T11:02:34+03:00
      DISABLED: 0
      CHECKSOURCE: ~
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      NUMERATION: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147428785_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: "RESTRICT"
      DESCRIPTION: ~
      FIELDNAME: "USR$DISCOUNTKEY"
      FIELDSOURCE: "USR$HT_DISCRESTYPE"
      FIELDSOURCEKEY: "147428786_809241643 Скидка (бронирование), USR$HT_DISCRESTYPE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Скидка для бронирования"
      LSHORTNAME: "Скидка для брони"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: "USR$REASON"
      REFRELATIONNAME: "USR$HT_DISCOUNT"
      RELATIONKEY: "147428781_809241643 Скидки для бронирования, USR$HT_RESERVDISCOUNT"
      RELATIONNAME: "USR$HT_RESERVDISCOUNT"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-11T11:01:44+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcReportGroup"
      RUID: 147428806_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "Отчеты(gdc_frmAttrUserDefinedUSR_HT_RESERVDISCOUNT)"
      DESCRIPTION: ~
      USERGROUPNAME: "147428806_809241643"
      EDITIONDATE: 2017-07-11T11:35:29+03:00
  - 
    Properties: 
      Class: "TgdcMacrosGroup"
      RUID: 147428805_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "Локальные макросы"
      CLASSNAME: ""
      ISGLOBAL: 0
      OBJECTNAME: "gdc_frmAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTPARENT: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-07-11T11:35:29+03:00
      DESCRIPTION: ~
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147428794_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: ~
      NAME: "gdc_frmAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: "147428805_809241643 Локальные макросы"
      OBJECTNAME: "gdc_frmAttrUserDefinedUSR_HT_RESERVDISCOUNT"
      OBJECTTYPE: 0
      REPORTGROUPKEY: "147428806_809241643 Отчеты(gdc_frmAttrUserDefinedUSR_HT_RESERVDISCOUNT)"
      SUBTYPE: ""
      EDITIONDATE: 2017-07-11T11:35:29+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147437252_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$MANUALDISCSUM"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Скидка вручную"
      LSHORTNAME: "Скидка вручную"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-07-20T15:18:53+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147437259_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrat_DBCheckBox_USR_MANUALDISCSUMOnClick"
      COMMENT: ~
      EVENT: "ONCLICK"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-07-20T16:29:51+03:00
      DISPLAYSCRIPT: | 
        USRAT_DBCHECKBOX_USR_MANUALDISCSUMONCLICK
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        Option Explicit
        Sub usrat_DBCheckBox_USR_MANUALDISCSUMOnClick(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnClick", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          if Sender.Checked then
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").ReadOnly = false
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").Color = -2147483643
          else
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").ReadOnly = true
            Sender.OwnerForm.GetComponent("usrat_DBEdit_USR_SUMDISCOUNT").Color = -2147483644
          end if
        End Sub
        
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147437256_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrat_DBCheckBox_USR_MANUALDISCSUM"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALDISCSUM"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-07-20T16:29:50+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147437257_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONCLICK"
      FUNCTIONKEY: "147437259_809241643 usrat_DBCheckBox_USR_MANUALDISCSUMOnClick"
      OBJECTKEY: "147437256_809241643 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrat_DBCheckBox_USR_MANUALDISCSUM"
      OBJECTNAME: "usrat_DBCheckBox_USR_MANUALDISCSUM"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-07-20T16:29:51+03:00
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147444450_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$ISEARLYDEP"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Выезд до 24.00"
      LSHORTNAME: "Выезд до 24.00"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-08-08T11:45:30+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147447578_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$PERC_LOYALTY"
      FIELDSOURCE: "DPERCENT"
      FIELDSOURCEKEY: "147000131_31587988 Процент, DPERCENT"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "% скидки по программе лояльности"
      LSHORTNAME: "% по лояльности"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-08-16T13:41:26+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147447626_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$CALCLOYALTYDISC"
      FIELDSOURCE: "DBOOLEAN"
      FIELDSOURCEKEY: "147000135_486813904 Логическое, DBOOLEAN"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Учитывать скидку по программе лояльности"
      LSHORTNAME: "Учитывать доп. скидк"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-08-17T10:08:00+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: | 
        DEFAULT '0'
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147447778_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrat_DBCheckBox_USR_CALCLOYALTYDISCOnClick"
      COMMENT: ~
      EVENT: "ONCLICK"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-12-11T13:40:07+03:00
      DISPLAYSCRIPT: | 
        USRAT_DBCHECKBOX_USR_CALCLOYALTYDISCONCLICK
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        Option Explicit
        Sub usrat_DBCheckBox_USR_CALCLOYALTYDISCOnClick(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnClick", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          dim gdcObject
          set gdcObject = Sender.OwnerForm.gdcObject
          if Sender.Checked then
            gdcObject.Edit
            gdcObject.FieldByName("USR$CALCLOYALTYDISC").AsInteger = 1
            gdcObject.FieldByName("USR$CONTACTKEY").AsVariant = gdcObject.FieldByName("USR$CONTACTKEY").AsVariant
          else
            gdcObject.Edit
            gdcObject.FieldByName("USR$PERC_LOYALTY").AsVariant = null
          end if
        End Sub
        
  - 
    Properties: 
      Class: "TgdcDelphiObject"
      RUID: 147447775_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      PARENT: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      NAME: "usrat_DBCheckBox_USR_CALCLOYALTYDISC"
      CLASSNAME: ""
      DESCRIPTION: ~
      MACROSGROUPKEY: ~
      OBJECTNAME: "usrat_DBCheckBox_USR_CALCLOYALTYDISC"
      OBJECTTYPE: 0
      REPORTGROUPKEY: ~
      SUBTYPE: ""
      EDITIONDATE: 2017-08-17T10:16:19+03:00
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147447776_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "ONCLICK"
      FUNCTIONKEY: "147447778_809241643 usrat_DBCheckBox_USR_CALCLOYALTYDISCOnClick"
      OBJECTKEY: "147447775_809241643 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION\\usrat_DBCheckBox_USR_CALCLOYALTYDISC"
      OBJECTNAME: "usrat_DBCheckBox_USR_CALCLOYALTYDISC"
      PARENTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      EDITIONDATE: 2017-12-11T12:44:06+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147447571_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "ht_getloyaltyperc"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "UNKNOWN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2019-07-23T14:40:19+03:00
      DISPLAYSCRIPT: | 
        HT_GETLOYALTYPERC
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QKAAAAQ09OVEFDVEtFWQoAAABDT05UQUNUS0VZAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAEZOU1RQUlNUCgAAAFJFUVVFU1RLRVkKAAAAUkVRVUVTVEtFWQAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAABGTlNUUFJTVAUAAABQREFURQUAAABQREFURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AABGTlNUUFJTVAsAAABUUkFOU0FDVElPTgsAAABUUkFOU0FDVElPTgAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAABGTlNURkxQUg==
      SCRIPT: | 
        Option Explicit
        Function ht_getloyaltyperc(ContactKey, RequestKey, pDate, Transaction)
          dim qSel, CountRes, Creator, Perc, OldCount
          set Creator = new TCreator
          'подсчитываем, сколько неотмененных путевок на текущую дату без исключенных типов путевок
          set qSel = Creator.GetObject(NULL, "TIBSQL", "")
          qSel.Transaction = Transaction
          qSel.SQL.Text = _
            "SELECT p.USR$OLDCOUNTVISITS " & _
            "FROM GD_PEOPLE p " & _
            "WHERE  p.CONTACTKEY = :ContactKey "
          qSel.ParamByName("ContactKey").AsInteger = ContactKey
          qSel.ExecQuery
          OldCount = qSel.FieldByName("USR$OLDCOUNTVISITS").AsCurrency
          qSel.Close
          qSel.SQL.Text = _
            "SELECT COUNT(DISTINCT res.USR$REQUESTKEY) AS CountRes " & _
            "FROM USR$HT_RESERVATION res " & _
            "LEFT JOIN USR$SAN_REQUESTLINE l ON res.ID = l.USR$RESERVATIONKEY " & _
            " JOIN USR$SAN_RESERVEDROOMPLACE rp  ON l.DOCUMENTKEY = rp.USR$REQUESTLINEKEY " & _
            "LEFT JOIN USR$SAN_PERMIT_TYPE t ON t.DOCUMENTKEY = res.USR$TYPE_PERMIT " & _
            "WHERE  res.USR$CONTACTKEY = :ContactKey " & _
            "  AND res.USR$STATEKEY NOT IN (:StateKey1) " & _
            "  AND res.USR$REQUESTKEY <> :dockey " & _
            "  AND COALESCE(t.USR$LOYALTY_EXC, 0) = 0 " & _
            "  AND res.USR$DATEBEGIN <= :pDate "
          qSel.ParamByName("dockey").AsInteger = RequestKey
          qSel.ParamByName("StateKey1").AsInteger = HT_ReservationStateDict.GetCanceledState.Key
          qSel.ParamByName("ContactKey").AsInteger = ContactKey
          qSel.ParamByName("pDate").AsDateTime = pDate
          qSel.ExecQuery
          CountRes = qSel.FieldByName("CountRes").AsInteger + 1 + OldCount
          qSel.Close
          qSel.SQL.Text = _
            "SELECT l.USR$PERCENT " & _
            "FROM USR$HT_LOYALTY l " & _
            "WHERE l.USR$Q_FROM <= :q  AND (l.USR$Q_TO >= :q OR COALESCE(l.USR$Q_TO, 0) = 0)"
          qSel.ParamByName("q").AsInteger = CountRes
          qSel.ExecQuery
          ht_getloyaltyperc = qSel.FieldByName("USR$PERCENT").AsCurrency
        End Function
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147020019_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "TgdcAttrUserDefinedUSR_HT_RESERVATIONDoFieldChange"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "METHOD"
      MODULECODE: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2021-07-05T13:28:06+03:00
      DISPLAYSCRIPT: | 
        TGDCATTRUSERDEFINEDUSR_HT_RESERVATIONDOFIELDCHANGE
        USR_HT_RESERVATIONDOFIELDCHANGE_GETCURRSUM
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QEAAAAU0VMRgQAAABTRUxGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RQUlNU
        BQAAAEZJRUxEBQAAAEZJRUxEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEZOU1RGTFBS
      SCRIPT: | 
        '#include HT_GETLOYALTYPERC
        '#include HLP_IIF
        '#include HT_GETROUNDTOVALUEBYCURRKEY
        '#include HT_GETNUMBERTYPECOUNTPLACE
        '#include HT_GETSERVICETARRIF
        '#include ht_GetActualTarrifDoc_PF
        option explicit
        sub TgdcAttrUserDefinedUSR_HT_RESERVATIONDoFieldChange(Self, Field)
          call Inherited(Self, "DoFieldChange", Array(Self, Field))
        
        
        
          dim NumberCountPlace, CurrKey, CurrFieldName, CurrRate, RurRate
          dim ResideCount, AddResidenceCount, AddPlaceCount, BreakFastGuestCount
          dim ResideCost, AddResidenceCost, AddPlaceCost, BreakFastCost
          dim Res, CostDiff, DayCount, ActualDayRate, ActualDayRatePart, ActualDayRatePartNcu
        
          dim PermitCost, PermitPartCost, YearCountOfPartPrice, NumberOfDays, PermitCostNcu, PermitPartCostNcu, PermitCostRur, PermitCostProt
          PermitPartCost = -1
          PermitPartCostNcu = - 1
          YearCountOfPartPrice = -1
          dim TarrifDate, ActualTarrifDocKey, ClientCategoryNotRez, CommisDate
          'Нерезидент
          ClientCategoryNotRez = gdcBaseManager.GetIDByRUIDString("147140069_779589892")
        
          Dim Creator, qPerc
          set Creator = new TCreator
        
          if not Self.VariableExists("ComPerc") then
            Self.AddVariableItem("ComPerc")
            Self.Variables("ComPerc") = 0
          end if
        
          select case Field.FieldName
        
          case "USR$TYPE_PERMIT"
            dim qSel
            set qSel = Creator.GetObject(nil, "TIBSQL", "")
            qSel.Transaction = gdcBaseManager.ReadTransaction
            qSel.SQL.Text = _
              " SELECT USR$PERIOD " & _
              " FROM USR$SAN_PERMIT_TYPE " & _
              " WHERE DOCUMENTKEY = :typekey "
            qSel.ParamByName("typekey").AsInteger = Field.AsInteger
            qSel.ExecQuery
            Self.FieldByName("USR$COUNTNIGHT").AsInteger = qSel.FieldByName("USR$PERIOD").AsInteger
            'если гост. проживание и кол-во дней больше 1, то кур сбор не рассчитываем
            if Self.FieldByName("USR$COUNTNIGHT").AsInteger = 1 and _
              Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289")  then
              Self.FieldByName("USR$RESORT_TAX").AsInteger = 0
            else
              Self.FieldByName("USR$RESORT_TAX").AsInteger = 1
            end if
            Self.FieldByName("USR$CONTACTKEY").AsInteger = Self.FieldByName("USR$CONTACTKEY").AsInteger
        
          case "USR$COUNTNIGHT"
            'если гост. проживание и кол-во дней больше 1, то кур сбор не рассчитываем
            if Self.FieldByName("USR$COUNTNIGHT").AsInteger = 1 and _
              Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289")  then
              Self.FieldByName("USR$RESORT_TAX").AsInteger = 0
            else
              Self.FieldByName("USR$RESORT_TAX").AsInteger = 1
            end if
            Self.FieldByName("USR$CONTACTKEY").AsInteger = Self.FieldByName("USR$CONTACTKEY").AsInteger
          case "USR$DATEPAY"
            'если нерезидент - дата оплаты может быть максимум до даты заезда
            if Self.FieldByName("usr$clientcategorykey").AsInteger = ClientCategoryNotRez then
              if Self.FieldByName("USR$DATEPAY").AsDateTime > Self.FieldByName("USR$DATEBEGIN").AsDateTime then
                call Application.MessageBox("Дата оплаты для нерезидента не может быть больше даты заезда!","Внимание", _
                    vbOkOnly + vbInformation)
                Self.FieldByName("USR$DATEPAY").AsDateTime = Self.FieldByName("USR$DATEBEGIN").AsDateTime
              end if
            end if
            Self.FieldByName("USR$DATEBEGIN").AsVariant = Self.FieldByName("USR$DATEBEGIN").AsVariant
          case "USR$ROOMPLACEKEY"
            dim qAdd
            set qAdd = Creator.GetObject(nil, "TIBSQL", "")
            qAdd.Transaction = gdcBaseManager.ReadTransaction
            qAdd.SQL.Text = _
                "    SELECT COALESCE(p.USR$ISADDITIONAL, 0) AS IsAdd " & _
                "    FROM  USR$HT_ROOMPLACE p " & _
                "    WHERE p.ID = :PlaceKey "
            qAdd.ParamByName("PlaceKey").AsInteger = Self.FieldByName("USR$ROOMPLACEKEY").AsInteger
            qAdd.ExecQuery
            Self.FieldByName("USR$ISADDITIONALPLACE").AsInteger = _
              qAdd.FieldByName("IsAdd").AsInteger
        
          case "USR$NUMBERKEY"
            if  Self.FieldByName("USR$NUMBERTYPEKEY").IsNull then
              dim qHouseType
              set qHouseType = Creator.GetObject(nil, "TIBSQL", "")
              qHouseType.Transaction = gdcBaseManager.ReadTransaction
              qHouseType.SQL.Text = _
                "SELECT USR$HOUSINGKEY , USR$TYPEKEY " & _
                "FROM USR$HT_NUMBER " & _
                "WHERE ID = :NUMBERKEY "
              qHouseType.ParamByName("NUMBERKEY").AsVariant = Self.FieldByName("USR$NUMBERKEY").AsInteger
              qHouseType.ExecQuery
        
              Self.FieldByName("USR$NUMBERTYPEKEY").AsVariant = _
                qHouseType.FieldByName("USR$TYPEKEY").AsVariant
            end if
        
          case "USR$DATEBEGIN", "USR$DATEEND", "USR$TARRIFTYPEKEY", "USR$NUMBERTYPEKEY", "USR$COUNT_ADULT", _
               "USR$USECREATIONDATEFORCOST", "USR$CURRKEY", "USR$CLIENTCATEGORYKEY", "USR$CREATIONDATE", _
               "USR$PERCDISCOUNT", "USR$ISADDITIONALPLACE", "USR$PERMITSUPPLYOUTLET", "USR$MANUALPRICE", _
               "USR$MANUALCOMPERC", "USR$PERCCOMMIS", "USR$MANUALDISCSUM", "USR$PERC_LOYALTY"
        
        
            if Self.FieldByName("USR$DATEPAYRESORTTAX").IsNull and not Self.FieldByName("USR$DATEBEGIN").IsNull then
              Self.FieldByName("USR$DATEPAYRESORTTAX").AsDateTime = Self.FieldByName("USR$DATEBEGIN").AsDateTime
            end if
        
            if IsNull(Self.FieldByName("USR$DATEBEGINFACT").AsVariant) and Field.FieldName = "USR$DATEBEGIN" then
              Self.FieldByName("USR$DATEBEGINFACT").AsVariant = Self.FieldByName("USR$DATEBEGIN").AsVariant
            end if
        
            if Self.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
             'если цена вручную для гост проживания, то цена за день = сумма\кол-во дней
              if Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289") _
                and Self.FieldByName("USR$COUNTNIGHT").AsCurrency > 0 then
                Self.FieldByName("USR$DAYRATENCU").AsCurrency = Round(Self.FieldByName("USR$TOTALPARTSUM").AsCurrency/ _
                  Self.FieldByName("USR$COUNTNIGHT").AsInteger, 2)
              end if
            end if
        
            if Field.FieldName = "USR$MANUALDISCSUM" and Self.FieldByName("USR$MANUALDISCSUM").AsInteger = 1 and _
              Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289") then
              Self.FieldByName("USR$SUMDISCNCU").AsCurrency = Self.FieldByName("USR$SUMDISCOUNT").AsCurrency
            end if
        
            ' если заполнены не все нужные для расчета стоимости поля, то пишем в сумму "0"
            ' для ускорения загрузки
            if IsNull(Self.FieldByName("USR$DATEBEGIN").AsVariant) or _
                IsNull(Self.FieldByName("USR$DATEEND").AsVariant) or _
                IsNull(Self.FieldByName("USR$TARRIFTYPEKEY").AsVariant) or _
                IsNull(Self.FieldByName("USR$NUMBERTYPEKEY").AsVariant) or _
                IsNull(Self.FieldByName("USR$COUNT_ADULT").AsVariant) or _
                IsNull(Self.FieldByName("USR$USECREATIONDATEFORCOST").AsVariant) or _
                IsNull(Self.FieldByName("USR$CURRKEY").AsVariant) or _
                IsNull(Self.FieldByName("USR$CLIENTCATEGORYKEY").AsVariant) or _
                IsNull(Self.FieldByName("USR$PERMITSUPPLYOUTLET").AsVariant) or _
                Self.Variables("ComPerc") = 1 then
              exit sub
            end if
        
        
            ' Кол-ва мест, проживаний, доп. проживаний, доп. мест и завтраков
            NumberCountPlace = ht_GetNumberTypeCountPlace(Self.FieldByName("usr$numbertypekey").AsInteger)
        
            ResideCount = 1
            AddResidenceCount = Math.Min(NumberCountPlace - ResideCount, Self.FieldByName("usr$count_adult").AsInteger - ResideCount)
            AddPlaceCount = Math.Max(0, Self.FieldByName("usr$count_adult").AsInteger - NumberCountPlace)
            BreakFastGuestCount = ResideCount + AddResidenceCount + AddPlaceCount
        
            dim qInfo, ProtocolCurrKey, ClientCategoryKey, TarrifDateInv
            set qInfo = Creator.GetObject(nil, "TIBSQL", "")
             if Self.Transaction.InTransaction then
              qInfo.Transaction = Self.Transaction
            else
              qInfo.Transaction = Self.ReadTransaction
            end if
        
            ClientCategoryKey = Self.FieldByName("usr$clientcategorykey").AsInteger
        
            qInfo.Close
            qInfo.SQL.Text = _
              "SELECT inv.DOCUMENTKEY, doc.DOCUMENTDATE " & _
              "FROM USR$SAN_INVOICE inv " & _
              "LEFT JOIN GD_DOCUMENT doc ON doc.ID = inv.DOCUMENTKEY " & _
              "WHERE inv.DOCUMENTKEY IN " & _
              " ( SELECT INV.DOCUMENTKEY " & _
              "   FROM USR$HT_RESERVATION RES " & _
              "   LEFT JOIN USR$SAN_INVOICE INV ON (INV.USR$CONTROCCKEY = RES.USR$CONTROCCKEY OR INV.USR$REQUESTKEY = RES.USR$REQUESTKEY ) " & _
              "   WHERE RES.USR$REQUESTKEY = :REQUESTKEY AND RES.ID = :RESERVATIONKEY AND COALESCE(inv.USR$CANCELED, 0) = 0) "
            qInfo.ParamByName("REQUESTKEY").AsInteger = Self.FieldByName("USR$REQUESTKEY").AsInteger
            qInfo.ParamByName("RESERVATIONKEY").AsInteger = Self.ID
            qInfo.ExecQuery
            if not qInfo.eof then
              ' курс берем на дату счет-фактуры
              TarrifDate = qInfo.FieldByName("DOCUMENTDATE").AsDateTime
              CommisDate = qInfo.FieldByName("DOCUMENTDATE").AsDateTime
            else
              ' курс берем на дату заезда
              TarrifDate = Self.FieldByName("USR$CREATIONDATE").AsDateTime
            end if
            TarrifDateInv = TarrifDate
        
            qInfo.Close
            qInfo.SQL.Text = _
              " SELECT USR$TYPEPRICEKEY, USR$TARRIFGROUPKEY " & _
              " FROM USR$SAN_PERMIT_TYPE " & _
              " WHERE DOCUMENTKEY = :typekey "
            qInfo.ParamByName("typekey").AsInteger = Self.FieldByName("USR$TYPE_PERMIT").AsInteger
            qInfo.ExecQuery
            TypePriceKey = qInfo.FieldByName("USR$TYPEPRICEKEY").AsInteger
            TariffGroupKey = qInfo.FieldByName("USR$TARRIFGROUPKEY").AsInteger
        
            ' Cтоимости проживания, доп. проживания, доп. места и завтрака
            ' закоментировано и добавлен расчёт только за путёвку для Санатория
            'ResideCost = USR_HT_RESERVATIONDoFieldChange_GetCurrSum(_
            '  ActualTarrifDocKey, HT_Options.ResidenceServiceKey, Self.FieldByName("usr$numbertypekey").AsInteger, CurrKey, CurrRate, Self.Transaction)
            'BreakFastCost = USR_HT_RESERVATIONDoFieldChange_GetCurrSum(_
            '  ActualTarrifDocKey, HT_Options.BreakFastServiceKey, Self.FieldByName("usr$numbertypekey").AsInteger, CurrKey, CurrRate, Self.Transaction)
            'если нерезидент, то находим стоимость путевки в рос. рублях и переводим в нужную валюту
            dim isadditionalplace
            dim GuestCount, TypePriceKey, TariffTypeKey, JoinPrice, ServType, TariffGroupKey
            qInfo.Close
            qInfo.SQL.Text = _
              "SELECT COUNT(DISTINCT l.DOCUMENTKEY) AS C " & _
              "FROM USR$SAN_REQUESTLINE l  " & _
              "  LEFT JOIN USR$HT_RESERVATION res ON res.ID = l.USR$RESERVATIONKEY " & _
              "  LEFT JOIN USR$HT_ROOMPLACE pl ON pl.ID = l.USR$PLACEKEY " & _
              "WHERE l.USR$ROOMKEY = :ROOMKEY AND l.MASTERKEY = :MKEY " & _
              "  AND (res.USR$STATEKEY <> :CANCELKEY OR res.ID IS NULL)  " & _
              "  /*AND  res.ID <> :RESERVKEY*/ AND res.USR$CONTACTKEY <> COALESCE((SELECT r.USR$CONTACTKEY FROM USR$HT_RESERVATION r WHERE r.ID = :RESERVKEY), 0) " & _
              "  AND COALESCE(pl.USR$ISADDITIONAL, 0) = 0 "
            qInfo.ParamByName("ROOMKEY").AsInteger = Self.FieldByName("USR$NUMBERKEY").AsInteger
            qInfo.ParamByName("MKEY").AsInteger = Self.FieldByName("USR$REQUESTKEY").AsInteger
            qInfo.ParamByName("CANCELKEY").AsInteger = HT_ReservationStateDict.GetCanceledState.Key
            qInfo.ParamByName("RESERVKEY").AsInteger = Self.ID
            qInfo.ExecQuery
            GuestCount = qInfo.FieldByName("C").AsInteger + 1
        
        
            TariffTypeKey = Self.FieldByName("usr$tarriftypekey").AsInteger
            ServType = (Self.FieldByName("usr$isadditionalplace").AsInteger=0)
        
            'если цена за проживание
            if TypePriceKey = gdcBaseManager.GetIDByRUIDString("147405905_809241643") then
              'Всегда для проживания смотрим цену для взрослых резидент РБ
              TariffTypeKey = gdcBaseManager.GetIDByRUIDString("147022576_704999368")
              ClientCategoryKey = gdcBaseManager.GetIDByRUIDString("147022384_704999368")
            end if
        
            dim ContactKey, ReqContactKey
            qInfo.Close
            qInfo.SQL.Text = _
                "SELECT USR$CONTACTKEY, doc.DOCUMENTDATE " & _
                "FROM USR$SAN_REQUEST " & _
                "LEFT JOIN GD_DOCUMENT doc ON doc.ID = DOCUMENTKEY " & _
                "WHERE DOCUMENTKEY = :REQUESTKEY "
            qInfo.ParamByName("REQUESTKEY").AsInteger = Self.FieldByName("USR$REQUESTKEY").AsInteger
            qInfo.ExecQuery
            ContactKey = qInfo.FieldByName("USR$CONTACTKEY").AsInteger
            ReqContactKey =  qInfo.FieldByName("USR$CONTACTKEY").AsInteger
            'если место продажи - Корпор. отдел
            if Self.FieldByName("usr$permitsupplyoutlet").AsInteger <> gdcBaseManager.GetIDByRUIDString("147406653_805992690") then
              ContactKey = 0
            end if
            'если нет счет-фактуры, берем дату создания заявки для расчета процента комиссии
          ''  if commisDate = "" then
              commisDate = Self.FieldByName("USR$CREATIONDATE").AsDateTime
          ''  end if
        
            ActualTarrifDocKey = ht_GetActualTarrifDoc_PF(TariffTypeKey, _
              ClientCategoryKey, Self.FieldByName("USR$DATEBEGIN").AsDateTime, _
              null, Self.FieldByName("usr$type_permit").AsInteger, _
              Self.FieldByName("usr$permitsupplyoutlet").AsInteger, ContactKey)
        
            qInfo.Close
            qInfo.SQL.Text = _
              "SELECT l.USR$DATE, c.USR$CURRKEY, cur.SHORTNAME " & _
              "FROM USR$HT_PROTOCOLPRICE c " & _
              "LEFT JOIN USR$HT_PROTOCOLPRICELINE l On l.MASTERKEY = c.DOCUMENTKEY " & _
              " JOIN USR$HT_PROTOCOLLINETARIFF t On t.USR$PROTOCOLLINEKEY = l.DOCUMENTKEY AND t.USR$TARIFFKEY = :tariffkey " & _
              "LEFT JOIN GD_CONTACT con ON con.ID = c.USR$CONTACTKEY " & _
              "LEFT JOIN GD_CURR cur ON cur.ID = c.USR$CURRKEY " & _
              "WHERE c.USR$CONTACTKEY = :contactkey " & _
              "  AND COALESCE(c.USR$CANCELED, 0) = 0 " & _
              "ORDER BY 1 DESC "
            qInfo.ParamByName("contactkey").AsInteger = ReqContactKey
            qInfo.ParamByName("tariffkey").AsInteger = ActualTarrifDocKey
            qInfo.ExecQuery
            if not qInfo.eof then
              ' курс берем на дату протокола
              TarrifDate = qInfo.FieldByName("USR$DATE").AsDateTime
              ProtocolCurrKey = qInfo.FieldByName("USR$CURRKEY").AsInteger
              if (ProtocolCurrKey <> Self.FieldByName("usr$currkey").AsInteger and _
                Self.FieldByName("usr$currkey").AsInteger <> CURRKEY_BYR and _
                Self.FieldByName("usr$currkey").AsInteger <> CURRKEY_RUR) then
                call Application.MessageBox("Валюта оплаты не совпадает с валютой по протоколу согласования!" & vbCr & _
                  "Для расчета будет использована валюта - " & qInfo.FieldByName("SHORTNAME").AsString & "!","Внимание", _
                  vbOkOnly + vbInformation)
                Self.FieldByName("usr$currkey").AsInteger = ProtocolCurrKey
              end if
            end if
            'Валюта оплаты
            CurrKey = Self.FieldByName("usr$currkey").AsInteger
            CurrRate = inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, CurrKey)
            RurRate = inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, CURRKEY_RUR)
           ' Self.FieldByName("USR$DATECURR").AsDateTime = TarrifDate
        
            if Self.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
              'если нерезидент
              if Self.FieldByName("usr$clientcategorykey").AsInteger = ClientCategoryNotRez and CurrKey <> CURRKEY_BYR then
                if CurrKey = CURRKEY_RUR then
                  Self.FieldByName("USR$SUMRUR").AsCurrency = Self.FieldByName("USR$SUMALL").AsCurrency
                else
                  Self.FieldByName("USR$SUMRUR").AsCurrency = gs.MulDiv(Self.FieldByName("USR$SUMALL").AsCurrency*CurrRate/RurRate, 1, 1, 1, 2)
                end if
             '   Self.FieldByName("USR$SUMNCU").AsCurrency = gs.MulDiv(Self.FieldByName("USR$SUMALL").AsCurrency*CurrRate, 1, 1, 1, 2)
              else
                Self.FieldByName("USR$SUMRUR").AsCurrency = 0
              end if
            end if
        
            if Self.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
              exit sub
            end if
        
        
            select case CurrKey
            case CURRKEY_USD
              CurrFieldName = "usd"
            case CURRKEY_EUR
              CurrFieldName = "eur"
            case CURRKEY_RUR
              CurrFieldName = "rur"
            case else
              CurrFieldName = "ncu"
            end select
            DayCount = DateDiff("d", Self.FieldByName("usr$datebegin").AsDateTime, _
                Self.FieldByName("usr$dateend").AsDateTime)
        
            JoinPrice = 0
            'если ребенок, то цена зависит от доп места, если не доп место, то всегда берется основная цена
            if TariffTypeKey = gdcBaseManager.GetIDByRUIDString("147140156_779589892") then
              JoinPrice = 0
              'isadditionalplace = (Self.FieldByName("usr$isadditionalplace").AsInteger=0)
            else
              'если взрослый
              'если кол-во отдыхающих в заявке 1, то из тарифа берется цена за одноместное размещение,
              'если кол-во отдыхающих больше 1, то из тарифа берется цена за 2-местное размещение
              if GuestCount = 1 then
                JoinPrice = 0
                ServType = true
              else
                if Self.FieldByName("usr$isadditionalplace").AsInteger = 0 then
                  JoinPrice = 1
                end if
              end if
            end if
            dim qHouse, HouseKey, PercDisc, PermitCostWODisc, PermitCostWODiscNcu
            set qHouse = Creator.GetObject(nil, "TIBSQL", "")
            qHouse.Transaction = gdcBaseManager.ReadTransaction
            qHouse.SQL.Text = _
              "SELECT USR$HOUSINGKEY " & _
              "FROM USR$HT_NUMBER " & _
              "WHERE ID = :NUMBERKEY "
            qHouse.ParamByName("NUMBERKEY").AsVariant = Self.FieldByName("USR$NUMBERKEY").AsInteger
            qHouse.ExecQuery
            HouseKey = qHouse.FieldByName("USR$HOUSINGKEY").AsInteger
        
            if Self.FieldByName("USR$MANUALDISCSUM").AsInteger = 0 then
              PercDisc = (100-Self.FieldByName("USR$PERCDISCOUNT").AsCurrency-Self.FieldByName("USR$PERC_LOYALTY").AsCurrency)/100
            else
              PercDisc = 1
            end if
            if ClientCategoryKey = ClientCategoryNotRez then
               PermitCost = USR_HT_RESERVATIONDoFieldChange_GetCurrSum(_
                ActualTarrifDocKey, hlp_iif(ServType, _
                  HT_Options.PermitServiceKey, HT_Options.PermitAddPlaceServiceKey),_
                   Self.FieldByName("usr$numbertypekey").AsInteger, CURRKEY_RUR, 0, Self.Transaction,_
                   PermitPartCost, YearCountOfPartPrice, NumberOfDays, HouseKey, JoinPrice)
               'Цена со скидкой в рр
               PermitCostRur =  gs.MulDiv(PercDisc, PermitCost, 1, 1, 2)
               'Цена без скидки в бр
               PermitCostNcu = PermitCost*RurRate
        
              'по согласлованию цен
              'могут отплачивать
              'в рос руб, тогда просто по прайсу
              'в долларах, если согласовали в долларах по курсу на дату согласования
              'в евро, если согласовали в евро на дату согласование
              'и в белках, перевод сначала в белки из рос руб по курсу на дату согласования, потом в валюту согласования на дату согласования и потом в белки на дату выставления счета из валюты согласования
        
               'Если валюта протокола не бел р, а валюта оплаты - бел р, то берем курс вал из протокола
               if CurrKey = CURRKEY_BYR and ProtocolCurrKey > 0 and ProtocolCurrKey <> CurrKey then
                 'Цена без скидки в вал. протокола согл. на дату согл.
                 if inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, ProtocolCurrKey) <> 0 then
                   PermitCost = PermitCostNcu/inv_CurrencyInfo.GetCurrToNCURate(TarrifDate, ProtocolCurrKey)
                 else
                   PermitCost = 0
                   call Application.MessageBox("В справочнике Курсы валют не задан курс на дату протокола!","Внимание", _
                    vbOkOnly + vbInformation)
                 end if
                 PermitCostProt = PermitCost
                 'Цена без скидки в бр на дату счет фактуры
                 PermitCostNcu = PermitCost*inv_CurrencyInfo.GetCurrToNCURate(TarrifDateInv, ProtocolCurrKey)
               end if
        
               if CurrKey <> CURRKEY_RUR and CurrRate <> 0 then
                 'Цена без скидки в вал оплаты
                 if ProtocolCurrKey > 0 and  CurrKey <> CURRKEY_BYR then
                   PermitCost = Round(PermitCost*Round(RurRate/CurrRate, 5), 2)
                 else
                   PermitCost = PermitCostNcu/CurrRate
                 end if
               end if
               'Цена без скидки в вал
               PermitCostWODisc = gs.MulDiv(PermitCost, 1, 1, 1, 2)
               'Цена без скидки в бр
               PermitCostWODiscNcu = gs.MulDiv(PermitCostNcu, 1, 1, 1, 2)
               'Цена со скидкой в вал
               PermitCost = gs.MulDiv(PercDisc, PermitCost, 1, 1, 2)
               'Цена со скидкой в бр
               PermitCostNcu = gs.MulDiv(PercDisc, PermitCostNcu, 1, 1, 2)
               'Цена со скидкой в бр
               PermitCostProt = gs.MulDiv(PercDisc, PermitCostProt, 1, 1, 2)
            else
              ' добавлена проверка доп. ли это место ,  gdcBaseManager.GetIDByRUIDString("147399626_809241643")
              PermitCost = USR_HT_RESERVATIONDoFieldChange_GetCurrSum(_
                ActualTarrifDocKey, hlp_iif(ServType, _
                  HT_Options.PermitServiceKey, _
                  HT_Options.PermitAddPlaceServiceKey),_
                   Self.FieldByName("usr$numbertypekey").AsInteger, _
                   HLP_IIF(CurrKey <> CURRKEY_BYR, CURRKEY_BYR, CurrKey), _
                   CurrRate, _
                   Self.Transaction,_
                   PermitPartCost, YearCountOfPartPrice, NumberOfDays, HouseKey, JoinPrice)
        
               'Если цена в бел рублях для резидента, но оплачивают в валюте
               if CurrKey <> CURRKEY_BYR and CurrRate <> 0 then
                 PermitCostNcu = PermitCost
                 'Переведем цену в бел. рублях в валюту
                 PermitCost = PermitCostNcu/CurrRate
        
                 'Цена без скидки в вал
                 PermitCostWODisc = gs.MulDiv(PermitCost, 1, 1, 1, 2)
                 'Цена без скидки в BYN
                 PermitCostWODiscNcu = PermitCostNcu
                 PermitCost = gs.MulDiv(PercDisc, PermitCost, 1, 1, 2)
                 PermitCostNcu = gs.MulDiv(PercDisc, PermitCostNcu, 1, 1, 2)
               else
                 'Цена без скидки в вал
                 PermitCostWODisc = PermitCost
                 'Цена без скидки в BYN
                 PermitCostWODiscNcu = PermitCost
                 PermitCost = gs.MulDiv(PercDisc, PermitCost, 1, 1, 2)
                 PermitCostNcu = PermitCost
               end if
            end if
            'если цена за всю путевку
            if TypePriceKey = gdcBaseManager.GetIDByRUIDString("147405907_809241643") then
              DayCount = 1
            end if
            ' Общая цена путевки за день
            ActualDayRate = _
              ResideCount * ResideCost + _
              AddResidenceCount * AddResidenceCost + _
              AddPlaceCount * AddPlaceCost + _
              BreakFastGuestCount * BreakFastCost + _
              PermitCost
        
            ' В документ ht_reservation будем вносить стоимость за всё проживание (так будет удобнее)
            PermitCost = ActualDayRate * DayCount
            Self.FieldByName("usr$dayratesum").AsCurrency = PermitCost
            Self.FieldByName("usr$dayratesumncu").AsCurrency = PermitCostNcu * DayCount
            ' добавлена ст-ть за сутки, т.к. потом в запросах не округлим
            Self.FieldByName("usr$dayrate").AsCurrency = ActualDayRate
            Self.FieldByName("usr$dayratencu").AsCurrency = PermitCostNcu
            Self.FieldByName("usr$dayratecur").AsCurrency = PermitCostProt
        
            '------------------Расчет скидок
            set qPerc = Creator.GetObject(nil, "TIBSQL", "")
            if Self.Transaction.InTransaction then
              qPerc.Transaction = Self.Transaction
            else
              qPerc.Transaction = Self.ReadTransaction
            end if
            qPerc.SQL.Text = _
              "SELECT MAX(l.USR$PERCENT) AS PERC, con.USR$SUBTRACTCOMMIS " & _
              "FROM USR$SAN_COMMISREM c " & _
              "LEFT JOIN USR$SAN_COMMISREMLINE l On l.MASTERKEY = c.DOCUMENTKEY " & _
              "LEFT JOIN GD_CONTACT con ON con.ID = c.USR$CLIENTKEY " & _
              "WHERE c.USR$CLIENTKEY = :contactkey " & _
              "  AND :pDate between l.USR$DATEBEGIN and COALESCE(l.USR$DATEEND, :pDate) " & _
              "GROUP BY con.USR$SUBTRACTCOMMIS "
            qPerc.ParamByName("pDate").AsDateTime = CommisDate
            qPerc.ParamByName("contactkey").AsInteger = ReqContactKey
            qPerc.ExecQuery
            Self.Variables("ComPerc") = 1
            if qPerc.FieldByName("PERC").AsCurrency > 0 or Self.FieldByName("USR$MANUALCOMPERC").AsInteger = 1 then
              if Self.FieldByName("USR$MANUALCOMPERC").AsInteger = 0  then
                Self.FieldByName("USR$PERCCOMMIS").AsCurrency = qPerc.FieldByName("PERC").AsCurrency
              end if
              Self.FieldByName("USR$SUMCOMMIS").AsCurrency =  Math.RoundToValue(Self.FieldByName("USR$DAYRATE").AsCurrency * _
                Self.FieldByName("USR$PERCCOMMIS").AsCurrency / 100 * DayCount, ht_GetRoundToValueByCurrKey(CURRKEY_BYR))
            else
              Self.FieldByName("USR$PERCCOMMIS").AsVariant = null
              Self.FieldByName("USR$SUMCOMMIS").AsVariant = null
            end if
            Self.Variables("ComPerc") = 0
            if Self.FieldByName("USR$MANUALDISCSUM").AsInteger = 0 then
              if Self.FieldByName("USR$PERCDISCOUNT").AsCurrency = 0 and Self.FieldByName("USR$PERC_LOYALTY").AsCurrency = 0 then
                Self.FieldByName("USR$SUMDISCOUNT").AsVariant = null
                Self.FieldByName("USR$SUMDISCNCU").AsVariant = null
              else
                Self.FieldByName("USR$SUMDISCOUNT").AsCurrency =  Math.RoundToValue((PermitCostWODisc - Self.FieldByName("USR$DAYRATE").AsCurrency) * DayCount, _
                  ht_GetRoundToValueByCurrKey(CurrKey))
                Self.FieldByName("USR$SUMDISCNCU").AsCurrency =  Math.RoundToValue((PermitCostWODiscNcu - Self.FieldByName("USR$DAYRATENCU").AsCurrency) * DayCount, _
                  ht_GetRoundToValueByCurrKey(CURRKEY_BYR))
              end if
            end if
            'частичн. стоимость
            Dim TotalPartSum, TotalPartSumNcu
              TotalPartSum = _
                Self.FieldByName("usr$dayratesum").AsCurrency
              TotalPartSumNcu = _
                Self.FieldByName("usr$dayratesumncu").AsCurrency
              ActualDayRatePart = ActualDayRate
              'Сумма с учетом скидки и скидки комиссионеров
              Self.FieldByName("USR$TOTALPARTSUM").AsCurrency = _
                Math.RoundToValue(TotalPartSum, ht_GetRoundToValueByCurrKey(CurrKey))
              'Сумма в бел.р.
              Self.FieldByName("USR$SUMNCU").AsCurrency = _
                Math.RoundToValue(TotalPartSumNcu, ht_GetRoundToValueByCurrKey(CURRKEY_BYR))
        '      Self.FieldByName("USR$SUMNCU").AsCurrency = _
        '        Math.RoundToValue(TotalPartSumNcu, ht_GetRoundToValueByCurrKey(CURRKEY_BYR))
        
              Self.FieldByName("USR$DAYRATEPART").AsCurrency = _
                ActualDayRatePart
              Self.FieldByName("USR$PARTPRICEDAYNUMBER").AsInteger = 0
        '    end if
        
            Self.FieldByName("USR$SUMALL").AsCurrency = Self.FieldByName("USR$TOTALPARTSUM").AsCurrency
            if qPerc.FieldByName("USR$SUBTRACTCOMMIS").AsInteger = 1 then
              Self.FieldByName("USR$SUMALL").AsCurrency = Self.FieldByName("USR$SUMALL").AsCurrency - _
                Self.FieldByName("USR$SUMCOMMIS").AsCurrency
            end if
        
            'если нерезидент
            if Self.FieldByName("usr$clientcategorykey").AsInteger = ClientCategoryNotRez then
              Self.FieldByName("USR$SUMRUR").AsCurrency = Math.RoundToValue(PermitCostRur * DayCount, ht_GetRoundToValueByCurrKey(CURRKEY_RUR))
              Self.FieldByName("USR$DAYRATERUR").AsCurrency = PermitCostRur
            else
              Self.FieldByName("USR$SUMRUR").AsCurrency = 0
            end if
        
           ' Self.FieldByName("USR$SUMNCU").AsCurrency = Self.FieldByName("USR$TOTALPARTSUM").AsCurrency*CurrRate
            ' если это бронирование путевки, делаем обязательным поле подтверждения брони
            case "USR$TOTALPARTSUM"
              set qPerc = Creator.GetObject(nil, "TIBSQL", "")
              if Self.Transaction.InTransaction then
                qPerc.Transaction = Self.Transaction
              else
                qPerc.Transaction = Self.ReadTransaction
              end if
              qPerc.Close
              qPerc.SQL.Text = _
                "SELECT MAX(l.USR$PERCENT) AS PERC, con.USR$SUBTRACTCOMMIS " & _
                "FROM USR$SAN_COMMISREM c " & _
                "LEFT JOIN USR$SAN_COMMISREMLINE l On l.MASTERKEY = c.DOCUMENTKEY " & _
                "LEFT JOIN GD_CONTACT con ON con.ID = c.USR$CLIENTKEY " & _
                "WHERE c.USR$CLIENTKEY = (SELECT USR$CONTACTKEY FROM USR$SAN_REQUEST WHERE DOCUMENTKEY = :REQUESTKEY) " & _
                "  AND :pDate between l.USR$DATEBEGIN and COALESCE(l.USR$DATEEND, :pDate) " & _
                "GROUP BY con.USR$SUBTRACTCOMMIS "
              qPerc.ParamByName("pDate").AsDateTime = Self.FieldByName("USR$CREATIONDATE").AsDateTime
              qPerc.ParamByName("REQUESTKEY").AsInteger = Self.FieldByName("USR$REQUESTKEY").AsInteger
              qPerc.ExecQuery
              Self.FieldByName("USR$SUMALL").AsCurrency = Self.FieldByName("USR$TOTALPARTSUM").AsCurrency
              if Self.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
                Self.FieldByName("USR$SUMCOMMIS").AsCurrency =  Math.RoundToValue(Self.FieldByName("USR$TOTALPARTSUM").AsCurrency * _
                  Self.FieldByName("USR$PERCCOMMIS").AsCurrency / 100, 0.01)
              end if
              if qPerc.FieldByName("USR$SUBTRACTCOMMIS").AsInteger = 1 then
                Self.FieldByName("USR$SUMALL").AsCurrency = Self.FieldByName("USR$SUMALL").AsCurrency - _
                  Self.FieldByName("USR$SUMCOMMIS").AsCurrency
              end if
              Self.FieldByName("USR$SUMNCU").AsCurrency = _
                Math.RoundToValue(Self.FieldByName("usr$dayratesumncu").AsCurrency, ht_GetRoundToValueByCurrKey(CURRKEY_BYR))
              'если цена вручную для гост проживания, то цена за день = сумма\кол-во дней
              if Self.FieldByName("USR$MANUALPRICE").AsInteger = 1 then
                Self.FieldByName("USR$COUNTNIGHT").AsInteger = Self.FieldByName("USR$COUNTNIGHT").AsInteger
                if Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289") _
                  and Self.FieldByName("USR$COUNTNIGHT").AsCurrency > 0 then
                  Self.FieldByName("USR$DAYRATENCU").AsCurrency = Round(Self.FieldByName("USR$TOTALPARTSUM").AsCurrency/ _
                    Self.FieldByName("USR$COUNTNIGHT").AsInteger, 2)
                end if
              end if
            case  "USR$SUMDISCOUNT"
              if Self.FieldByName("USR$MANUALDISCSUM").AsInteger = 1 and _
                Self.FieldByName("USR$TYPE_PERMIT").AsInteger = gdcBaseManager.GetIDByRUIDString("147406748_820098289") then
                Self.FieldByName("USR$SUMDISCNCU").AsCurrency = Self.FieldByName("USR$SUMDISCOUNT").AsCurrency
              end if
        
            case "USR$STATEKEY"
              if Self.FieldByName("USR$STATEKEY").AsInteger = _
                  HT_ReservationStateDict.GetPermitBookingState.Key then
                Self.FieldByName("usr$confirmreservdate").Required = True
                ' если это бронь, не заполняем подразделение выдачи путевки
                Self.FieldByName("usr$permitsupplyoutlet").AsVariant = null
        
        '        ' Номер подтверждения
        '       if Self.FieldByName("usr$number").IsNull then
        '         Self.FieldByName("usr$number").AsString = HT_Variables.GetNextReservationNumber
        '       end if
        
              elseif Self.FieldByName("USR$STATEKEY").AsInteger = _
                  HT_ReservationStateDict.GetNewState.Key then
                Self.FieldByName("usr$tarriftypekey").Required = True
                ' если это выписка, делаем обязательным поле места реализации
                Self.FieldByName("usr$permitsupplyoutlet").Required = True
                ' обязательное поле для заполнения Категория отдыхающего
                Self.FieldByName("usr$clientcategorykey").Required = True
        
        '        if Self.FieldByName("usr$number").IsNull then
        '          Self.FieldByName("usr$number").AsString = HT_Variables.GetNextPermitNumber
        '        end if
              ' досрочный выезд
              elseif Self.FieldByName("USR$STATEKEY").AsInteger = _
                  gdcBaseManager.GetIDByRUIDString("147491476_809241643") then
                Self.FieldByName("USR$MANUALPRICE").AsInteger = 1
                Self.FieldByName("USR$MANUALCOMPERC").AsInteger = 1
                Self.FieldByName("USR$MANUALDISCSUM").AsInteger = 1
           '   ' заселен, то устанавливаем Состояние номера - грязный
        '      elseif Self.FieldByName("USR$STATEKEY").AsInteger = _
        '          gdcBaseManager.GetIDByRUIDString("147020053_1683050467") then
        '        Self.FieldByName("USR$STATENUMBERKEY").AsInteger = gdcBaseManager.GetIDByRUIDString("147014395_1683050467")
              end if
        
            ' добавлено поле-ссылка на заезд
            case "USR$RACEKEY"
              Dim ibsql
              set ibsql = Creator.GetObject(nil, "TIBSQL", "")
              ibsql.Transaction = gdcBaseManager.ReadTransaction
              ibsql.Close
        
              ibsql.Close
              ibsql.SQL.Text = _
                  "SELECT usr$datefrom as f, usr$dateto as t " & _
                  "FROM " & _
                  "  usr$san_race r " & _
                  "WHERE " & _
                  "  r.id = :racekey "
              ibsql.ParamByName("racekey").AsVariant = Field.CurValue
              ibsql.ExecQuery
              Self.FieldByName("usr$datebegin").AsDateTime = ibsql.FieldByName("f").AsDate
              Self.FieldByName("usr$dateend").AsDateTime = ibsql.FieldByName("t").AsDate
        
            case "USR$CONTACTKEY"
              Dim qUpdateCont
              set qUpdateCont = Creator.GetObject(nil, "TIBSQL", "")
              qUpdateCont.Transaction = gdcBaseManager.ReadTransaction
              qUpdateCont.SQL.Text = _
                  "update USR$SAN_MEDICAL_HISTORY MED " & _
                  "set MED.USR$CONTACTKEY = :CONTACT " & _
                  "where MED.DOCUMENTKEY = :DOCKEY "
              qUpdateCont.ParamByName("CONTACT").AsVariant = Field.CurValue
              qUpdateCont.ParamByName("DOCKEY").AsInteger = Field.Dataset.FieldByName("ID").AsInteger
              qUpdateCont.ExecQuery
        
              dim qBirthDay
              set qBirthDay = Creator.GetObject(nil, "TIBSQL", "")
              qBirthDay.Transaction = gdcBaseManager.ReadTransaction
              qBirthDay.SQL.Text = _
                " SELECT age.FULLYEARAGE " & _
                " FROM GD_PEOPLE p " & _
                " LEFT JOIN usr$san_p_fullage(p.birthday,:DB) age ON 1 = 1 " & _
                " WHERE p.CONTACTKEY = :contactkey "
              qBirthDay.ParamByName("DB").AsDateTime = Self.FieldByName("USR$DATEBEGIN").AsDateTime
              qBirthDay.ParamByName("contactkey").AsInteger = Self.FieldByName("USR$CONTACTKEY").AsInteger
              qBirthDay.ExecQuery
              if qBirthDay.FieldByName("FULLYEARAGE").AsInteger < 18 then
                Self.FieldByName("USR$RESORT_TAX").AsInteger = 0
              else
                Self.FieldByName("USR$RESORT_TAX").AsInteger = 1
              end if
        
              dim qSelExc
              set qSelExc = Creator.GetObject(nil, "TIBSQL", "")
              qSelExc.Transaction = gdcBaseManager.ReadTransaction
              qSelExc.SQL.Text = _
                " SELECT USR$LOYALTY_EXC " & _
                " FROM USR$SAN_PERMIT_TYPE " & _
                " WHERE DOCUMENTKEY = :typekey "
              qSelExc.ParamByName("typekey").AsInteger = Self.FieldByName("USR$TYPE_PERMIT").AsInteger
              qSelExc.ExecQuery
        
              dim PercLoyalty
              'если не гост. проживание
              if qSelExc.FieldByName("USR$LOYALTY_EXC").AsInteger = 0 and _
                Self.FieldByName("USR$CALCLOYALTYDISC").AsInteger = 1 then
                PercLoyalty = ht_getloyaltyperc(Self.FieldByName("USR$CONTACTKEY").AsInteger, Self.FieldByName("USR$REQUESTKEY").AsInteger, _
                  Self.FieldByName("USR$DATEBEGIN").AsDateTime, Self.Transaction)
              else
                PercLoyalty = 0
              end if
              'процент скидки по программе лояльности
              if PercLoyalty = 0 then
                Self.FieldByName("USR$PERC_LOYALTY").AsVariant = null
              else
                Self.FieldByName("USR$PERC_LOYALTY").AsCurrency = PercLoyalty
              end if
          end select
        end sub
        
        ' добавлено значение по ссылке Частичная стоимость
        function USR_HT_RESERVATIONDoFieldChange_GetCurrSum(ByVal ActualTarrifDocKey, ByVal ServiceKey, _
          ByVal NumberTypeKey, ByVal CurrKey, ByVal CurrRate, ByVal Tr, ByRef PartCost, ByRef YearCount, _
          ByRef NumberOfDays, HouseKey, JoinPrice)
        dim Result, CurrFieldName
        
          select case CurrKey & JoinPrice
          case CURRKEY_USD & 0
            CurrFieldName = "usd"
          case CURRKEY_EUR & 0
            CurrFieldName = "eur"
          case CURRKEY_RUR & 0
            CurrFieldName = "rur"
          case CURRKEY_BYR & 0
            CurrFieldName = "ncu"
          case CURRKEY_USD & 1
            CurrFieldName = "usd_join"
          case CURRKEY_EUR & 1
            CurrFieldName = "eur_join"
          case CURRKEY_RUR & 1
            CurrFieldName = "rur_join"
          case CURRKEY_BYR & 1
            CurrFieldName = "ncu_join"
          case else
            CurrFieldName = "ncu"
          end select
          Result = ht_GetServiceTarrif(ActualTarrifDocKey, ServiceKey, NumberTypeKey, CurrFieldName, Tr, _
            PartCost, YearCount, NumberOfDays, HouseKey)
        
          USR_HT_RESERVATIONDoFieldChange_GetCurrSum = Result
        end function
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147447571_809241643 ht_getloyaltyperc"
          - 
            ADDFUNCTIONKEY: "147012896_1661751803 hlp_iif"
          - 
            ADDFUNCTIONKEY: "147152799_1752918391 ht_GetRoundToValueByCurrKey"
          - 
            ADDFUNCTIONKEY: "147022980_1705915908 ht_GetNumberTypeCountPlace"
          - 
            ADDFUNCTIONKEY: "147012271_1661751803 ht_GetServiceTarrif"
          - 
            ADDFUNCTIONKEY: "147403140_812279903 ht_GetActualTarrifDoc_PF"
  - 
    Properties: 
      Class: "TgdcEvent"
      RUID: 147020017_1683050467
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      DISABLE: 0
      EVENTNAME: "DOFIELDCHANGE"
      FUNCTIONKEY: "147020019_1683050467 TgdcAttrUserDefinedUSR_HT_RESERVATIONDoFieldChange"
      OBJECTKEY: "147015609_1683050467 TgdcBase\\TgdcAttrUserDefined\\TgdcAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "TgdcAttrUserDefinedUSR_HT_RESERVATION"
      PARENTNAME: "TgdcAttrUserDefined"
      EDITIONDATE: 2021-07-05T13:28:06+03:00
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147447283_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "usrat_DBCheckBox_USR_RESORT_TAXOnClick"
      COMMENT: ~
      EVENT: "ONCLICK"
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "EVENTS"
      MODULECODE: "147015597_1683050467 gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OBJECTNAME: "gdc_dlgAttrUserDefinedUSR_HT_RESERVATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2017-08-24T12:52:29+03:00
      DISPLAYSCRIPT: | 
        USRAT_DBCHECKBOX_USR_RESORT_TAXONCLICK
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAU0VOREVSBgAAAFNFTkRFUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        RkxQUg==
      SCRIPT: | 
        '#include USRG_ACTRESORTTAXONEXECUTE
        Option Explicit
        Sub usrat_DBCheckBox_USR_RESORT_TAXOnClick(ByVal Sender)
        '*** Данный код необходим для вызова встроенного обработчика ***
        '*** В случае его удаления возможно нарушение работы системы ***
          Call   Inherited(Sender, "OnClick", Array(Sender))
        '*** конец кода поддержки встроенного обработчика            ***
          call usrg_actResortTaxOnExecute (Sender)
        End Sub
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147019970_279245339 usrg_actResortTaxOnExecute"
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147448212_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: ~
      FIELDNAME: "USR$DATEBEGINFACT"
      FIELDSOURCE: "DDATE"
      FIELDSOURCEKEY: "147000160_486813904 Дата, DDATE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Факт. дата заезда"
      LSHORTNAME: "Факт. дата заезда"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-08-24T17:40:34+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147491479_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Дата выезда (план)"
      FIELDNAME: "USR$DATEENDPLANNED"
      FIELDSOURCE: "DDATE"
      FIELDSOURCEKEY: "147000160_486813904 Дата, DDATE"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Дата выезда (план)"
      LSHORTNAME: "Дата выезда (план)"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: ~
      VISIBLE: 1
      EDITIONDATE: 2017-11-21T21:21:24+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~
  - 
    Properties: 
      Class: "TgdcTableField"
      RUID: 147493363_809241643
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      ALIGNMENT: "L"
      COLWIDTH: 20
      CROSSFIELD: ~
      CROSSFIELDKEY: ~
      CROSSTABLE: ~
      CROSSTABLEKEY: ~
      DELETERULE: ~
      DESCRIPTION: "Комментарий к кур. сбору"
      FIELDNAME: "USR$COMMENTTAX"
      FIELDSOURCE: "DTEXT180"
      FIELDSOURCEKEY: "147000116_31587988 Текст (180), DTEXT180"
      FORMAT: ~
      GDCLASSNAME: ~
      GDSUBTYPE: ~
      LNAME: "Комментарий"
      LSHORTNAME: "Комментарий"
      NULLFLAG: ~
      READONLY: 0
      REFCROSSRELATION: ~
      REFLISTFIELD: ~
      REFRELATIONNAME: ~
      RELATIONKEY: "147015430_1683050467 Бронирование, USR$HT_RESERVATION"
      RELATIONNAME: "USR$HT_RESERVATION"
      RELATIONTYPE: "T"
      SEMCATEGORY: ~
      SETLISTFIELD: ~
      SETLISTFIELDKEY: ~
      SOURCENULLFLAG: ~
      STRINGLENGTH: 180
      VISIBLE: 1
      EDITIONDATE: 2017-12-12T11:03:32+03:00
      COMPUTED_VALUE: ~
      DEFSOURCE: ~
      OBJECTS: ~