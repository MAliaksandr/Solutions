%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 157498176_1627051006
  Name: "30. Движение готовой продукции (Отчет)"
  Caption: "30. Движение готовой продукции (Отчет)"
  Version: "1.0.0.1"
  Optional: False
  Internal: True
  MD5: 13B738FD0BCC9994A41B32EB85DCF1C7
Uses: 
  - "147067874_311980179 GS new. Общепит бэк. Исследователь"
  - "147978914_215642201 Торговля - evt_object"
Objects: 
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 157490807_1627051006
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 157490753_1627051006
    Fields: 
      NAME: "Движение готовой продукции. Общепит"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR4"
      EDITIONDATE: 2021-05-06T19:19:26+03:00
      TEMPLATEDATA: | 
        <?xml version="1.0" encoding="utf-8"?>
        <Tgs_fr4SingleReport Version="4.15.13" DotMatrixReport="False" IniFile="\Software\Fast Reports" PreviewOptions.Buttons="4095" PreviewOptions.Zoom="1" PrintOptions.Printer="По умолчанию" PrintOptions.PrintOnSheet="0" ReportOptions.CreateDate="44322,7180323843" ReportOptions.Description.Text="" ReportOptions.LastChange="44322,7180323843" ScriptLanguage="PascalScript" ScriptText.Text="begin&#13;&#10;&#13;&#10;end." PropData="08446174617365747301010C1C00000020446174615365743D22512220446174615365744E616D653D22512200010C2400000020446174615365743D225449544C452220446174615365744E616D653D225449544C45220000095661726961626C65730100055374796C650100">
          <TfrxDataPage Name="Data" Height="1000" Left="0" Top="0" Width="1000"/>
          <TfrxReportPage Name="Page1" Orientation="poLandscape" PaperWidth="297" PaperHeight="210" PaperSize="9" LeftMargin="10" RightMargin="10" TopMargin="10" BottomMargin="10" ColumnWidth="0" ColumnPositions.Text="" HGuides.Text="" VGuides.Text="">
            <TfrxReportTitle Name="ReportTitle1" Height="68,03154" Left="0" Top="18,89765" Width="1046,92981">
              <TfrxMemoView Name="Memo1" Left="3,77953" Top="3,77953" Width="1043,15028" Height="60,47248" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-16" Font.Name="Arial" Font.Style="1" HAlign="haCenter" ParentFont="False" Text="Р”РІРёР¶РµРЅРёРµ РіРѕС‚РѕРІРѕР№ РїСЂРѕРґСѓРєС†РёРё Р·Р° РїРµСЂРёРѕРґ&#13;&#10;СЃ [DATESTR(&#60;TITLE.&#34;Db&#34;&#62;)] РїРѕ [DATESTR(&#60;TITLE.&#34;De&#34;&#62;)] &#13;&#10;РїРѕ РїРѕРґСЂР°Р·РґРµР»РµРЅРёСЋ [TITLE.&#34;Dept&#34;]"/>
            </TfrxReportTitle>
            <TfrxHeader Name="Header1" Height="52,91342" Left="0" Top="147,40167" Width="1046,92981">
              <TfrxMemoView Name="Memo2" Left="0" Top="0" Width="226,7718" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РќР°РёРјРµРЅРѕРІР°РЅРёРµ"/>
              <TfrxMemoView Name="Memo3" Left="226,7718" Top="0" Width="37,7953" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Р•Рґ. РёР·Рј."/>
              <TfrxMemoView Name="Memo4" Left="264,5671" Top="0" Width="37,7953" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Р’РµСЃ РµРґ."/>
              <TfrxMemoView Name="Memo5" Left="302,3624" Top="0" Width="56,69295" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Р¦РµРЅР° РїРѕ РєР°Р»СЊРє."/>
              <TfrxMemoView Name="Memo6" Left="359,05535" Top="0" Width="56,69295" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РЎРµР±РµСЃС‚РѕРёРјРѕСЃС‚СЊ"/>
              <TfrxMemoView Name="Memo7" Left="415,7483" Top="0" Width="211,65368" Height="18,89765" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РџСЂРѕРёР·РІРµРґРµРЅРѕ"/>
              <TfrxMemoView Name="Memo8" Left="415,7483" Top="18,89765" Width="60,47248" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РљРѕР»-РІРѕ, РµРґ."/>
              <TfrxMemoView Name="Memo9" Left="476,22078" Top="18,89765" Width="71,81107" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РћР±С‰РµР№ РјР°СЃСЃРѕР№, РєРі"/>
              <TfrxMemoView Name="Memo10" Left="548,03185" Top="18,89765" Width="79,37013" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РЎС‚РѕРёРјРѕСЃС‚СЊ, СЂСѓР±.РєРѕРї."/>
              <TfrxMemoView Name="Memo11" Left="627,40198" Top="0" Width="381,73253" Height="18,89765" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РћС‚РіСЂСѓР¶РµРЅРѕ"/>
              <TfrxMemoView Name="Memo12" Left="627,40198" Top="18,89765" Width="56,69295" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РљРѕР»-РІРѕ, РµРґ."/>
              <TfrxMemoView Name="Memo13" Left="684,09493" Top="18,89765" Width="71,81107" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РћР±С‰РµР№ РјР°СЃСЃРѕР№, РєРі"/>
              <TfrxMemoView Name="Memo14" Left="755,906" Top="18,89765" Width="79,37013" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РЎС‚РѕРёРјРѕСЃС‚СЊ, СЂСѓР±.РєРѕРї."/>
              <TfrxMemoView Name="Memo15" Left="835,27613" Top="18,89765" Width="113,3859" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РЎ СѓС‡РµС‚РѕРј СЃРєРёРґРєРё, СЂСѓР±.РєРѕРї."/>
              <TfrxMemoView Name="Memo29" Left="948,66203" Top="18,89765" Width="60,47248" Height="34,01577" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="РЎРєРёРґРєР°, СЂСѓР±.РєРѕРї."/>
            </TfrxHeader>
            <TfrxMasterData Name="MasterData1" Height="18,89765" Left="0" Top="222,99227" Width="1046,92981" ColumnWidth="0" ColumnGap="0" DataSet="Q" DataSetName="Q" RowCount="0" Stretched="True">
              <TfrxMemoView Name="Memo16" Left="0" Top="0" Width="226,7718" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="GOODNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;GOODNAME&#34;]"/>
              <TfrxMemoView Name="Memo17" Left="226,7718" Top="0" Width="37,7953" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="VNAME" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;VNAME&#34;]"/>
              <TfrxMemoView Name="Memo18" Left="264,5671" Top="0" Width="37,7953" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="USR$INV_WEIGHT" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;USR$INV_WEIGHT&#34;]"/>
              <TfrxMemoView Name="Memo19" Left="302,3624" Top="0" Width="56,69295" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="COST" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;COST&#34;]"/>
              <TfrxMemoView Name="Memo20" Left="359,05535" Top="0" Width="56,69295" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="ACCCOST" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;ACCCOST&#34;]"/>
              <TfrxMemoView Name="Memo21" Left="415,7483" Top="0" Width="60,47248" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="IN_Q" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;IN_Q&#34;]"/>
              <TfrxMemoView Name="Memo22" Left="476,22078" Top="0" Width="71,81107" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="IN_WEIGTH" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;IN_WEIGTH&#34;]"/>
              <TfrxMemoView Name="Memo23" Left="548,03185" Top="0" Width="79,37013" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="IN_SUM" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;IN_SUM&#34;]"/>
              <TfrxMemoView Name="Memo24" Left="627,40198" Top="0" Width="56,69295" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="OUT_Q" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;OUT_Q&#34;]"/>
              <TfrxMemoView Name="Memo25" Left="684,09493" Top="0" Width="71,81107" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="OUT_WEIGTH" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;OUT_WEIGTH&#34;]"/>
              <TfrxMemoView Name="Memo26" Left="755,906" Top="0" Width="79,37013" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="OUT_SUM" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;OUT_SUM&#34;]"/>
              <TfrxMemoView Name="Memo27" Left="835,27613" Top="0" Width="113,3859" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" DataField="OUT_SUMWDISC" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[Q.&#34;OUT_SUMWDISC&#34;]"/>
              <TfrxMemoView Name="Memo30" Left="948,66203" Top="0" Width="60,47248" Height="18,89765" ShowHint="False" StretchMode="smMaxHeight" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[&#60;Q.&#34;OUT_SUM&#34;&#62;-&#60;Q.&#34;OUT_SUMWDISC&#34;&#62;]"/>
            </TfrxMasterData>
            <TfrxFooter Name="Footer1" Height="18,89765" Left="0" Top="264,5671" Width="1046,92981">
              <TfrxMemoView Name="Memo28" Left="0" Top="0" Width="415,7483" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="РРўРћР“Рћ:"/>
              <TfrxMemoView Name="Memo33" Left="415,7483" Top="0" Width="60,47248" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;IN_Q&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo34" Left="476,22078" Top="0" Width="71,81107" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;IN_WEIGTH&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo35" Left="548,03185" Top="0" Width="79,37013" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;IN_SUM&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo36" Left="627,40198" Top="0" Width="56,69295" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;OUT_Q&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo37" Left="684,09493" Top="0" Width="71,81107" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;OUT_WEIGTH&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo38" Left="755,906" Top="0" Width="79,37013" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;OUT_SUM&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo39" Left="835,27613" Top="0" Width="113,3859" Height="18,89765" ShowHint="False" DataSet="Q" DataSetName="Q" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;OUT_SUMWDISC&#34;&#62;,MasterData1)]"/>
              <TfrxMemoView Name="Memo31" Left="948,66203" Top="0" Width="60,47248" Height="18,89765" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[SUM(&#60;Q.&#34;OUT_SUM&#34;&#62;-&#60;Q.&#34;OUT_SUMWDISC&#34;&#62;,MasterData1)]"/>
            </TfrxFooter>
          </TfrxReportPage>
        </Tgs_fr4SingleReport>
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 157490754_1627051006
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 157490753_1627051006
    Fields: 
      NAME: "rp_Main157490754_1627051006"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2021-05-06T19:19:35+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN157490754_1627051006
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAUEVSSU9EBgAAAM/l8Oju5AAAAAAAAAAAAAAAAAwAAAAAAAAAAAIAAABeUkZO
        U1RQUlNUAwAAAERFUA0AAADP7uTw4Ofk5evl7ejlDgAAAGdkX2NvbnRhY3QgZ2cxBAAAAG5hbWUC
        AAAAaWQHpwAAACJnZzEuY29udGFjdHR5cGUgPSA0IGFuZCBFWElTVFMgKFNFTEVDVCBjb24uaWQg
        RlJPTSBnZF9jb250YWN0IGNvbiB3aGVyZSBjb24ubGIgPCBnZzEubGIgYW5kIGNvbi5yYiA+Z2cx
        LnJiIGFuZCBjb24uaWQgPTxSVUlEIHhpZD0iIjE0NzY3MzYwOCIiIGRiaWQ9IiIxNTg1MDk4ODIw
        IiIvPikiCAAAAFZCU2NyaXB0AgAAAF5BRk5TVEZMUFI=
      SCRIPT: | 
        Option Explicit
        Function rp_Main157490754_1627051006(period, dep)
          BaseQueryList.Clear
        
          
          Dim q
          Set q = BaseQueryList.Query(BaseQueryList.Add("q", 0))
          q.SQL = "SELECT " & _
            "mm.CALCCARDKEY, " & _
            "mm.GOODKEY, " & _
            "g.NAME as GOODNAME, v. NAME as VNAME, " & _
            "cc.USR$COSTCOURCE as COST, " & _
            "cc.USR$ACCCOSTCARD as ACCCOST, "  & _
            "g.USR$INV_WEIGHT, " & _
            "cdoc.DOCUMENTDATE, " & _
            "cdoc.NUMBER || ' от ' || cast(cdoc.DOCUMENTDATE as varchar(12)) as calcdoc, " & _
            "mm.DEPOTKEY, " & _
            "DEP.NAME as DEPNAME, "  & _
            "SUM(mm.in_Q) as in_Q, " & _
            "SUM(mm.in_Q *g.USR$INV_WEIGHT) as in_WEIGTH, " & _
            "SUM(ROUND(mm.in_SUM,2)) as in_SUM, " & _
            "SUM(mm.out_q) as out_q, " & _
            "SUM(mm.out_q *g.USR$INV_WEIGHT) as out_WEIGTH, " & _
            "SUM(ROUND(mm.out_SUM,2)) as out_SUM, " & _
            "SUM(mm.out_sumwDisc) as out_sumwDisc " & _
            " " & _
            "FROM ( " & _
            " " & _
            "    SELECT " & _
            "      CARD.USR$MN_CALCCARDKEY as CALCCARDKEY, " & _
            "      CARD.GOODKEY, " & _
            "      c.USR$DEPOTKEY as DEPOTKEY, " & _
            "      Sum(l.QUANTITY) as in_Q, " & _
            "      SUM(CARD.USR$INV_SELCOSTNCU*l.QUANTITY) as in_SUM, " & _
            "      0.000 as out_q, " & _
            "      0.000 as out_SUM, " & _
            "      0.000 as out_sumwDisc " & _
            "    FROM GD_DOCUMENT D " & _
            "    JOIN USR$MN_COOKCOURCE C on c.DOCUMENTKEY = D.ID " & _
            "    LEFT JOIN USR$MN_COOKCOURCELINE L ON L.MASTERKEY = c.DOCUMENTKEY " & _
            "    LEFT JOIN INV_CARD CARD ON CARD.ID  =  L.FROMCARDKEY " & _
            "     Where " & _
            "    d.DOCUMENTDATE between :db and :de " & _
            "    GROUP BY 1,2,3 " & _
            "    UNION ALL " & _
            "    SELECT " & _
            "      CARD.USR$MN_CALCCARDKEY as CALCCARDKEY, " & _
            "      CARD.GOODKEY, " & _
            "      m.USR$FROMDEPOT as DEPOTKEY, " & _
            "      0.000 as in_Q, " & _
            "      0.000 as in_SUM, " & _
            "      SUM(l.QUANTITY) as out_q, " & _
            "      SUM(CARD.USR$INV_SELCOSTNCU*l.QUANTITY) as out_SUM, " & _
            "      SUM(l.USR$SUMWITHNDSNCU) as out_sumwDisc " & _
            "    FROM GD_DOCUMENT D " & _
            "    JOIN USR$MN_MOVE M on m.DOCUMENTKEY =d.ID " & _
            "    LEFT JOIN USR$MN_MOVELINE L ON l.MASTERKEY  =  m.DOCUMENTKEY " & _
            "    LEFT JOIN INV_CARD CARD ON CARD.ID  =  l.FROMCARDKEY " & _
            "     Where " & _
            "    d.DOCUMENTDATE between :db and :de " & _
            "    GROUP BY 1,2,3 " & _
            "    UNION ALL " & _
            "    SELECT " & _
            "      CARD.USR$MN_CALCCARDKEY as CALCCARDKEY, " & _
            "      CARD.GOODKEY, " & _
            "      m.USR$MAINDEPOTKEY as DEPOTKEY, " & _
            "      0.000 as in_Q, " & _
            "      0.000 as in_SUM, " & _
            "      SUM(l.QUANTITY) as out_q, " & _
            "      SUM(CARD.USR$INV_SELCOSTNCU*l.QUANTITY) as out_SUM, " & _
            "      SUM(l.USR$SUMWITHNDSNCU) as out_sumwDisc " & _
            "    FROM GD_DOCUMENT D " & _
            "    JOIN USR$INV_SELLBILL M on m.DOCUMENTKEY =d.ID and d.DOCUMENTTYPEKEY = <RUID xID=""154715503"" DBID=""324253476""/> " & _
            "    LEFT JOIN USR$INV_SELLBILLLINE L ON l.MASTERKEY  =  m.DOCUMENTKEY " & _
            "    LEFT JOIN INV_CARD CARD ON CARD.ID  =  l.FROMCARDKEY " & _
            "     Where " & _
            "    d.DOCUMENTDATE between :db and :de " & _
            "    GROUP BY 1,2,3) MM " & _
            "LEFT JOIN GD_GOOD G ON G.ID  =  mm.GOODKEY " & _
            "LEFT JOIN USR$MN_CALCCARD CC ON mm.CALCCARDKEY  =  CC.DOCUMENTKEY " & _
            "left join gd_document cdoc on cdoc.ID  = cc.DOCUMENTKEY " & _
            "LEFT JOIN GD_VALUE V ON V.ID = G.VALUEKEY " & _
            "LEFT JOIN GD_CONTACT DEP on DEP.ID = MM.DEPOTKEY "
            IF dep(0)>0 Then
              q.SQL = q.SQL + "WHERE DEP.ID = " & dep(0)
            END IF
            q.SQL = q.SQL + _
            "GROUP BY 1,2,3,4,5,6, 7, 8,9,10,11  " & _
            "ORDER BY g.NAME, cdoc.DOCUMENTDATE "
          q.ParamByName("db").asDateTime = period(0)
          q.ParamByName("de").asDateTime = period(1)
          q.Open
          
          dim title , Deptname
          
          if dep(0)>0 Then
            Deptname  = q.FieldByNAme("DEPNAME").asString
          ELSE
            Deptname = "ККЦ"
          END IF
          
          set title = BaseQueryList.Query(BaseQueryList.Add("title", 1))
          call title.AddField("Db", "ftDateTime", 0, 0)
          call title.AddField("De", "ftDateTime", 0, 0)
          call title.AddField("Dept", "ftString", 60, 0)
          title.Open
          title.Edit
          title.FieldBYNAme("db").AsDateTime = period(0)
          title.FieldBYNAme("de").AsDateTime = period(1)
          title.FieldBYNAme("Dept").AsString = Deptname
          title.Post
        
          Set rp_Main157490754_1627051006 = BaseQueryList
        End Function
        
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 157490753_1627051006
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "30. Движение готовой продукции"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: ~
      FOLDERKEY: "147128142_340627674 Исследователь\\Общепит\\07. Отчёты общепит"
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "157490754_1627051006 rp_Main157490754_1627051006"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147094279_157767347 Отчеты по общепиту"
      SERVERKEY: ~
      TEMPLATEKEY: "157490807_1627051006 Движение готовой продукции. Общепит"
      EDITIONDATE: 2021-05-06T19:19:35+03:00