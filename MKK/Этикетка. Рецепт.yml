%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 153035907_1561130740
  Name: "Этикетка. Рецепт"
  Caption: "Этикетка. Рецепт"
  Version: "1.0.0.4"
  Optional: False
  Internal: True
  MD5: ED1974C6BD75FCC1191F15C5325B1CB2
Uses: 
  - "147069521_311980179 GS new. Общепит бэк. Документы. Рецепт"
Objects: 
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 153035838_1561130740
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 153035587_1561130740
    Fields: 
      NAME: "Этикетка.Рецепт. Шаблон"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR4"
      EDITIONDATE: 2020-11-11T11:52:39+03:00
      TEMPLATEDATA: | 
        <?xml version="1.0" encoding="utf-8"?>
        <Tgs_fr4SingleReport Version="4.15.13" DotMatrixReport="False" IniFile="\Software\Fast Reports" PreviewOptions.Buttons="4095" PreviewOptions.Zoom="1" PrintOptions.Printer="По умолчанию" PrintOptions.PrintOnSheet="0" ReportOptions.CreateDate="44145,790654537" ReportOptions.Description.Text="" ReportOptions.LastChange="44145,790654537" ScriptLanguage="PascalScript" ScriptText.Text="begin&#13;&#10;&#13;&#10;end." PropData="08446174617365747301010C2800000020446174615365743D2242494C4C504F532220446174615365744E616D653D2242494C4C504F532200010C2000000020446174615365743D224445502220446174615365744E616D653D224445502200010C2600000020446174615365743D225245434550542220446174615365744E616D653D22524543455054220000095661726961626C65730100055374796C650100">
          <TfrxDataPage Name="Data" Height="1000" Left="0" Top="0" Width="1000"/>
          <TfrxReportPage Name="Page1" PaperWidth="60" PaperHeight="60" PaperSize="256" LeftMargin="0,2" RightMargin="0,2" TopMargin="0,2" BottomMargin="0,3" ColumnWidth="0" ColumnPositions.Text="" LargeDesignHeight="True" HGuides.Text="" VGuides.Text="">
            <TfrxMasterData Name="MasterData1" Height="238,11039" Left="0" Top="18,89765" Width="225,259988" ColumnWidth="0" ColumnGap="0" DataSetName="BILLPOS" RowCount="0">
              <TfrxMemoView Name="Memo2" Left="3,77953" Top="56,11812" Width="222,99227" Height="22,67718" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-12" Font.Name="Arial" Font.Style="1" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[RECEPT.&#34;GOODNAME&#34;]"/>
              <TfrxMemoView Name="Memo3" Left="3,77953" Top="96,57483" Width="222,99227" Height="41,57483" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РЎРѕСЃС‚Р°РІ: &#13;&#10;[RECEPT.&#34;DESCRIPTION&#34;]"/>
              <TfrxMemoView Name="Memo4" Left="3,77953" Top="207,53556" Width="64,25201" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="Р‘РµР»РєРё:[RECEPT.&#34;USR$MN_PROTEIN&#34;]"/>
              <TfrxMemoView Name="Memo5" Left="67,03154" Top="208,53556" Width="64,25201" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="Р–РёСЂРё:[RECEPT.&#34;USR$MN_FAT&#34;]"/>
              <TfrxMemoView Name="Memo6" Left="131,28355" Top="208,31509" Width="86,92919" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РЈРіР»РµРІРѕРґС‹:[RECEPT.&#34;USR$MN_PROTEIN&#34;]"/>
              <TfrxMemoView Name="Memo7" Left="3,91342" Top="195,84261" Width="219,21274" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="[RECEPT.&#34;USR$MN_CALORIE&#34;] РєРєР°Р»./[RECEPT.&#34;CALORIE&#34;]РєР”Р¶."/>
              <TfrxMemoView Name="Memo8" Left="4,33859" Top="172,84261" Width="219,21274" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РЈСЃР». С…СЂР°РЅРµРЅРёСЏ: [RECEPT.&#34;USR$TERM&#34;]"/>
              <TfrxMemoView Name="Memo9" Left="3,77953" Top="138,72449" Width="90,70872" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РќРµС‚С‚Рѕ: [RECEPT.&#34;USR$OUTPUT&#34;]Рі."/>
              <TfrxMemoView Name="Memo1" Left="3,77953" Top="0" Width="215,43321" Height="56,69295" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="Р®СЂРёРґРёС‡РµСЃРєРёР№ Р°РґСЂРµСЃ:&#13;&#10;Р РµСЃРїСѓР±Р»РёРєР° Р‘РµР»Р°СЂСѓСЃСЊ, [RECEPT.&#34;ADRESS&#34;]&#13;&#10;РР·РіРѕС‚РѕРІРёС‚РµР»СЊ: РєР°С„Рµ &#34;Р‘СЂРёРіР°РЅС‚РёРЅР°&#34;&#13;&#10;[COMPANYADDRESS]"/>
              <TfrxMemoView Name="Memo10" Left="3,77953" Top="78,81107" Width="219,21274" Height="15,11812" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РЎРўР‘: [RECEPT.&#34;TNPA&#34;]"/>
              <TfrxMemoView Name="Memo11" Left="3,77953" Top="150,40167" Width="219,21274" Height="15,11812" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="Р”Р°С‚Р° Рё РІСЂРµРјСЏ РёР·РіРѕС‚РѕРІР»РµРЅРёСЏ: __________  [YearOf(NOW)]Рі"/>
              <TfrxMemoView Name="Memo12" Left="3,77953" Top="161,96073" Width="219,21274" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РЎСЂРѕРє РіРѕРґРЅРѕСЃС‚Рё: [RECEPT.&#34;USR$TERMUSE&#34;]"/>
              <TfrxMemoView Name="Memo13" Left="3,77953" Top="184,85838" Width="219,21274" Height="11,33859" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="РџРёС‰РµРІР°СЏ Рё СЌРЅРµСЂРіРµС‚РёС‡.С†РµРЅРЅРѕСЃС‚СЊ:"/>
            </TfrxMasterData>
          </TfrxReportPage>
        </Tgs_fr4SingleReport>
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 153035588_1561130740
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 153035587_1561130740
    Fields: 
      NAME: "rp_Main147045414_140192452147072825_1577153035588_1561130740"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "147012128_9263644 gdc_frmUserComplexDocument147012105_52143670"
      OBJECTNAME: "gdc_frmUserComplexDocument147012105_52143670"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2020-11-11T11:52:39+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN147045414_140192452147072825_1577153035588_1561130740
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNUUFJTVAUAAABRVUFOVAsAAADK7ust4u4g+PLz6gAAAAAAAAAAAAAAAAAAAAAAAAAAAAIA
        AABeUkZOU1RGTFBS
      SCRIPT: | 
        function rp_Main147045414_140192452147072825_1577153035588_1561130740(OwnerForm, Quant)
        
          doc = OwnerForm.SelectedKey
          id = "(" + Join(doc(0), ",") + ")"
        
          BaseQueryList.Clear
          set q = BaseQueryList.Query(BaseQueryList.Add("Recept",0))
          q.SQL =  _
          " select " & _
          " gd.id, " & _
          " gg.alias, " & _
          " rec.usr$goodkey as goodkey, " & _
          " gg.name goodname, " & _
          " rec.usr$output, " & _
          " gd.documentdate, " & _
          " rec.usr$comment, " & _
          " rec.usr$color_blob, " & _
          " rec.usr$consistence2, " & _
          " rec.usr$view2, " & _
          " rec.USR$TERM, " & _
          " rec.USR$TERMUSE, " & _
          " rec.usr$taste_blob, " & _
          " gg.usr$mn_protein, " & _
          " gg.usr$mn_fat, " & _
          " gg.usr$mn_uglevod, " & _
          " gg.usr$mn_calorie, " & _
          " ROUND(gg.usr$mn_calorie* 4.1868,1) as calorie, " & _
          " COALESCE(comp.ZIP,'')  || ' ' || comp.REGION || ' обл., ' ||  comp.CITY || ', ' || comp.ADDRESS as ADRESS, " & _
          " tnpa.USR$NAME as TNPA," & _
          " gg.DESCRIPTION " & _
          " from usr$mn_receipt rec " & _
          " left join gd_document gd on gd.id = rec.documentkey " & _
          " left join gd_good gg on gg.id = rec.usr$goodkey " & _
          " left join GD_CONTACT comp on comp.ID = <companykey/> " & _
          "left join USR$MN_TNPA tnpa on tnpa.ID = rec.USR$MN_TNPA" & _
          " where rec.documentkey in " + id
          q.Open
        
          set qcon = BaseQueryList.Query(BaseQueryList.Add("dep",0))
          qcon.SQL = "SELECT * FROM gd_contact WHERE id = :id "
          qcon.ParamByName("id").AsInteger = ibLOgin.CompanyKey
          qcon.Open
        
        
          dim  BillPos1
          set BillPos1 = BaseQueryList.Query(BaseQueryList.Add("BillPos", 1))
          call BillPos1.AddField("ID", "ftInteger", False, 0)
          call BillPos1.AddField("ALIAS", "ftString", 60, 0)
          call BillPos1.AddField("goodkey", "ftInteger", False, 0)
          call BillPos1.AddField("goodname", "ftString", 60, 0)
          call BillPos1.AddField("usr$output", "ftString", 10, 0)
          call BillPos1.AddField("DOCUMENTDATE", "ftDate", 0, 0)
          call BillPos1.AddField("usr$comment", "ftString", 300, 0)
          call BillPos1.AddField("usr$color_blob", "ftString", 300, 0)
          call BillPos1.AddField("usr$consistence2", "ftString", 300, 0)
          call BillPos1.AddField("usr$view2", "ftString", 300, 0)
          call BillPos1.AddField("USR$TERM", "ftString", 300, 0)
          call BillPos1.AddField("USR$TERMUSE", "ftString", 60, 0)
          call BillPos1.AddField("usr$taste_blob", "ftString", 300, 0)
          call BillPos1.AddField("usr$mn_protein", "ftFloat", 0, 0)
          call BillPos1.AddField("usr$mn_fat", "ftFloat", 0, 0)
          call BillPos1.AddField("usr$mn_uglevod", "ftFloat", 0, 0)
          call BillPos1.AddField("usr$mn_calorie", "ftString", 20, 0)
          call BillPos1.AddField("calorie", "ftString", 20, 0)
          call BillPos1.AddField("ADRESS", "ftString", 300, 0)
          call BillPos1.AddField("TNPA", "ftString", 120, 0)
          call BillPos1.AddField("description", "ftString", 1500, 0)
          BillPos1.Open
        
          dim A, I, J, K, T
          A = Array("ID","ALIAS", "goodkey", "goodname", "usr$output", "DOCUMENTDATE","usr$comment", "usr$color_blob", "usr$consistence2", "usr$view2","USR$TERM","USR$TERMUSE", "usr$mn_protein", "usr$mn_protein", "usr$mn_fat", "usr$mn_uglevod", "usr$mn_calorie", "calorie", "ADRESS", "TNPA", "description")
        
          while not q.EOF
             J = 0
            for I = 0 to Quant-1
              BillPos1.Append
              for k = LBound(A) to UBound(A)
                BillPos1.FieldByName(A(K)).Assign q.FieldByName(A(K))
              next
              BillPos1.Post
            next
            q.Next
          wend
        
          
          
        
          set rp_Main147045414_140192452147072825_1577153035588_1561130740 = BaseQueryList
        end function
        
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 153035587_1561130740
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "Этикетка"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: ~
      FOLDERKEY: ~
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "153035588_1561130740 rp_Main147045414_140192452147072825_1577153035588_1561130740"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147012252_9263644 Отчеты(gdc_frmUserComplexDocument147012105_52143670)"
      SERVERKEY: ~
      TEMPLATEKEY: "153035838_1561130740 Этикетка.Рецепт. Шаблон"
      EDITIONDATE: 2020-11-11T11:52:39+03:00