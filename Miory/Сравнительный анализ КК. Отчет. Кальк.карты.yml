%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 147042634_1606841481
  Name: "Сравнительный анализ КК. Отчет. Кальк.карты"
  Caption: "Сравнительный анализ КК. Отчет. Кальк.карты"
  Version: "1.0.0.2"
  Optional: False
  Internal: True
  MD5: B10CD1BDFE0676D26A07A41674627B3A
Uses: 
  - "147070535_311980179 GS new. Общепит бэк. Документы. Калькуляционная карта"
Objects: 
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 147042495_1606841481
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 147042485_1606841481
    Fields: 
      NAME: "Список карточек147042495_1606841481"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR"
      EDITIONDATE: 2021-02-03T14:28:58+03:00
      TEMPLATEDATA: !!binary > 
        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
        QH3tck/TmOVA
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 147042486_1606841481
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 147042485_1606841481
    Fields: 
      NAME: "rp_Main147136434_246439263147042486_1606841481"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "147012429_9263644 gdc_frmUserComplexDocument147012349_52143670"
      OBJECTNAME: "gdc_frmUserComplexDocument147012349_52143670"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2021-02-19T13:56:19+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN147136434_246439263147042486_1606841481
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNUUFJTVAMAAABCVUgJAAAAwfP14+Dr8uXwCgAAAGdkX2NvbnRhY3QEAAAAbmFtZQIAAABJ
        RAcNAAAAQ09OVEFDVFRZUEU9MgAAAAACAAAAXkFGTlNURkxQUg==
      SCRIPT: | 
        function rp_Main147136434_246439263147042486_1606841481(OwnerForm, buh)
          doc = OwnerForm.SelectedKey
          id = "(" + Join(doc(0), ",") + ")"
        
          BaseQueryList.Clear
          
          set Com1 = BaseQueryList.Query(BaseQueryList.Add("Com1",0))
          Com1.SQL =   " select con.name, p.nickname, p.rank from gd_contact con JOIN gd_people p on p.contactkey = con.id where con.id = :id "
          Com1.ParamBYName("ID").ASInteger = buh(0)
          Com1.Open
          
          
          set q = BaseQueryList.Query(BaseQueryList.Add("Order",0))
          q.SQL =   _
          " select " & _
          " calc.documentkey CalcCardKey, " & _
          " calc.usr$goodkey , " & _
          " (good.name) as good, (cont1.name) as todepot, (cont2.name) as fromdepot, " + _
          " (cont3.name) as firm , doc.documentdate, doc.number, " & _
          " calc.usr$addition, calc.usr$costcard, " + _
          " calc.usr$costcource,  calc.usr$countcourse,  " & _
          " ROUND(calc.USR$PRIMECOSTCARD,2) as PRIMECOSTCARD,  " + _
          "  calc.usr$outputstr " + _
          " from usr$mn_calccard calc " + _
          " left join gd_document doc on doc.id = calc.documentkey " + _
          " left join gd_good good on good.id = calc.usr$goodkey " + _
          " left join gd_contact cont1 on cont1.id = calc.usr$depotkey " + _
          " left join gd_contact cont2 on cont2.id = calc.usr$fromdepot " + _
          " left join gd_contact cont3 on cont3.id = doc.companykey " + _
          " where calc.documentkey in " + id + _
          " ORDER BY calc.documentkey "
          Q.Open
          set rp_Main147136434_246439263147042486_1606841481 = BaseQueryList
        end function
        
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 147042485_1606841481
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "Сравнительный анализ КК"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: ~
      FOLDERKEY: ~
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "147042486_1606841481 rp_Main147136434_246439263147042486_1606841481"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147012527_9263644 Отчеты(gdc_frmUserComplexDocument147012349_52143670)"
      SERVERKEY: ~
      TEMPLATEKEY: "147042495_1606841481 Список карточек147042495_1606841481"
      EDITIONDATE: 2021-02-19T13:55:36+03:00