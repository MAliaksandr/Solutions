%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 153447626_2120306836
  Name: "БелГисс. Ценник с составом в меню. Группа товаров"
  Caption: "БелГисс. Ценник с составом в меню. Группа товаров"
  Version: "1.0.0.1"
  Optional: False
  Internal: True
  MD5: 7B2C2425C979257E1EF2C1B467821B08
Uses: 
  - "147070091_311980179 GS new. Общепит бэк. Документы. Меню"
Objects: 
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 148333946_1636064287
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 148333936_1636064287
    Fields: 
      NAME: "Общепит. Цены бистро148333946_1636064287"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR4"
      EDITIONDATE: 2023-05-11T13:05:31+03:00
      TEMPLATEDATA: | 
        <?xml version="1.0" encoding="utf-8"?>
        <Tgs_fr4SingleReport Version="4.15.13" DotMatrixReport="False" IniFile="\Software\Fast Reports" PreviewOptions.Buttons="4095" PreviewOptions.Zoom="1" PrintOptions.Printer="По умолчанию" PrintOptions.PrintOnSheet="0" ReportOptions.CreateDate="40527,3989181829" ReportOptions.Description.Text="" ReportOptions.LastChange="40527,3989181829" ScriptLanguage="PascalScript" ScriptText.Text="begin&#13;&#10;&#13;&#10;end." PropData="08446174617365747301010C2200000020446174615365743D224D454E552220446174615365744E616D653D224D454E552200010C2A00000020446174615365743D224D454E554C494E452220446174615365744E616D653D224D454E554C494E452200010C2400000020446174615365743D225449544C452220446174615365744E616D653D225449544C45220000095661726961626C65730100055374796C650100">
          <TfrxDataPage Name="Data" Height="1000" Left="0" Top="0" Width="1000"/>
          <TfrxReportPage Name="Page1" PaperWidth="210" PaperHeight="297" PaperSize="9" LeftMargin="10" RightMargin="10" TopMargin="10" BottomMargin="10" Columns="2" ColumnWidth="95" ColumnPositions.Text="0&#13;&#10;95" HGuides.Text="" VGuides.Text="">
            <TfrxMasterData Name="MasterData1" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arial" Font.Style="1" Height="196,53543307" Left="0" ParentFont="False" Top="18,89765" Width="359,05535" ColumnWidth="0" ColumnGap="0" DataSetName="MENULINE" RowCount="0">
              <TfrxMemoView Name="Memo1" Left="0" Top="26,45671" Width="283,46475" Height="45,35436" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arno Pro" Font.Style="1" Frame.Typ="3" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[MENULINE.&#34;NAME&#34;]  [MENULINE.&#34;USR$OUTPUT&#34;]Рі.&#13;&#10;[MENULINE.&#34;USR$STB&#34;]"/>
              <TfrxMemoView Name="Memo2" Left="0" Top="143,62214" Width="283,46475" Height="52,91342" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-32" Font.Name="Arno Pro" Font.Style="0" Frame.Typ="11" HAlign="haRight" ParentFont="False" VAlign="vaCenter" Text="[MENULINE.&#34;USR$COST&#34;] СЂСѓР±."/>
              <TfrxMemoView Name="Memo3" Left="0" Top="73,37013" Width="283,46475" Height="64,25201" ShowHint="False" DataSetName="MENULINE" Font.Charset="1" Font.Color="0" Font.Height="-13" Font.Name="Arno Pro" Font.Style="0" Frame.Typ="3" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text=" [MENULINE.&#34;DESCRIPTION&#34;]"/>
              <TfrxMemoView Name="Memo4" Left="0" Top="0" Width="283,46475" Height="26,45671" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-15" Font.Name="Arial" Font.Style="1" Frame.Typ="7" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[COMPANYNAME]"/>
              <TfrxMemoView Name="Memo5" Left="0" Top="169,96073" Width="128,50402" Height="26,45671" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Arno Pro" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="Р‘:[MENULINE.&#34;USR$MN_PROTEIN&#34;], Р–:[MENULINE.&#34;USR$MN_FAT&#34;], РЈ: [MENULINE.&#34;USR$MN_UGLEVOD&#34;] &#13;&#10;Р­РЅ.С†РµРЅ: [MENULINE.&#34;USR$MN_CALORIE&#34;] РљРєР°Р»."/>
              <TfrxMemoView Name="Memo6" Left="0" Top="135,84261" Width="283,46475" Height="15,11812" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arial" Font.Style="1" Frame.Typ="3" ParentFont="False" Text="РЎСЂРѕРє РіРѕРґРЅРѕСЃС‚Рё: [MENULINE.&#34;USR$TERM&#34;]"/>
              <TfrxMemoView Name="Memo7" Left="-2" Top="150,1812" Width="143,62214" Height="22,67718" ShowHint="False" Font.Charset="1" Font.Color="0" Font.Height="-9" Font.Name="Arno Pro" Font.Style="0" ParentFont="False" VAlign="vaBottom" Text="Р”Р°С‚Р° РёР·РіРѕС‚РѕРІР»РµРЅРёСЏ:[TITLE.&#34;DateProd&#34;]&#13;&#10;Р’СЂРµРјСЏ:[TITLE.&#34;TimeProd&#34;]"/>
            </TfrxMasterData>
          </TfrxReportPage>
        </Tgs_fr4SingleReport>
        
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 148333937_1636064287
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 148333936_1636064287
    Fields: 
      NAME: "rp_Main147015402_9263644147986039_157599148333937_1636064287"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "147014299_9263644 gdc_frmUserComplexDocument147014188_52143670"
      OBJECTNAME: "gdc_frmUserComplexDocument147014188_52143670"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2023-06-20T10:22:51+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN147015402_9263644147986039_157599148333937_1636064287
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNUUFJTVAUAAABUREFURREAAADE4PLgIOjn4+7y7uLr5e3o/wAAAAAAAAAAAAAAAAIAAAAA
        AAAAAAIAAABeUkZOU1RQUlNUBQAAAFRUSU1FEgAAAMLw5ez/IOjn4+7y7uLr5e3o/wAAAAAAAAAA
        AAAAAAQAAAAAAAAAAAIAAABeUkZOU1RQUlNUCAAAAEdST1VQS0VZDwAAANLu4uDw7fvlIOPw8+/v
        +w0AAABnZF9nb29kZ3JvdXAgBAAAAG5hbWUCAAAASUQIAAAAAAAAAAAAAAAARk5TVEZMUFI=
      SCRIPT: | 
        function rp_Main147015402_9263644147986039_157599148333937_1636064287(OwnerForm, tdate, ttime, groupkey)
        
          doc = OwnerForm.SelectedKey
          id = "(" + Join(doc(0), ",") + ")"
          
          ggr = Join(groupkey, ",")
        
          BaseQueryList.Clear
          set q = BaseQueryList.Query(BaseQueryList.Add("Menu", 0))
          q.SQL = " SELECT * FROM usr$mn_menu mm " + _
              " JOIN usr$mn_menuname mn on mm.usr$menunamekey = mn.id " + _
              " JOIN gd_contact con on mm.usr$depotkey = con.id " + _
              " WHERE mm.documentkey IN " + ID
        
          set qmenu = BaseQueryList.Query(BaseQueryList.Add("Menuline", 0))
          qmenu.SQL = _
          " SELECT g_s_delchar(g.alias) as alias, " &  _
          " g.description, ml.USR$COST, " & _
          " g.USR$MN_FAT, " & _
          " g.USR$MN_UGLEVOD, " & _
          " g.USR$MN_CALORIE, " & _
          " g.USR$MN_PROTEIN, " & _
          " rc.USR$STB, rc.USR$TERM, " & _
          " g.name, gg.name as goodnam, mc.usr$outputstr as usr$output FROM usr$mn_menuline ml " & _
          " left JOIN usr$mn_menu mm on mm.documentkey = ml.masterkey " & _
          " left JOIN gd_good g on g.id = ml.usr$goodkey " & _
          " left JOIN GD_GOODGROUP gg on gg.id = g.groupkey " & _
          " left JOIN usr$mn_calccard mc on mc.documentkey = ml.usr$cardkey " + _
          " left join USR$MN_RECEIPT rc on rc.DOCUMENTKEY = mc.USR$RECEIPTKEY " & _
          " WHERE ml.masterkey in"  + ID
          IF ggr <> "" Then
            qmenu.SQL = qmenu.SQL + _
            " AND GG.ID IN (" & ggr & ")"
          end if
          qmenu.SQL = qmenu.SQL + _
          " ORDER BY gg.name, g_s_delchar(g.alias)"
        
          q.Open
          q.IsResult = 1
          qmenu.Open
          qmenu.IsResult = 1
          
          dim Title
          set Title = BaseQueryList.Query(BaseQueryList.Add("Title", "1"))
          call Title.AddField("TimeProd", "ftTime", 0, 0)
          call Title.AddField("DateProd", "ftDate", 0, 0)
          Title.Open
          Title.Insert
          Title.FieldByName("TimeProd").asString = ttime
          Title.FieldByName("DateProd").asString = tDate
          Title.Post
        
        
        '  BaseQueryList.AddMasterDetail "Menu","documentkey", "Menuline", "masterkey;name1;alias"
        
          set rp_Main147015402_9263644147986039_157599148333937_1636064287 = BaseQueryList
        end function
        
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 148333936_1636064287
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "Ценник со составом"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: ~
      FOLDERKEY: ~
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "148333937_1636064287 rp_Main147015402_9263644147986039_157599148333937_1636064287"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147014580_9263644 Отчеты(gdc_frmUserComplexDocument147014188_52143670)"
      SERVERKEY: ~
      TEMPLATEKEY: "148333946_1636064287 Общепит. Цены бистро148333946_1636064287"
      EDITIONDATE: 2023-06-20T10:22:51+03:00