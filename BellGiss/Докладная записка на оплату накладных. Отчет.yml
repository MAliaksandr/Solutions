%YAML 1.1
--- 
StructureVersion: "1.0"
Properties: 
  RUID: 148155046_2021781451
  Name: "Докладная записка на оплату накладных. Отчет"
  Caption: "Докладная записка на оплату накладных. Отчет"
  Version: "1.0.0.1"
  Optional: False
  Internal: True
  MD5: BD073D064D8CD3482D86832165E52963
Uses: 
  - "147728891_43451302 Общие данные"
  - "147724110_43451302 Торговля - отчеты"
Objects: 
  - 
    Properties: 
      Class: "TgdcTemplate"
      RUID: 148154876_2021781451
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 148154866_2021781451
    Fields: 
      NAME: "Реестр приходных накладных по поставщика148154876_2021781451"
      DESCRIPTION: ~
      TEMPLATETYPE: "FR"
      EDITIONDATE: 2023-03-13T13:00:34+03:00
      TEMPLATEDATA: !!binary > 
        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
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 148154873_2021781451
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 148154866_2021781451
    Fields: 
      NAME: "rp_Event147127649_356867677148154873_2021781451"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTEVENT"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2023-03-13T11:27:09+03:00
      DISPLAYSCRIPT: | 
        RP_EVENT147127649_356867677148154873_2021781451
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QGAAAAUEFSQU1TBgAAAFBBUkFNUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNU
        UFJTVAUAAABWQUxVRQUAAABWQUxVRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGTlNUUFJTVAQA
        AABOQU1FBAAAAE5BTUUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARk5TVEZMUFI=
      SCRIPT: | 
        '#include Inv_ShowDocumentDialog
        function rp_Event147127649_356867677148154873_2021781451(Params, Value, Name)
          'Результат возвращаемый функцией должен быть True или False
          '  Если функция вернет True, то произойдет закрытие окна предварительного просмотра
          call Inv_ShowDocumentDialog(inv_DocAddwOptBill_RUID, Value(1))
          rp_Event147127649_356867677148154873_2021781451 = False
        end function
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147127621_356867677 Inv_ShowDocumentDialog"
  - 
    Properties: 
      Class: "TgdcFunction"
      RUID: 148154867_2021781451
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
      HeadObject: 148154866_2021781451
    Fields: 
      NAME: "rp_Main147677876_37911495148154867_2021781451"
      COMMENT: ~
      EVENT: ~
      FUNCTIONTYPE: ~
      GROUPNAME: ~
      INHERITEDRULE: 0
      LANGUAGE: "VBScript"
      LOCALNAME: ~
      MODIFYDATE: ~
      MODULE: "REPORTMAIN"
      MODULECODE: "1010001_17 APPLICATION"
      OBJECTNAME: "APPLICATION"
      OWNERNAME: ~
      PUBLICFUNCTION: 1
      SHORTCUT: ~
      USEDEBUGINFO: 0
      EDITIONDATE: 2023-03-13T13:05:25+03:00
      DISPLAYSCRIPT: | 
        RP_MAIN147677876_37911495148154867_2021781451
        
      ENTEREDPARAMS: !!binary > 
        U0xQUlBSU1QJAAAAT1dORVJGT1JNCQAAAE9XTkVSRk9STQAAAAAAAAAAAAAAAAsAAAAAAAAAAAAA
        AABGTlNUUFJTVAYAAABQRVJJT0QGAAAAz+Xw6O7kAAAAAAAAAAAAAAAADAAAAAAAAAAAAgAAAF5S
        Rk5TVFBSU1QEAAAAQ1VTVAkAAADP7vHy4OL56OoKAAAAZ2RfY29udGFjdAQAAABuYW1lAgAAAElE
        BxQAAABDT05UQUNUVFlQRSBJTiAoMyw0KQAAAAACAAAAXlJGTlNUUFJTVAUAAABBREFURQwAAADE
        4PLgIOfg7+jx6ugAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAARk5TVFBSU1QFAAAAQU5VTUINAAAA
        ze7s5fAg5+Dv6PHq6AAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAABGTlNUUFJTVAQAAABDT04xBgAA
        AMPrLsHz9Q4AAABHRF9DT05UQUNUIGdnMQQAAABOYW1lAgAAAGlkB5kAAAAiZ2cxLmNvbnRhY3R0
        eXBlID0gMiBhbmQgRVhJU1RTIChTRUxFQ1QgY29uLmlkIEZST00gZ2RfY29udGFjdCBjb24gd2hl
        cmUgY29uLmxiIDw9IGdnMS5sYiBhbmQgY29uLnJiID49Z2cxLnJiIGFuZCBjb24uaWQgPSAiK0NT
        dHIoSUJMb2dpbi5Db21wYW55S2V5KSsiKSIIAAAAVkJTY3JpcHQCAAAAXkFGTlNUUFJTVAQAAABD
        T04yBwAAAM/u5O/o8fwOAAAAR0RfQ09OVEFDVCBnZzEEAAAATmFtZQIAAABpZAeZAAAAImdnMS5j
        b250YWN0dHlwZSA9IDIgYW5kIEVYSVNUUyAoU0VMRUNUIGNvbi5pZCBGUk9NIGdkX2NvbnRhY3Qg
        Y29uIHdoZXJlIGNvbi5sYiA8PSBnZzEubGIgYW5kIGNvbi5yYiA+PWdnMS5yYiBhbmQgY29uLmlk
        ID0gIitDU3RyKElCTG9naW4uQ29tcGFueUtleSkrIikiCAAAAFZCU2NyaXB0AgAAAF5BRk5TVFBS
        U1QEAAAAQ09OMwcAAADP7uTv6PH8DgAAAEdEX0NPTlRBQ1QgZ2cxBAAAAE5hbWUCAAAAaWQHmQAA
        ACJnZzEuY29udGFjdHR5cGUgPSAyIGFuZCBFWElTVFMgKFNFTEVDVCBjb24uaWQgRlJPTSBnZF9j
        b250YWN0IGNvbiB3aGVyZSBjb24ubGIgPD0gZ2cxLmxiIGFuZCBjb24ucmIgPj1nZzEucmIgYW5k
        IGNvbi5pZCA9ICIrQ1N0cihJQkxvZ2luLkNvbXBhbnlLZXkpKyIpIggAAABWQlNjcmlwdAIAAABe
        QUZOU1RGTFBS
      SCRIPT: | 
        ' #include inv_GetRegQuery_opt
        function rp_Main147677876_37911495148154867_2021781451(OwnerForm, period, Cust, adate, anumb,  con1, con2, con3)
        
          BaseQueryList.Clear
          
          set qCust = BaseQueryList.Query(BaseQueryList.Add("Customer", 0))
          qCust.SQL = _
          "select " & _
          "com.COMPFULLNAME, " & _
          "com.TAXID, " & _
          "com.ACCOUNT, " & _
          "com.BANKNAME, " & _
          "com.BANKCODE, " & _
          "com.BANKCITY, " & _
          "com.BANKADDRESS " & _
          "from gd_contact con " & _
          "left join gd_v_company com on com.ID = con.ID " & _
          "where con.ID = " & Cust(0)
          qCust.Open
          
          set Com1 = BaseQueryList.Query(BaseQueryList.Add("Com1",0))
          Com1.SQL =   " select con.name as fname, p.rank, p.NICKNAME as Name from gd_contact con JOIN gd_people p on p.contactkey = con.id where con.id = :id "
          Com1.ParamBYName("ID").ASInteger = Con1(0)
          Com1.Open
          set Com2 = BaseQueryList.Query(BaseQueryList.Add("Com2",0))
          Com2.SQL =   " select con.name as fname, p.rank, p.NICKNAME as Name  from gd_contact con JOIN gd_people p on p.contactkey = con.id where con.id = :id "
          Com2.ParamBYName("ID").ASInteger = Con2(0)
          Com2.Open
          set Com3 = BaseQueryList.Query(BaseQueryList.Add("Com3",0))
          Com3.SQL =   " select con.name as fname, p.rank, p.NICKNAME as Name  from gd_contact con JOIN gd_people p on p.contactkey = con.id where con.id = :id "
          Com3.ParamBYName("ID").ASInteger = Con3(0)
          Com3.Open
          
          
          set qname = BaseQueryList.Query(BaseQueryList.Add("ListName", 0))
          qname.SQL =  " select gc.name ourcompany, con2.name accauntantname, con1.name directorname" + _
          " from usr$inv_addwbill head " + _
          " left join gd_document doc ON head.documentkey = doc.id " + _
          " left join gd_contact gc on gc.id = doc.companykey " + _
          " left join gd_company com1 on com1.contactkey = gc.id " + _
          " left join gd_contact con1 on con1.id = com1.directorkey " + _
          " left join gd_company com2 on com2.contactkey = gc.id " + _
          " left join gd_contact con2 on con2.id = com2.chiefaccountantkey " +_
          " where doc.id = head.documentkey"
        
          set q = BaseQueryList.Query(BaseQueryList.Add("ListOpt", 0))
          q.SQL =   " SELECT " & _
            " doc.id, " & _
            " doc.number, " & _
            " doc.documentdate, " & _
            " contr.DOCUMENTDATE as contractdate, " & _
            " contr.NUMBER as contractnumber, " & _
            " con.name as CUSTOMER, " & _
            " com.fullname, " & _
            " dep.name as DepName, " & _
            " SUM(line.USR$SUMWITHNDSNCU) as SUMWITHNDS, " & _
            " SUM(line.usr$sumncu) as SUMBUYNCU, " & _
            " SUM(line.usr$sumndsncu) as SUMNDSNCU " & _
            " FROM usr$inv_addwbill head " & _
            " JOIN gd_document doc ON head.documentkey = doc.id " & _
            " LEFT JOIN usr$inv_addwbillline line ON head.documentkey = line.masterkey " & _
            " LEFT JOIN gd_contact con ON head.USR$CONTACTKEY = con.id " & _
            " left join gd_contact dep on dep.id = head.usr$deptkey " & _
            " left join gd_document contr on contr.ID = head.USR$CONTRACTKEY " & _
            " LEFT JOIN GD_COMPANY com ON head.usr$contactkey = com.contactkey " & _
            " left join inv_card card on card.id  =  line.FROMCARDKEY " & _
            " left join gd_good g on g.id = card.goodkey " & _
            " left join gd_goodgroup gr on gr.id = g.groupkey " & _
            " left join inv_card ic_tara on ic_tara.id = card.id and " & _
            " exists (select * from gd_goodgroup gr1 where gr.lb >= gr1.lb and gr.rb <= gr1.rb and gr1.id = :idtara) " & _
            " WHERE " & _
            " doc.documentdate >= :datebegin and doc.documentdate <= :dateend and " & _
            " doc.documenttypekey = :documenttypekey " & _
            " "
          if Cust(0) > 0 then
            q.SQL = q.SQL + " and con.ID = " & Cust(0)
          end if
          if IBLogin.IsHolding then
            q.SQL = q.SQL + " AND doc.companykey IN (" + IBLogin.HoldingList + ")"
          else
            q.SQL = q.SQL + " AND doc.companykey = " + CStr(IBLogin.CompanyKey)
          end if
          q.SQL = q.SQL + _
            " GROUP BY 1, doc.id, doc.number, doc.documentdate, con.name , com.fullname, contr.DOCUMENTDATE, contr.NUMBER, dep.name " & _
            " ORDER BY doc.documentdate, doc.number "
          q.ParamByName("idtara").AsInteger = gdcBaseManager.GetIDByRUID(PackageGroup_XID, PackageGroup_DBID)
          q.ParamByName("documenttypekey").AsInteger = OwnerForm.gdcObject.FieldByName("documenttypekey").AsInteger
          q.ParamByName("datebegin").AsVariant = period(0)
          q.ParamByName("dateend").AsVariant = period(1)
          q.Open
          q.IsResult = 1
          qname.Open
          qname.IsResult = 1
          
          Dim Header
          set Header = BaseQueryList.Query(BaseQueryList.Add("Header", 1))
          call Header.addfield("DateBegin", "ftDate", 0, 0)
          call Header.addfield("DateEnd", "ftDate", 0, 0)
          call Header.addfield("aDate", "ftDate", 0, 0)
          call Header.AddField("aNumb", "ftString", 60, False)
          call Header.AddField("Cust", "ftString", 60, False)
          Header.Open
          Header.Append
          Header.FieldByName("DateBegin").AsVariant = period(0)
          Header.FieldByName("DateEnd").AsVariant = period(1)
          Header.FieldByName("aDate").AsVariant = adate
          Header.FieldByName("aNumb").AsVariant = anumb
          if Cust(0) > 0 then
             Header.FieldByName("Cust").AsVariant = q.FieldByname("CUSTOMER").AsString
          else
             Header.FieldByName("Cust").AsVariant = "Все поставщики"
          end if
          Header.Post
          
          set rp_Main147677876_37911495148154867_2021781451 = BaseQueryList
        end function
        
    Set: 
      - 
        Table: "RP_ADDITIONALFUNCTION"
        Items: 
          - 
            ADDFUNCTIONKEY: "147011298_73119807 inv_GetRegQuery_opt"
  - 
    Properties: 
      Class: "TgdcReport"
      RUID: 148154866_2021781451
      AlwaysOverwrite: False
      DontRemove: False
      IncludeSiblings: False
    Fields: 
      NAME: "05. Докладная записка на оплату"
      DESCRIPTION: ~
      DISPLAYINMENU: 1
      EVENTFORMULAKEY: "148154873_2021781451 rp_Event147127649_356867677148154873_2021781451"
      FOLDERKEY: ~
      FRQREFRESH: 1
      GLOBALREPORTKEY: ~
      ISLOCALEXECUTE: 1
      ISREBUILD: 1
      MAINFORMULAKEY: "148154867_2021781451 rp_Main147677876_37911495148154867_2021781451"
      MODALPREVIEW: 0
      PARAMFORMULAKEY: ~
      PREVIEW: 1
      REPORTGROUPKEY: "147011000_109092844 Торговля\\01. Накладная на получение товара"
      SERVERKEY: ~
      TEMPLATEKEY: "148154876_2021781451 Реестр приходных накладных по поставщика148154876_2021781451"
      EDITIONDATE: 2023-03-13T13:05:25+03:00